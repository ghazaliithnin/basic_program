<!DOCTYPE html>
<!-- saved from url=(0038)https://realpython.com/python-sockets/ -->
<html lang="en" inmaintabuse="jlb"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script type="text/javascript" src="./Socket Programming in Python (Guide) – Real Python_files/track"></script>
<link href="https://files.realpython.com/" rel="preconnect">
<title>Socket Programming in Python (Guide) – Real Python</title>
<meta name="author" content="Real Python">
<meta name="description" content="In this in-depth tutorial you&#39;ll learn how to build a socket server and client with Python. By the end of this tutorial, you&#39;ll understand how to use the main functions and methods in Python&#39;s socket module to write your own networked client-server applications.">
<meta name="keywords" content="">

<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover">
<link rel="stylesheet" href="./Socket Programming in Python (Guide) – Real Python_files/font.32be62914940.css">
<link rel="stylesheet" href="./Socket Programming in Python (Guide) – Real Python_files/realpython.min.14d880ad4b12.css">
<link rel="canonical" href="https://realpython.com/python-sockets/">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://files.realpython.com/media/Python-Sockets-Tutorial_Watermarked.815ce6c85789.jpg">
<meta property="og:image" content="https://files.realpython.com/media/Python-Sockets-Tutorial_Watermarked.815ce6c85789.jpg">
<meta name="twitter:creator" content="@realpython">
<meta name="twitter:site" content="@realpython">
<meta property="og:title" content="Socket Programming in Python (Guide) – Real Python">
<meta property="og:type" content="article">
<meta property="og:url" content="https://realpython.com/python-sockets/">
<meta property="og:description" content="In this in-depth tutorial you&#39;ll learn how to build a socket server and client with Python. By the end of this tutorial, you&#39;ll understand how to use the main functions and methods in Python&#39;s socket module to write your own networked client-server applications.">
<link href="https://realpython.com/static/favicon.68cbf4197b0c.png" rel="icon">
<link href="https://realpython.com/atom.xml" rel="alternate" title="Real Python" type="application/atom+xml">
<link rel="manifest" href="https://realpython.com/manifest.json">
<script type="text/javascript" async="" src="./Socket Programming in Python (Guide) – Real Python_files/client.js.download"></script><script src="./Socket Programming in Python (Guide) – Real Python_files/2220911568135371" async=""></script><script async="" src="./Socket Programming in Python (Guide) – Real Python_files/fbevents.js.download"></script><script type="text/javascript" async="" src="./Socket Programming in Python (Guide) – Real Python_files/6214500.js.download"></script><script async="" src="./Socket Programming in Python (Guide) – Real Python_files/analytics.js.download"></script><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-35184939-1', 'auto', {'allowLinker': true});

  

  

  
  
  ga('set', {
    dimension1: false,
    dimension2: false
  });
  

  ga('send', 'pageview');
  
</script>
<script async="" src="./Socket Programming in Python (Guide) – Real Python_files/api.js.download"></script><script src="./Socket Programming in Python (Guide) – Real Python_files/OneSignalPageSDKES6.js.download" async=""></script><script src="./Socket Programming in Python (Guide) – Real Python_files/count-data.js.download"></script><style type="text/css">
  /* === Form-Specific Styles === */
  /* stylelint-disable */

  #drip-108599 {
    background: #fff !important;
  }

  #drip-108599 .drip-content h3 {
    color: #f9a82f !important;
    font-size: 28px !important;
  }

  #drip-108599 .drip-submit-button {
    background-color: #f9a82f !important;
    font-size: 19px !important;
  }

  #drip-108599 .drip-submit-button:hover {
    background-color: #eda02d !important;
  }

  #drip-108599 .drip-submit-button:active {
    background-color: #e0972a !important;
  }

  #drip-108599 .drip-submit-button:disabled {
    background-color: #fcd397 !important;
  }

  #drip-108599 dl dt,
  #drip-108599 .drip-content .drip-description,
  #drip-108599 .drip-errors {
    font-size: 16px !important;
  }

  #drip-108599 .drip-text-field,
  #drip-108599 .drip-radio-buttons,
  #drip-108599 .drip-dropdown-select {
    font-size: 16px !important;
  }

  /* === Reset styles === */

  .drip-lightbox h1,
  .drip-lightbox h2,
  .drip-lightbox h3,
  .drip-lightbox div,
  .drip-lightbox dl,
  .drip-lightbox dt,
  .drip-lightbox dd,
  .drip-lightbox p,
  .drip-lightbox a,
  .drip-lightbox .drip-text-field,
  .drip-lightbox .drip-radio-buttons,
  .drip-lightbox .drip-text-field:focus,
  .drip-lightbox .drip-submit-button {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
    float: none;
    width: auto;
    background-image: none;
    letter-spacing: 0;
    -webkit-box-shadow: none;
       -moz-box-shadow: none;
            box-shadow: none;
    -webkit-text-shadow: none !important;
       -moz-text-shadow: none !important;
            text-shadow: none !important;
  }

  .drip-lightbox a {
    text-decoration: none;
    color: #f9a82f !important;
  }

  .drip-lightbox :focus {
    outline: 0;
  }

  .drip-lightbox input::-webkit-input-placeholder { /* WebKit browsers */
    color: #A8ACB9 !important;
  }
  .drip-lightbox input:-moz-placeholder { /* Mozilla Firefox 4 to 18 */
    color: #A8ACB9 !important;
  }
  .drip-lightbox input::-moz-placeholder { /* Mozilla Firefox 19+ */
    color: #A8ACB9 !important;
  }
  .drip-lightbox input:-ms-input-placeholder { /* Internet Explorer 10+ */
    color: #A8ACB9 !important;
  }

  /* === Clearfix === */

  .drip-clearfix:after {
    visibility: hidden;
    display: block;
    font-size: 0;
    content: " ";
    clear: both;
    height: 0;
  }
  * html .drip-clearfix             { zoom: 1; } /* IE6 */
  *:first-child+html .drip-clearfix { zoom: 1; } /* IE7 */

  /* === Backdrop === */

  .drip-backdrop {
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: 10000;
    background-color: #000;
    opacity: 0;
    -webkit-transition: opacity .3s linear;
       -moz-transition: opacity .3s linear;
         -o-transition: opacity .3s linear;
            transition: opacity .3s linear;
  }

  .drip-backdrop.drip-in {
    opacity: 0.2;
  }

  .drip-backdrop.drip-hidden {
    display: none;
  }

  /* === Main Container === */

  .drip-lightbox-wrapper * {
    box-sizing: content-box;
  }

  /* === Content === */

  .drip-lightbox .drip-content {
    margin: 0 0 0 -190px;
    padding: 0;
    position: fixed;
    width: 380px;
    top: -25%;
    left: 50%;
    font-size: 100%;
    z-index: 11000;
    color: #333;
    vertical-align: baseline;
    background-color: #ffffff;
    opacity: 0;
    -webkit-border-radius: 8px;
       -moz-border-radius: 8px;
            border-radius: 8px;
    -webkit-box-shadow: 0px 10px 28px rgba(0,0,0,0.36);
       -moz-box-shadow: 0px 10px 28px rgba(0,0,0,0.36);
            box-shadow: 0px 10px 28px rgba(0,0,0,0.36);
    -webkit-transition: opacity .3s linear, top .3s ease-out, bottom 200ms ease-in;
       -moz-transition: opacity .3s linear, top .3s ease-out, bottom 200ms ease-in;;
         -o-transition: opacity .3s linear, top .3s ease-out, bottom 200ms ease-in;;
            transition: opacity .3s linear, top .3s ease-out, bottom 200ms ease-in;;
  }

  .drip-lightbox.drip-in .drip-content {
    top: 15%;
    opacity: 1;
  }

  .drip-lightbox.drip-hidden .drip-content {
    display: none;
  }

  .drip-lightbox.side-image .drip-content {
    margin-left: -325px;
    width: 650px;
  }

  .drip-lightbox.mobile .drip-content {
    margin: 0;
    width: 100%;
    left: 0;
    top: auto;
    -webkit-border-radius: 0;
       -moz-border-radius: 0;
            border-radius: 0;
  }

  .drip-lightbox.mobile.drip-in .drip-content {
    top: auto;
    bottom: 0;
  }

  .drip-lightbox.drip-scrollable .drip-content {
    overflow-y: scroll;
  }

  /* === Teaser === */

  .drip-lightbox .drip-header h2 {
    display: block;
    margin: 0 !important;
    padding: 12px 0 !important;
    font-size: 14px !important;
    line-height: 13px !important;
    font-weight: bold !important;
    color: #fff !important;
    letter-spacing: 0 !important;
  }

  /* === Panel === */

  .drip-lightbox .drip-content > div.drip-panel {
    padding: 25px;
    background-color: #fff;
    -webkit-border-radius: 6px;
       -moz-border-radius: 6px;
            border-radius: 6px;
  }

  /* === Content Sections === */

  .drip-lightbox.side-image .drip-form-aside {
    width: 245px;
    text-align: center;
  }

  .drip-lightbox.image-left .drip-form-main {
    margin-left: 270px;
  }

  .drip-lightbox.image-right .drip-form-main {
    margin-right: 270px;
  }

  .drip-lightbox.image-left .drip-form-aside {
    float: left;
  }

  .drip-lightbox.image-right .drip-form-aside {
    float: right;
  }

  @media screen and (max-width: 650px) {
    /* prevent overriding mobile class styles */
    .drip-lightbox.side-image:not(.mobile) .drip-content {
      margin-left: -190px;
      width: 380px;
    }

    .drip-lightbox.side-image .drip-form-main {
      margin-left: 0;
      margin-right: 0;
    }

    .drip-lightbox.side-image .drip-form-aside {
      display: none;
    }
  }

  /* === Content Headings & Paragraphs === */

  .drip-lightbox .drip-content h3 {
    display: block;
    margin: 0 20px 0 0 !important;
    padding: 0 0 15px 0 !important;
    line-height: 1.4 !important;
    font-weight: bold !important;
    text-align: left !important;
    color: #4477bd !important;
    clear: none !important;
  }

  .drip-lightbox .drip-content .drip-description {
    margin: 0;
    padding: 0 0 20px 0;
    line-height: 1.6;
    text-align: left;
  }

  .drip-lightbox .drip-content .drip-post-submission {
    padding: 0;
  }

  .drip-lightbox .drip-content .drip-description a {
    text-decoration: underline;
  }

  .drip-lightbox .drip-content .drip-description em {
    font-style: italic;
  }

  .drip-lightbox .drip-content .drip-description ul,
  .drip-lightbox .drip-content .drip-description ol {
    list-style-position: outside;
    margin: 8px 0 8px 30px;
  }

  .drip-lightbox .drip-content .drip-description ul li
  .drip-lightbox .drip-content .drip-description ol li {
    padding: 0;
  }

  .drip-lightbox .drip-content img.drip-image {
    margin-bottom: 20px;
  }

  .drip-lightbox .drip-content .drip-image-center-helper {
    display: inline-block;
    height: 100%;
    vertical-align: middle;
  }

  .drip-lightbox .drip-content img.drip-image {
    max-width: 245px;
    vertical-align: middle;
  }

  .drip-lightbox .drip-content a.drip-close {
    position: absolute;
    right: 25px;
    top: 25px;
  }

  .drip-lightbox .drip-content a.drip-close:hover {
    cursor: pointer;
  }

  /* === Content Subscribe Form === */

  .drip-lightbox form {
    margin: 0 !important;
    padding: 0 !important;
  }

  .drip-lightbox dl {
    display: block;
    margin: 0;
    padding: 0 0 5px 0;
  }

  .drip-lightbox dl dt {
    display: block;
    padding: 0 0 5px 0;
    /* font-size: 13px; */
    font-weight: bold;
  }

  .drip-lightbox dl.no-labels dt.label-for-type-text,
  .drip-lightbox dl.no-labels dt.label-for-type-dropdown,
  .drip-lightbox dl.no-labels dt.label-for-type-email {
    display: none;
  }

  .drip-lightbox dl dd {
    display: block;
    padding: 0 0 8px 0;
  }

  .drip-lightbox .drip-text-field {
    margin: 0 !important;
    height: 40px !important;
    width: 100% !important;
    color: #4F5362 !important;
    background-color: #fff !important;
    border: 1px solid #A8ACB9 !important;
    -webkit-border-radius: 3px !important;
       -moz-border-radius: 3px !important;
            border-radius: 3px !important;
    -webkit-box-sizing: border-box !important;
       -moz-box-sizing: border-box !important;
        -ms-box-sizing: border-box !important;
            box-sizing: border-box !important;
    background-image: none !important;
    min-width: 0 !important;
    min-height: 0 !important;
  }

  .drip-lightbox .drip-text-field,
  .drip-lightbox .drip-dropdown-select select {
    padding: 10px 12px !important;
  }

  .drip-lightbox .drip-text-field:focus {
    border-color: #9398a9 !important;
    outline: 0;
    background-image: none;
    background-color: #fff !important;
  }

  .drip-lightbox.mobile .drip-text-field {
    font-size: 16px;
  }

  .drip-lightbox .drip-errors:not(:empty) {
    padding: 5px 0 0 0;
    font-weight: normal;
    color: red;
  }

  .drip-lightbox .drip-submit-button {
    padding: 6px 26px !important;
    color: #ffffff !important;
    font-weight: bold !important;
    line-height: 1.6 !important;
    border: 0 !important;
    -webkit-border-radius: 3px !important;
       -moz-border-radius: 3px !important;
            border-radius: 3px !important;
    cursor: pointer !important;
    background-image: none !important;
    min-width: 0 !important;
    min-height: 0 !important;
    height: auto;
    transition: background 0.2s ease !important;
    -webkit-box-shadow: 0px 2px 4px rgba(0,0,0,0.20);
       -moz-box-shadow: 0px 2px 4px rgba(0,0,0,0.20);
            box-shadow: 0px 2px 4px rgba(0,0,0,0.20);
  }

  .drip-lightbox .drip-submit-button:hover {
    background-image: none !important;
  }

  .drip-lightbox .drip-submit-button:active {
    background-image: none !important;
  }

  /* RADIOS */

  .drip-lightbox .drip-radio-buttons,
  .drip-lightbox .drip-radio-buttons * {
    box-sizing: border-box;
  }
  .drip-lightbox .drip-radio-buttons h4 {
    font-family: inherit;
    font-weight: bold;
    font-size: 19px;
    margin: 0 0 3px;
    padding: 0;
  }

  .drip-lightbox .drip-radio-button {
    width: 100%;
    display: block;
    position: relative;
    margin-bottom: 6px;
  }

  .drip-lightbox .drip-radio-button input[type="radio"] {
    height: 0;
    width: 0;
    opacity: 0;
    position: absolute;
    top: 0;
    left: 0;
    display: inline-block;
    border: none;
    padding: 0;
    margin: 0;
  }

  .drip-lightbox .drip-radio-button label {
    font-size: 19px;
    padding-left: 30px;
    color: #262626;
    white-space: normal;
    word-break: normal;
    cursor: pointer;
  }

  .drip-lightbox .drip-radio-button label:before {
    content: "";
    display: block;
    background: #f5f5f5;
    width: 18px;
    height: 18px;
    position: absolute;
    top: 50%;
    left: 0;
    transform: translateY(-50%);
    border-radius: 9px;
    border: 1px solid #cccccc;
    box-sizing: border-box;
    padding: 1px;
    transition: background 300ms ease-out, border-color 300ms, border-width 300ms ease-in;
  }
  .drip-lightbox .drip-radio-button label:hover:before {
    border-color: #f9a82f;
  }

  .drip-lightbox .drip-radio-button input[type="radio"]:checked ~ label:before {
    background-color: #ffffff;
    border: 5px solid #f9a82f;
  }

  /* DROPDOWNS */

  /* stylelint-disable */

.drip-lightbox .drip-dropdown-select h4 {
  font-family: inherit;
  font-weight: bold;
  font-size: 19px;
  margin: 0 0 3px;
  padding: 0;
}

.drip-lightbox .drip-dropdown-select select {
  display: block;
  box-shadow: none;
  position: relative;
  border: 1px solid #A8ACB9;
  outline: none;
  border-radius: 3px;
  line-height: inherit;
  font-family: inherit;
  color: #262626;
  transition: border-color 300ms;
  width: 100%;
  max-width: 100%; /* useful when width is set to anything other than 100% */
  box-sizing: border-box;

  -moz-appearance: none;
  -webkit-appearance: none;
  appearance: none;
  background-color: #fff;
  /* note: bg image below uses 2 urls. The first is an svg data uri for the arrow
    icon, and the second is the gradient. for the icon, if you want to change the
    color, be sure to use `%23` instead of `#`, since it's a url. You can also
    swap in a different svg icon or an external image reference
  */
  background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23262626%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E'),
    linear-gradient(to bottom, #ffffff 0%, #ffffff 100%);
  background-repeat: no-repeat, repeat;
  /* arrow icon position (1em from the right, 50% vertical) , then gradient position*/
  background-position: right 12px top 50%, 0 0;
  /* icon size, then gradient */
  background-size: 12px auto, 100%;
}

/* Hide arrow icon in IE browsers */
.drip-lightbox .drip-dropdown-select select::-ms-expand {
  display: none;
}

/* Hover style */
.drip-lightbox .drip-dropdown-select select:hover {
  border-color: #888;
}

/* Focus style */
.drip-lightbox .drip-dropdown-select select:focus {
  border-color: #A8ACB9;
  /* It'd be nice to use -webkit-focus-ring-color here but it doesn't work on box-shadow */
  /* box-shadow: 0 0 1px 3px rgba(59, 153, 252, .7);
  box-shadow: 0 0 0 3px -moz-mac-focusring;
  color: #222; */
  outline: none;
}

/* Set options to normal weight */
.drip-lightbox .drip-dropdown-select select option {
  font-weight:normal;
}

/* Support for rtl text, explicit support for Arabic and Hebrew */
*[dir="rtl"] .drip-lightbox .drip-dropdown-select select,
:root:lang(ar) .drip-lightbox .drip-dropdown-select select,
:root:lang(iw) .drip-lightbox .drip-dropdown-select select {
  background-position: left 12px top 50%, 0 0;
  padding: .6em .8em .5em 1.4em;
}

/* Disabled styles */
.drip-lightbox .drip-dropdown-select select:disabled,
.drip-lightbox .drip-dropdown-select select[aria-disabled=true] {
  color: graytext;
  background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22graytext%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E'),
    linear-gradient(to bottom, #ffffff 0%,#e5e5e5 100%);
}
.drip-lightbox .drip-dropdown-select select:disabled:hover,
.drip-lightbox .drip-dropdown-select select[aria-disabled=true] {
  border-color: #aaa;
}

/* stylelint-enable */


  /* checkbox */

  .drip-lightbox input,
  .drip-lightbox textarea {
    box-sizing: border-box;
    display: block;
    box-shadow: none;
    position: relative;
    border: 1px solid #cccccc;
    outline: none;
    border-radius: 3px;
    font: inherit;
    color: #262626;
    padding: 12px 18px;
    transition: border-color 300ms;
    width: 100%;
    -moz-appearance: none;
    -webkit-appearance: none;
    appearance: none;
  }

  .drip-lightbox .zenput--checkbox.hidden {
    margin-bottom: -8px;
    display: none;
  }

  .drip-lightbox .zenput--checkbox input[type="checkbox"] {
    height: 0;
    width: 0;
    opacity: 0;
    position: absolute;
    top: 0;
    left: 0;
  }

  .drip-lightbox .zenput--checkbox input[type="checkbox"] ~ .zenput__checkbox-label {
    font: inherit;
    font-size: 16px;
    line-height: 30px;
    color: #262626;
    cursor: pointer;
    white-space: normal;
    word-break: break-word;
    display: block;
    padding-left: 36px;
    position: relative;
    transition: color 300ms
  }

  .drip-lightbox .zenput--checkbox input[type="checkbox"] ~ .zenput__checkbox-label .zenput__checkbox-label__icon {
    content: "";
    display: block;
    background: #f5f5f5;
    width: 24px;
    height: 24px;
    position: absolute;
    top: 3px;
    left: 0;
    border-radius: 3px;
    border: 1px solid #cccccc;
    box-sizing: border-box;
    padding: 3px;
    transition: background 300ms ease-out, border-color 300ms;
  }

  .drip-lightbox .zenput--checkbox input[type="checkbox"] ~ .zenput__checkbox-label .zenput__checkbox-label__icon svg {
    opacity: 0;
    width: 16px;
    display: block;
    fill: #cccccc;
    transition: opacity 300ms ease-out;
  }

  .drip-lightbox .zenput--checkbox .zenput__checkbox-label .zenput__checkbox-label__icon .octicon-dash {
    display: none;
  }

  .drip-lightbox .zenput--checkbox input[type="checkbox"]:checked ~ .zenput__checkbox-label {
    color: #333 !important;
  }
  .drip-lightbox .zenput--checkbox input[type="checkbox"]:checked ~ .zenput__checkbox-label .zenput__checkbox-label__icon {
    background-color: #ffffff;
    border-color: #a8acb9;
  }
  .drip-lightbox .zenput--checkbox input[type="checkbox"]:checked ~ .zenput__checkbox-label .zenput__checkbox-label__icon svg {
    fill: #f9a82f !important;
    opacity: 1;
  }

  /* telephone input */
  /* stylelint-disable */

.drip-lightbox .iti + .zenput--checkbox {
  margin-top: 10px;
}

.drip-lightbox .iti {
  position: relative;
  display: block;
}

.drip-lightbox .iti * {
  box-sizing: border-box;
  -moz-box-sizing: border-box;
}

.drip-lightbox .iti__hide {
  display: none;
}

.drip-lightbox .iti__v-hide {
  visibility: hidden;
}

.drip-lightbox .iti input,
.drip-lightbox .iti input[type=text],
.drip-lightbox .iti input[type=tel] {
  position: relative;
  z-index: 0;
  width: 100%;
  padding: 0 0 0 36px;
  margin: 0 !important;
}

  .drip-lightbox .iti input,
  .drip-lightbox .iti input[type=text],
  .drip-lightbox .iti input[type=tel] {
    height: 42px;
    border: 1px solid #A8ACB9 !important;
    border-radius: 3px !important;
  }

.drip-lightbox .iti__flag-container {
  position: absolute;
  top: 0;
  bottom: 0;
  right: 0;
  padding: 1px;
}

.drip-lightbox .iti__selected-flag {
  z-index: 1;
  position: relative;
  display: flex;
  align-items: center;
  height: 100%;
  padding: 0 6px 0 8px;
}

.drip-lightbox .iti__arrow {
  margin-left: 6px;
  width: 0;
  height: 0;
  border-left: 3px solid transparent;
  border-right: 3px solid transparent;
  border-top: 4px solid #555;
}

.drip-lightbox .iti__arrow--up {
  border-top: none;
  border-bottom: 4px solid #555;
}

.drip-lightbox .iti__country-list {
  position: absolute;
  z-index: 2;
  list-style: none;
  text-align: left;
  padding: 0;
  margin: 0 0 0 -1px;
  box-shadow: 1px 1px 4px rgba(0, 0, 0, 0.2);
  background-color: white;
  border: 1px solid #CCC;
  white-space: nowrap;
  max-height: 200px;
  width: 320px;
  overflow-y: scroll;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
}

.drip-lightbox .iti__country-list--dropup {
  bottom: 100%;
  margin-bottom: -1px;
}

@media (max-width: 500px) {
  .drip-lightbox .iti__country-list {
    white-space: normal;
  }
}

.drip-lightbox .iti__flag-box {
  display: inline-block;
  width: 20px;
}

.drip-lightbox .iti__divider {
  padding-bottom: 5px;
  margin-bottom: 5px;
  border-bottom: 1px solid #CCC;
}

.drip-lightbox .iti__country {
  padding: 5px 10px;
  outline: none;
}

.drip-lightbox .iti__dial-code {
  color: #999;
}

.drip-lightbox .iti__country.iti__highlight {
  background-color: rgba(0, 0, 0, 0.05);
}

.drip-lightbox .iti__flag-box,
.drip-lightbox .iti__country-name,
.drip-lightbox .iti__dial-code {
  vertical-align: middle;
}

.drip-lightbox .iti__flag-box,
.drip-lightbox .iti__country-name {
  margin-right: 6px;
}

.drip-lightbox .iti--allow-dropdown input,
.drip-lightbox .iti--allow-dropdown input[type=text],
.drip-lightbox .iti--allow-dropdown input[type=tel],
.drip-lightbox .iti--separate-dial-code input,
.drip-lightbox .iti--separate-dial-code input[type=text],
.drip-lightbox .iti--separate-dial-code input[type=tel] {
  padding-right: 6px;
  padding-left: 52px;
  margin-left: 0;
}

.drip-lightbox .iti--allow-dropdown .iti__flag-container,
.drip-lightbox .iti--separate-dial-code .iti__flag-container {
  right: auto;
  left: 0;
}

.drip-lightbox .iti--allow-dropdown .iti__flag-container:hover {
  cursor: pointer;
}

.drip-lightbox .iti--allow-dropdown .iti__flag-container:hover .iti__selected-flag {
  background-color: rgba(0, 0, 0, 0.05);
}

.drip-lightbox .iti--allow-dropdown input[disabled]+.iti__flag-container:hover,
.drip-lightbox .iti--allow-dropdown input[readonly]+.iti__flag-container:hover {
  cursor: default;
}

.drip-lightbox .iti--allow-dropdown input[disabled]+.iti__flag-container:hover .iti__selected-flag,
.drip-lightbox .iti--allow-dropdown input[readonly]+.iti__flag-container:hover .iti__selected-flag {
  background-color: transparent;
}

.drip-lightbox .iti--separate-dial-code .iti__selected-flag {
  background-color: rgba(0, 0, 0, 0.05);
}

.drip-lightbox .iti--separate-dial-code .iti__selected-dial-code {
  margin-left: 6px;
}

.drip-lightbox .iti--container {
  position: absolute;
  top: -1000px;
  left: -1000px;
  z-index: 1060;
  padding: 1px;
}

.drip-lightbox .iti--container:hover {
  cursor: pointer;
}

.iti-mobile .drip-lightbox  .iti--container {
  top: 30px;
  bottom: 30px;
  left: 30px;
  right: 30px;
  position: fixed;
}

.iti-mobile .drip-lightbox .iti__country-list {
  max-height: 100%;
  width: 100%;
}

.iti-mobile .drip-lightbox .iti__country {
  padding: 10px 10px;
  line-height: 1.5em;
}

.drip-lightbox .sms-subtext {
  margin-top: .75em;
  font-size: .75em;
  line-height: 1.4;
  display: inline-block;
}

.drip-lightbox .sms-subtext a {
  text-decoration: underline;
  cursor: pointer;
}

.drip-lightbox .iti__flag {
  width: 20px;
}

.drip-lightbox .iti__flag.iti__be {
  width: 18px;
}

.drip-lightbox .iti__flag.iti__ch {
  width: 15px;
}

.drip-lightbox .iti__flag.iti__mc {
  width: 19px;
}

.drip-lightbox .iti__flag.iti__ne {
  width: 18px;
}

.drip-lightbox .iti__flag.iti__np {
  width: 13px;
}

.drip-lightbox .iti__flag.iti__va {
  width: 15px;
}

@media (-webkit-min-device-pixel-ratio: 2),
(min-resolution: 192dpi) {
  .drip-lightbox .iti__flag {
    background-size: 5652px 15px;
  }
}

.drip-lightbox .iti__flag.iti__ac {
    height: 10px;
    background-position: 0px 0px;
  }

.drip-lightbox .iti__flag.iti__ad {
    height: 14px;
    background-position: -22px 0px;
  }

.drip-lightbox .iti__flag.iti__ae {
    height: 10px;
    background-position: -44px 0px;
  }

.drip-lightbox .iti__flag.iti__af {
    height: 14px;
    background-position: -66px 0px;
  }

.drip-lightbox .iti__flag.iti__ag {
    height: 14px;
    background-position: -88px 0px;
  }

.drip-lightbox .iti__flag.iti__ai {
    height: 10px;
    background-position: -110px 0px;
  }

.drip-lightbox .iti__flag.iti__al {
    height: 15px;
    background-position: -132px 0px;
  }

.drip-lightbox .iti__flag.iti__am {
    height: 10px;
    background-position: -154px 0px;
  }

.drip-lightbox .iti__flag.iti__ao {
    height: 14px;
    background-position: -176px 0px;
  }

.drip-lightbox .iti__flag.iti__aq {
    height: 14px;
    background-position: -198px 0px;
  }

.drip-lightbox .iti__flag.iti__ar {
    height: 13px;
    background-position: -220px 0px;
  }

.drip-lightbox .iti__flag.iti__as {
    height: 10px;
    background-position: -242px 0px;
  }

.drip-lightbox .iti__flag.iti__at {
    height: 14px;
    background-position: -264px 0px;
  }

.drip-lightbox .iti__flag.iti__au {
    height: 10px;
    background-position: -286px 0px;
  }

.drip-lightbox .iti__flag.iti__aw {
    height: 14px;
    background-position: -308px 0px;
  }

.drip-lightbox .iti__flag.iti__ax {
    height: 13px;
    background-position: -330px 0px;
  }

.drip-lightbox .iti__flag.iti__az {
    height: 10px;
    background-position: -352px 0px;
  }

.drip-lightbox .iti__flag.iti__ba {
    height: 10px;
    background-position: -374px 0px;
  }

.drip-lightbox .iti__flag.iti__bb {
    height: 14px;
    background-position: -396px 0px;
  }

.drip-lightbox .iti__flag.iti__bd {
    height: 12px;
    background-position: -418px 0px;
  }

.drip-lightbox .iti__flag.iti__be {
    height: 15px;
    background-position: -440px 0px;
  }

.drip-lightbox .iti__flag.iti__bf {
    height: 14px;
    background-position: -460px 0px;
  }

.drip-lightbox .iti__flag.iti__bg {
    height: 12px;
    background-position: -482px 0px;
  }

.drip-lightbox .iti__flag.iti__bh {
    height: 12px;
    background-position: -504px 0px;
  }

.drip-lightbox .iti__flag.iti__bi {
    height: 12px;
    background-position: -526px 0px;
  }

.drip-lightbox .iti__flag.iti__bj {
    height: 14px;
    background-position: -548px 0px;
  }

.drip-lightbox .iti__flag.iti__bl {
    height: 14px;
    background-position: -570px 0px;
  }

.drip-lightbox .iti__flag.iti__bm {
    height: 10px;
    background-position: -592px 0px;
  }

.drip-lightbox .iti__flag.iti__bn {
    height: 10px;
    background-position: -614px 0px;
  }

.drip-lightbox .iti__flag.iti__bo {
    height: 14px;
    background-position: -636px 0px;
  }

.drip-lightbox .iti__flag.iti__bq {
    height: 14px;
    background-position: -658px 0px;
  }

.drip-lightbox .iti__flag.iti__br {
    height: 14px;
    background-position: -680px 0px;
  }

.drip-lightbox .iti__flag.iti__bs {
    height: 10px;
    background-position: -702px 0px;
  }

.drip-lightbox .iti__flag.iti__bt {
    height: 14px;
    background-position: -724px 0px;
  }

.drip-lightbox .iti__flag.iti__bv {
    height: 15px;
    background-position: -746px 0px;
  }

.drip-lightbox .iti__flag.iti__bw {
    height: 14px;
    background-position: -768px 0px;
  }

.drip-lightbox .iti__flag.iti__by {
    height: 10px;
    background-position: -790px 0px;
  }

.drip-lightbox .iti__flag.iti__bz {
    height: 14px;
    background-position: -812px 0px;
  }

.drip-lightbox .iti__flag.iti__ca {
    height: 10px;
    background-position: -834px 0px;
  }

.drip-lightbox .iti__flag.iti__cc {
    height: 10px;
    background-position: -856px 0px;
  }

.drip-lightbox .iti__flag.iti__cd {
    height: 15px;
    background-position: -878px 0px;
  }

.drip-lightbox .iti__flag.iti__cf {
    height: 14px;
    background-position: -900px 0px;
  }

.drip-lightbox .iti__flag.iti__cg {
    height: 14px;
    background-position: -922px 0px;
  }

.drip-lightbox .iti__flag.iti__ch {
    height: 15px;
    background-position: -944px 0px;
  }

.drip-lightbox .iti__flag.iti__ci {
    height: 14px;
    background-position: -961px 0px;
  }

.drip-lightbox .iti__flag.iti__ck {
    height: 10px;
    background-position: -983px 0px;
  }

.drip-lightbox .iti__flag.iti__cl {
    height: 14px;
    background-position: -1005px 0px;
  }

.drip-lightbox .iti__flag.iti__cm {
    height: 14px;
    background-position: -1027px 0px;
  }

.drip-lightbox .iti__flag.iti__cn {
    height: 14px;
    background-position: -1049px 0px;
  }

.drip-lightbox .iti__flag.iti__co {
    height: 14px;
    background-position: -1071px 0px;
  }

.drip-lightbox .iti__flag.iti__cp {
    height: 14px;
    background-position: -1093px 0px;
  }

.drip-lightbox .iti__flag.iti__cr {
    height: 12px;
    background-position: -1115px 0px;
  }

.drip-lightbox .iti__flag.iti__cu {
    height: 10px;
    background-position: -1137px 0px;
  }

.drip-lightbox .iti__flag.iti__cv {
    height: 12px;
    background-position: -1159px 0px;
  }

.drip-lightbox .iti__flag.iti__cw {
    height: 14px;
    background-position: -1181px 0px;
  }

.drip-lightbox .iti__flag.iti__cx {
    height: 10px;
    background-position: -1203px 0px;
  }

.drip-lightbox .iti__flag.iti__cy {
    height: 14px;
    background-position: -1225px 0px;
  }

.drip-lightbox .iti__flag.iti__cz {
    height: 14px;
    background-position: -1247px 0px;
  }

.drip-lightbox .iti__flag.iti__de {
    height: 12px;
    background-position: -1269px 0px;
  }

.drip-lightbox .iti__flag.iti__dg {
    height: 10px;
    background-position: -1291px 0px;
  }

.drip-lightbox .iti__flag.iti__dj {
    height: 14px;
    background-position: -1313px 0px;
  }

.drip-lightbox .iti__flag.iti__dk {
    height: 15px;
    background-position: -1335px 0px;
  }

.drip-lightbox .iti__flag.iti__dm {
    height: 10px;
    background-position: -1357px 0px;
  }

.drip-lightbox .iti__flag.iti__do {
    height: 14px;
    background-position: -1379px 0px;
  }

.drip-lightbox .iti__flag.iti__dz {
    height: 14px;
    background-position: -1401px 0px;
  }

.drip-lightbox .iti__flag.iti__ea {
    height: 14px;
    background-position: -1423px 0px;
  }

.drip-lightbox .iti__flag.iti__ec {
    height: 14px;
    background-position: -1445px 0px;
  }

.drip-lightbox .iti__flag.iti__ee {
    height: 13px;
    background-position: -1467px 0px;
  }

.drip-lightbox .iti__flag.iti__eg {
    height: 14px;
    background-position: -1489px 0px;
  }

.drip-lightbox .iti__flag.iti__eh {
    height: 10px;
    background-position: -1511px 0px;
  }

.drip-lightbox .iti__flag.iti__er {
    height: 10px;
    background-position: -1533px 0px;
  }

.drip-lightbox .iti__flag.iti__es {
    height: 14px;
    background-position: -1555px 0px;
  }

.drip-lightbox .iti__flag.iti__et {
    height: 10px;
    background-position: -1577px 0px;
  }

.drip-lightbox .iti__flag.iti__eu {
    height: 14px;
    background-position: -1599px 0px;
  }

.drip-lightbox .iti__flag.iti__fi {
    height: 12px;
    background-position: -1621px 0px;
  }

.drip-lightbox .iti__flag.iti__fj {
    height: 10px;
    background-position: -1643px 0px;
  }

.drip-lightbox .iti__flag.iti__fk {
    height: 10px;
    background-position: -1665px 0px;
  }

.drip-lightbox .iti__flag.iti__fm {
    height: 11px;
    background-position: -1687px 0px;
  }

.drip-lightbox .iti__flag.iti__fo {
    height: 15px;
    background-position: -1709px 0px;
  }

.drip-lightbox .iti__flag.iti__fr {
    height: 14px;
    background-position: -1731px 0px;
  }

.drip-lightbox .iti__flag.iti__ga {
    height: 15px;
    background-position: -1753px 0px;
  }

.drip-lightbox .iti__flag.iti__gb {
    height: 10px;
    background-position: -1775px 0px;
  }

.drip-lightbox .iti__flag.iti__gd {
    height: 12px;
    background-position: -1797px 0px;
  }

.drip-lightbox .iti__flag.iti__ge {
    height: 14px;
    background-position: -1819px 0px;
  }

.drip-lightbox .iti__flag.iti__gf {
    height: 14px;
    background-position: -1841px 0px;
  }

.drip-lightbox .iti__flag.iti__gg {
    height: 14px;
    background-position: -1863px 0px;
  }

.drip-lightbox .iti__flag.iti__gh {
    height: 14px;
    background-position: -1885px 0px;
  }

.drip-lightbox .iti__flag.iti__gi {
    height: 10px;
    background-position: -1907px 0px;
  }

.drip-lightbox .iti__flag.iti__gl {
    height: 14px;
    background-position: -1929px 0px;
  }

.drip-lightbox .iti__flag.iti__gm {
    height: 14px;
    background-position: -1951px 0px;
  }

.drip-lightbox .iti__flag.iti__gn {
    height: 14px;
    background-position: -1973px 0px;
  }

.drip-lightbox .iti__flag.iti__gp {
    height: 14px;
    background-position: -1995px 0px;
  }

.drip-lightbox .iti__flag.iti__gq {
    height: 14px;
    background-position: -2017px 0px;
  }

.drip-lightbox .iti__flag.iti__gr {
    height: 14px;
    background-position: -2039px 0px;
  }

.drip-lightbox .iti__flag.iti__gs {
    height: 10px;
    background-position: -2061px 0px;
  }

.drip-lightbox .iti__flag.iti__gt {
    height: 13px;
    background-position: -2083px 0px;
  }

.drip-lightbox .iti__flag.iti__gu {
    height: 11px;
    background-position: -2105px 0px;
  }

.drip-lightbox .iti__flag.iti__gw {
    height: 10px;
    background-position: -2127px 0px;
  }

.drip-lightbox .iti__flag.iti__gy {
    height: 12px;
    background-position: -2149px 0px;
  }

.drip-lightbox .iti__flag.iti__hk {
    height: 14px;
    background-position: -2171px 0px;
  }

.drip-lightbox .iti__flag.iti__hm {
    height: 10px;
    background-position: -2193px 0px;
  }

.drip-lightbox .iti__flag.iti__hn {
    height: 10px;
    background-position: -2215px 0px;
  }

.drip-lightbox .iti__flag.iti__hr {
    height: 10px;
    background-position: -2237px 0px;
  }

.drip-lightbox .iti__flag.iti__ht {
    height: 12px;
    background-position: -2259px 0px;
  }

.drip-lightbox .iti__flag.iti__hu {
    height: 10px;
    background-position: -2281px 0px;
  }

.drip-lightbox .iti__flag.iti__ic {
    height: 14px;
    background-position: -2303px 0px;
  }

.drip-lightbox .iti__flag.iti__id {
    height: 14px;
    background-position: -2325px 0px;
  }

.drip-lightbox .iti__flag.iti__ie {
    height: 10px;
    background-position: -2347px 0px;
  }

.drip-lightbox .iti__flag.iti__il {
    height: 15px;
    background-position: -2369px 0px;
  }

.drip-lightbox .iti__flag.iti__im {
    height: 10px;
    background-position: -2391px 0px;
  }

.drip-lightbox .iti__flag.iti__in {
    height: 14px;
    background-position: -2413px 0px;
  }

.drip-lightbox .iti__flag.iti__io {
    height: 10px;
    background-position: -2435px 0px;
  }

.drip-lightbox .iti__flag.iti__iq {
    height: 14px;
    background-position: -2457px 0px;
  }

.drip-lightbox .iti__flag.iti__ir {
    height: 12px;
    background-position: -2479px 0px;
  }

.drip-lightbox .iti__flag.iti__is {
    height: 15px;
    background-position: -2501px 0px;
  }

.drip-lightbox .iti__flag.iti__it {
    height: 14px;
    background-position: -2523px 0px;
  }

.drip-lightbox .iti__flag.iti__je {
    height: 12px;
    background-position: -2545px 0px;
  }

.drip-lightbox .iti__flag.iti__jm {
    height: 10px;
    background-position: -2567px 0px;
  }

.drip-lightbox .iti__flag.iti__jo {
    height: 10px;
    background-position: -2589px 0px;
  }

.drip-lightbox .iti__flag.iti__jp {
    height: 14px;
    background-position: -2611px 0px;
  }

.drip-lightbox .iti__flag.iti__ke {
    height: 14px;
    background-position: -2633px 0px;
  }

.drip-lightbox .iti__flag.iti__kg {
    height: 12px;
    background-position: -2655px 0px;
  }

.drip-lightbox .iti__flag.iti__kh {
    height: 13px;
    background-position: -2677px 0px;
  }

.drip-lightbox .iti__flag.iti__ki {
    height: 10px;
    background-position: -2699px 0px;
  }

.drip-lightbox .iti__flag.iti__km {
    height: 12px;
    background-position: -2721px 0px;
  }

.drip-lightbox .iti__flag.iti__kn {
    height: 14px;
    background-position: -2743px 0px;
  }

.drip-lightbox .iti__flag.iti__kp {
    height: 10px;
    background-position: -2765px 0px;
  }

.drip-lightbox .iti__flag.iti__kr {
    height: 14px;
    background-position: -2787px 0px;
  }

.drip-lightbox .iti__flag.iti__kw {
    height: 10px;
    background-position: -2809px 0px;
  }

.drip-lightbox .iti__flag.iti__ky {
    height: 10px;
    background-position: -2831px 0px;
  }

.drip-lightbox .iti__flag.iti__kz {
    height: 10px;
    background-position: -2853px 0px;
  }

.drip-lightbox .iti__flag.iti__la {
    height: 14px;
    background-position: -2875px 0px;
  }

.drip-lightbox .iti__flag.iti__lb {
    height: 14px;
    background-position: -2897px 0px;
  }

.drip-lightbox .iti__flag.iti__lc {
    height: 10px;
    background-position: -2919px 0px;
  }

.drip-lightbox .iti__flag.iti__li {
    height: 12px;
    background-position: -2941px 0px;
  }

.drip-lightbox .iti__flag.iti__lk {
    height: 10px;
    background-position: -2963px 0px;
  }

.drip-lightbox .iti__flag.iti__lr {
    height: 11px;
    background-position: -2985px 0px;
  }

.drip-lightbox .iti__flag.iti__ls {
    height: 14px;
    background-position: -3007px 0px;
  }

.drip-lightbox .iti__flag.iti__lt {
    height: 12px;
    background-position: -3029px 0px;
  }

.drip-lightbox .iti__flag.iti__lu {
    height: 12px;
    background-position: -3051px 0px;
  }

.drip-lightbox .iti__flag.iti__lv {
    height: 10px;
    background-position: -3073px 0px;
  }

.drip-lightbox .iti__flag.iti__ly {
    height: 10px;
    background-position: -3095px 0px;
  }

.drip-lightbox .iti__flag.iti__ma {
    height: 14px;
    background-position: -3117px 0px;
  }

.drip-lightbox .iti__flag.iti__mc {
    height: 15px;
    background-position: -3139px 0px;
  }

.drip-lightbox .iti__flag.iti__md {
    height: 10px;
    background-position: -3160px 0px;
  }

.drip-lightbox .iti__flag.iti__me {
    height: 10px;
    background-position: -3182px 0px;
  }

.drip-lightbox .iti__flag.iti__mf {
    height: 14px;
    background-position: -3204px 0px;
  }

.drip-lightbox .iti__flag.iti__mg {
    height: 14px;
    background-position: -3226px 0px;
  }

.drip-lightbox .iti__flag.iti__mh {
    height: 11px;
    background-position: -3248px 0px;
  }

.drip-lightbox .iti__flag.iti__mk {
    height: 10px;
    background-position: -3270px 0px;
  }

.drip-lightbox .iti__flag.iti__ml {
    height: 14px;
    background-position: -3292px 0px;
  }

.drip-lightbox .iti__flag.iti__mm {
    height: 14px;
    background-position: -3314px 0px;
  }

.drip-lightbox .iti__flag.iti__mn {
    height: 10px;
    background-position: -3336px 0px;
  }

.drip-lightbox .iti__flag.iti__mo {
    height: 14px;
    background-position: -3358px 0px;
  }

.drip-lightbox .iti__flag.iti__mp {
    height: 10px;
    background-position: -3380px 0px;
  }

.drip-lightbox .iti__flag.iti__mq {
    height: 14px;
    background-position: -3402px 0px;
  }

.drip-lightbox .iti__flag.iti__mr {
    height: 14px;
    background-position: -3424px 0px;
  }

.drip-lightbox .iti__flag.iti__ms {
    height: 10px;
    background-position: -3446px 0px;
  }

.drip-lightbox .iti__flag.iti__mt {
    height: 14px;
    background-position: -3468px 0px;
  }

.drip-lightbox .iti__flag.iti__mu {
    height: 14px;
    background-position: -3490px 0px;
  }

.drip-lightbox .iti__flag.iti__mv {
    height: 14px;
    background-position: -3512px 0px;
  }

.drip-lightbox .iti__flag.iti__mw {
    height: 14px;
    background-position: -3534px 0px;
  }

.drip-lightbox .iti__flag.iti__mx {
    height: 12px;
    background-position: -3556px 0px;
  }

.drip-lightbox .iti__flag.iti__my {
    height: 10px;
    background-position: -3578px 0px;
  }

.drip-lightbox .iti__flag.iti__mz {
    height: 14px;
    background-position: -3600px 0px;
  }

.drip-lightbox .iti__flag.iti__na {
    height: 14px;
    background-position: -3622px 0px;
  }

.drip-lightbox .iti__flag.iti__nc {
    height: 10px;
    background-position: -3644px 0px;
  }

.drip-lightbox .iti__flag.iti__ne {
    height: 15px;
    background-position: -3666px 0px;
  }

.drip-lightbox .iti__flag.iti__nf {
    height: 10px;
    background-position: -3686px 0px;
  }

.drip-lightbox .iti__flag.iti__ng {
    height: 10px;
    background-position: -3708px 0px;
  }

.drip-lightbox .iti__flag.iti__ni {
    height: 12px;
    background-position: -3730px 0px;
  }

.drip-lightbox .iti__flag.iti__nl {
    height: 14px;
    background-position: -3752px 0px;
  }

.drip-lightbox .iti__flag.iti__no {
    height: 15px;
    background-position: -3774px 0px;
  }

.drip-lightbox .iti__flag.iti__np {
    height: 15px;
    background-position: -3796px 0px;
  }

.drip-lightbox .iti__flag.iti__nr {
    height: 10px;
    background-position: -3811px 0px;
  }

.drip-lightbox .iti__flag.iti__nu {
    height: 10px;
    background-position: -3833px 0px;
  }

.drip-lightbox .iti__flag.iti__nz {
    height: 10px;
    background-position: -3855px 0px;
  }

.drip-lightbox .iti__flag.iti__om {
    height: 10px;
    background-position: -3877px 0px;
  }

.drip-lightbox .iti__flag.iti__pa {
    height: 14px;
    background-position: -3899px 0px;
  }

.drip-lightbox .iti__flag.iti__pe {
    height: 14px;
    background-position: -3921px 0px;
  }

.drip-lightbox .iti__flag.iti__pf {
    height: 14px;
    background-position: -3943px 0px;
  }

.drip-lightbox .iti__flag.iti__pg {
    height: 15px;
    background-position: -3965px 0px;
  }

.drip-lightbox .iti__flag.iti__ph {
    height: 10px;
    background-position: -3987px 0px;
  }

.drip-lightbox .iti__flag.iti__pk {
    height: 14px;
    background-position: -4009px 0px;
  }

.drip-lightbox .iti__flag.iti__pl {
    height: 13px;
    background-position: -4031px 0px;
  }

.drip-lightbox .iti__flag.iti__pm {
    height: 14px;
    background-position: -4053px 0px;
  }

.drip-lightbox .iti__flag.iti__pn {
    height: 10px;
    background-position: -4075px 0px;
  }

.drip-lightbox .iti__flag.iti__pr {
    height: 14px;
    background-position: -4097px 0px;
  }

.drip-lightbox .iti__flag.iti__ps {
    height: 10px;
    background-position: -4119px 0px;
  }

.drip-lightbox .iti__flag.iti__pt {
    height: 14px;
    background-position: -4141px 0px;
  }

.drip-lightbox .iti__flag.iti__pw {
    height: 13px;
    background-position: -4163px 0px;
  }

.drip-lightbox .iti__flag.iti__py {
    height: 11px;
    background-position: -4185px 0px;
  }

.drip-lightbox .iti__flag.iti__qa {
    height: 8px;
    background-position: -4207px 0px;
  }

.drip-lightbox .iti__flag.iti__re {
    height: 14px;
    background-position: -4229px 0px;
  }

.drip-lightbox .iti__flag.iti__ro {
    height: 14px;
    background-position: -4251px 0px;
  }

.drip-lightbox .iti__flag.iti__rs {
    height: 14px;
    background-position: -4273px 0px;
  }

.drip-lightbox .iti__flag.iti__ru {
    height: 14px;
    background-position: -4295px 0px;
  }

.drip-lightbox .iti__flag.iti__rw {
    height: 14px;
    background-position: -4317px 0px;
  }

.drip-lightbox .iti__flag.iti__sa {
    height: 14px;
    background-position: -4339px 0px;
  }

.drip-lightbox .iti__flag.iti__sb {
    height: 10px;
    background-position: -4361px 0px;
  }

.drip-lightbox .iti__flag.iti__sc {
    height: 10px;
    background-position: -4383px 0px;
  }

.drip-lightbox .iti__flag.iti__sd {
    height: 10px;
    background-position: -4405px 0px;
  }

.drip-lightbox .iti__flag.iti__se {
    height: 13px;
    background-position: -4427px 0px;
  }

.drip-lightbox .iti__flag.iti__sg {
    height: 14px;
    background-position: -4449px 0px;
  }

.drip-lightbox .iti__flag.iti__sh {
    height: 10px;
    background-position: -4471px 0px;
  }

.drip-lightbox .iti__flag.iti__si {
    height: 10px;
    background-position: -4493px 0px;
  }

.drip-lightbox .iti__flag.iti__sj {
    height: 15px;
    background-position: -4515px 0px;
  }

.drip-lightbox .iti__flag.iti__sk {
    height: 14px;
    background-position: -4537px 0px;
  }

.drip-lightbox .iti__flag.iti__sl {
    height: 14px;
    background-position: -4559px 0px;
  }

.drip-lightbox .iti__flag.iti__sm {
    height: 15px;
    background-position: -4581px 0px;
  }

.drip-lightbox .iti__flag.iti__sn {
    height: 14px;
    background-position: -4603px 0px;
  }

.drip-lightbox .iti__flag.iti__so {
    height: 14px;
    background-position: -4625px 0px;
  }

.drip-lightbox .iti__flag.iti__sr {
    height: 14px;
    background-position: -4647px 0px;
  }

.drip-lightbox .iti__flag.iti__ss {
    height: 10px;
    background-position: -4669px 0px;
  }

.drip-lightbox .iti__flag.iti__st {
    height: 10px;
    background-position: -4691px 0px;
  }

.drip-lightbox .iti__flag.iti__sv {
    height: 12px;
    background-position: -4713px 0px;
  }

.drip-lightbox .iti__flag.iti__sx {
    height: 14px;
    background-position: -4735px 0px;
  }

.drip-lightbox .iti__flag.iti__sy {
    height: 14px;
    background-position: -4757px 0px;
  }

.drip-lightbox .iti__flag.iti__sz {
    height: 14px;
    background-position: -4779px 0px;
  }

.drip-lightbox .iti__flag.iti__ta {
    height: 10px;
    background-position: -4801px 0px;
  }

.drip-lightbox .iti__flag.iti__tc {
    height: 10px;
    background-position: -4823px 0px;
  }

.drip-lightbox .iti__flag.iti__td {
    height: 14px;
    background-position: -4845px 0px;
  }

.drip-lightbox .iti__flag.iti__tf {
    height: 14px;
    background-position: -4867px 0px;
  }

.drip-lightbox .iti__flag.iti__tg {
    height: 13px;
    background-position: -4889px 0px;
  }

.drip-lightbox .iti__flag.iti__th {
    height: 14px;
    background-position: -4911px 0px;
  }

.drip-lightbox .iti__flag.iti__tj {
    height: 10px;
    background-position: -4933px 0px;
  }

.drip-lightbox .iti__flag.iti__tk {
    height: 10px;
    background-position: -4955px 0px;
  }

.drip-lightbox .iti__flag.iti__tl {
    height: 10px;
    background-position: -4977px 0px;
  }

.drip-lightbox .iti__flag.iti__tm {
    height: 14px;
    background-position: -4999px 0px;
  }

.drip-lightbox .iti__flag.iti__tn {
    height: 14px;
    background-position: -5021px 0px;
  }

.drip-lightbox .iti__flag.iti__to {
    height: 10px;
    background-position: -5043px 0px;
  }

.drip-lightbox .iti__flag.iti__tr {
    height: 14px;
    background-position: -5065px 0px;
  }

.drip-lightbox .iti__flag.iti__tt {
    height: 12px;
    background-position: -5087px 0px;
  }

.drip-lightbox .iti__flag.iti__tv {
    height: 10px;
    background-position: -5109px 0px;
  }

.drip-lightbox .iti__flag.iti__tw {
    height: 14px;
    background-position: -5131px 0px;
  }

.drip-lightbox .iti__flag.iti__tz {
    height: 14px;
    background-position: -5153px 0px;
  }

.drip-lightbox .iti__flag.iti__ua {
    height: 14px;
    background-position: -5175px 0px;
  }

.drip-lightbox .iti__flag.iti__ug {
    height: 14px;
    background-position: -5197px 0px;
  }

.drip-lightbox .iti__flag.iti__um {
    height: 11px;
    background-position: -5219px 0px;
  }

.drip-lightbox .iti__flag.iti__un {
    height: 14px;
    background-position: -5241px 0px;
  }

.drip-lightbox .iti__flag.iti__us {
    height: 11px;
    background-position: -5263px 0px;
  }

.drip-lightbox .iti__flag.iti__uy {
    height: 14px;
    background-position: -5285px 0px;
  }

.drip-lightbox .iti__flag.iti__uz {
    height: 10px;
    background-position: -5307px 0px;
  }

.drip-lightbox .iti__flag.iti__va {
    height: 15px;
    background-position: -5329px 0px;
  }

.drip-lightbox .iti__flag.iti__vc {
    height: 14px;
    background-position: -5346px 0px;
  }

.drip-lightbox .iti__flag.iti__ve {
    height: 14px;
    background-position: -5368px 0px;
  }

.drip-lightbox .iti__flag.iti__vg {
    height: 10px;
    background-position: -5390px 0px;
  }

.drip-lightbox .iti__flag.iti__vi {
    height: 14px;
    background-position: -5412px 0px;
  }

.drip-lightbox .iti__flag.iti__vn {
    height: 14px;
    background-position: -5434px 0px;
  }

.drip-lightbox .iti__flag.iti__vu {
    height: 12px;
    background-position: -5456px 0px;
  }

.drip-lightbox .iti__flag.iti__wf {
    height: 14px;
    background-position: -5478px 0px;
  }

.drip-lightbox .iti__flag.iti__ws {
    height: 10px;
    background-position: -5500px 0px;
  }

.drip-lightbox .iti__flag.iti__xk {
    height: 15px;
    background-position: -5522px 0px;
  }

.drip-lightbox .iti__flag.iti__ye {
    height: 14px;
    background-position: -5544px 0px;
  }

.drip-lightbox .iti__flag.iti__yt {
    height: 14px;
    background-position: -5566px 0px;
  }

.drip-lightbox .iti__flag.iti__za {
    height: 14px;
    background-position: -5588px 0px;
  }

.drip-lightbox .iti__flag.iti__zm {
    height: 14px;
    background-position: -5610px 0px;
  }

.drip-lightbox .iti__flag.iti__zw {
    height: 10px;
    background-position: -5632px 0px;
  }

.drip-lightbox .iti__flag {
    height: 15px;
    box-shadow: 0px 0px 1px 0px #888;
    background-image: url("flags.png");
    background-repeat: no-repeat;
    background-position: 20px 0;
  }

.drip-lightbox .iti__flag.iti__np {
  background-color: transparent;
}

.drip-lightbox .iti__flag {
  background-image: url("https://d14jnfavjicsbe.cloudfront.net/images/client/flags.png");
};

@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  .drip-lightbox .iti__flag {
    background-image: url("https://d14jnfavjicsbe.cloudfront.net/images/client/flags@2x.png");
  }
}

/* stylelint-enable */


  /* preview settings */
  body.after-submit-preview .drip-panel:not(.drip-success) {
    display: none !important;
  }
  body.after-submit-preview .drip-success {
    display: block !important;
  }
  /* stylelint-enable */

</style><style type="text/css">
  /* === Form-Specific Styles === */
  /* stylelint-disable */

  #drip-108609 {
    background: #fff !important;
  }

  #drip-108609 .drip-content h3 {
    color: #f9a82f !important;
    font-size: 28px !important;
  }

  #drip-108609 .drip-submit-button {
    background-color: #f9a82f !important;
    font-size: 19px !important;
  }

  #drip-108609 .drip-submit-button:hover {
    background-color: #eda02d !important;
  }

  #drip-108609 .drip-submit-button:active {
    background-color: #e0972a !important;
  }

  #drip-108609 .drip-submit-button:disabled {
    background-color: #fcd397 !important;
  }

  #drip-108609 dl dt,
  #drip-108609 .drip-content .drip-description,
  #drip-108609 .drip-errors {
    font-size: 16px !important;
  }

  #drip-108609 .drip-text-field,
  #drip-108609 .drip-radio-buttons,
  #drip-108609 .drip-dropdown-select {
    font-size: 16px !important;
  }

  /* === Reset styles === */

  .drip-lightbox h1,
  .drip-lightbox h2,
  .drip-lightbox h3,
  .drip-lightbox div,
  .drip-lightbox dl,
  .drip-lightbox dt,
  .drip-lightbox dd,
  .drip-lightbox p,
  .drip-lightbox a,
  .drip-lightbox .drip-text-field,
  .drip-lightbox .drip-radio-buttons,
  .drip-lightbox .drip-text-field:focus,
  .drip-lightbox .drip-submit-button {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
    float: none;
    width: auto;
    background-image: none;
    letter-spacing: 0;
    -webkit-box-shadow: none;
       -moz-box-shadow: none;
            box-shadow: none;
    -webkit-text-shadow: none !important;
       -moz-text-shadow: none !important;
            text-shadow: none !important;
  }

  .drip-lightbox a {
    text-decoration: none;
    color: #f9a82f !important;
  }

  .drip-lightbox :focus {
    outline: 0;
  }

  .drip-lightbox input::-webkit-input-placeholder { /* WebKit browsers */
    color: #A8ACB9 !important;
  }
  .drip-lightbox input:-moz-placeholder { /* Mozilla Firefox 4 to 18 */
    color: #A8ACB9 !important;
  }
  .drip-lightbox input::-moz-placeholder { /* Mozilla Firefox 19+ */
    color: #A8ACB9 !important;
  }
  .drip-lightbox input:-ms-input-placeholder { /* Internet Explorer 10+ */
    color: #A8ACB9 !important;
  }

  /* === Clearfix === */

  .drip-clearfix:after {
    visibility: hidden;
    display: block;
    font-size: 0;
    content: " ";
    clear: both;
    height: 0;
  }
  * html .drip-clearfix             { zoom: 1; } /* IE6 */
  *:first-child+html .drip-clearfix { zoom: 1; } /* IE7 */

  /* === Backdrop === */

  .drip-backdrop {
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: 10000;
    background-color: #000;
    opacity: 0;
    -webkit-transition: opacity .3s linear;
       -moz-transition: opacity .3s linear;
         -o-transition: opacity .3s linear;
            transition: opacity .3s linear;
  }

  .drip-backdrop.drip-in {
    opacity: 0.2;
  }

  .drip-backdrop.drip-hidden {
    display: none;
  }

  /* === Main Container === */

  .drip-lightbox-wrapper * {
    box-sizing: content-box;
  }

  /* === Content === */

  .drip-lightbox .drip-content {
    margin: 0 0 0 -190px;
    padding: 0;
    position: fixed;
    width: 380px;
    top: -25%;
    left: 50%;
    font-size: 100%;
    z-index: 11000;
    color: #333;
    vertical-align: baseline;
    background-color: #ffffff;
    opacity: 0;
    -webkit-border-radius: 8px;
       -moz-border-radius: 8px;
            border-radius: 8px;
    -webkit-box-shadow: 0px 10px 28px rgba(0,0,0,0.36);
       -moz-box-shadow: 0px 10px 28px rgba(0,0,0,0.36);
            box-shadow: 0px 10px 28px rgba(0,0,0,0.36);
    -webkit-transition: opacity .3s linear, top .3s ease-out, bottom 200ms ease-in;
       -moz-transition: opacity .3s linear, top .3s ease-out, bottom 200ms ease-in;;
         -o-transition: opacity .3s linear, top .3s ease-out, bottom 200ms ease-in;;
            transition: opacity .3s linear, top .3s ease-out, bottom 200ms ease-in;;
  }

  .drip-lightbox.drip-in .drip-content {
    top: 15%;
    opacity: 1;
  }

  .drip-lightbox.drip-hidden .drip-content {
    display: none;
  }

  .drip-lightbox.side-image .drip-content {
    margin-left: -325px;
    width: 650px;
  }

  .drip-lightbox.mobile .drip-content {
    margin: 0;
    width: 100%;
    left: 0;
    top: auto;
    -webkit-border-radius: 0;
       -moz-border-radius: 0;
            border-radius: 0;
  }

  .drip-lightbox.mobile.drip-in .drip-content {
    top: auto;
    bottom: 0;
  }

  .drip-lightbox.drip-scrollable .drip-content {
    overflow-y: scroll;
  }

  /* === Teaser === */

  .drip-lightbox .drip-header h2 {
    display: block;
    margin: 0 !important;
    padding: 12px 0 !important;
    font-size: 14px !important;
    line-height: 13px !important;
    font-weight: bold !important;
    color: #fff !important;
    letter-spacing: 0 !important;
  }

  /* === Panel === */

  .drip-lightbox .drip-content > div.drip-panel {
    padding: 25px;
    background-color: #fff;
    -webkit-border-radius: 6px;
       -moz-border-radius: 6px;
            border-radius: 6px;
  }

  /* === Content Sections === */

  .drip-lightbox.side-image .drip-form-aside {
    width: 245px;
    text-align: center;
  }

  .drip-lightbox.image-left .drip-form-main {
    margin-left: 270px;
  }

  .drip-lightbox.image-right .drip-form-main {
    margin-right: 270px;
  }

  .drip-lightbox.image-left .drip-form-aside {
    float: left;
  }

  .drip-lightbox.image-right .drip-form-aside {
    float: right;
  }

  @media screen and (max-width: 650px) {
    /* prevent overriding mobile class styles */
    .drip-lightbox.side-image:not(.mobile) .drip-content {
      margin-left: -190px;
      width: 380px;
    }

    .drip-lightbox.side-image .drip-form-main {
      margin-left: 0;
      margin-right: 0;
    }

    .drip-lightbox.side-image .drip-form-aside {
      display: none;
    }
  }

  /* === Content Headings & Paragraphs === */

  .drip-lightbox .drip-content h3 {
    display: block;
    margin: 0 20px 0 0 !important;
    padding: 0 0 15px 0 !important;
    line-height: 1.4 !important;
    font-weight: bold !important;
    text-align: left !important;
    color: #4477bd !important;
    clear: none !important;
  }

  .drip-lightbox .drip-content .drip-description {
    margin: 0;
    padding: 0 0 20px 0;
    line-height: 1.6;
    text-align: left;
  }

  .drip-lightbox .drip-content .drip-post-submission {
    padding: 0;
  }

  .drip-lightbox .drip-content .drip-description a {
    text-decoration: underline;
  }

  .drip-lightbox .drip-content .drip-description em {
    font-style: italic;
  }

  .drip-lightbox .drip-content .drip-description ul,
  .drip-lightbox .drip-content .drip-description ol {
    list-style-position: outside;
    margin: 8px 0 8px 30px;
  }

  .drip-lightbox .drip-content .drip-description ul li
  .drip-lightbox .drip-content .drip-description ol li {
    padding: 0;
  }

  .drip-lightbox .drip-content img.drip-image {
    margin-bottom: 20px;
  }

  .drip-lightbox .drip-content .drip-image-center-helper {
    display: inline-block;
    height: 100%;
    vertical-align: middle;
  }

  .drip-lightbox .drip-content img.drip-image {
    max-width: 245px;
    vertical-align: middle;
  }

  .drip-lightbox .drip-content a.drip-close {
    position: absolute;
    right: 25px;
    top: 25px;
  }

  .drip-lightbox .drip-content a.drip-close:hover {
    cursor: pointer;
  }

  /* === Content Subscribe Form === */

  .drip-lightbox form {
    margin: 0 !important;
    padding: 0 !important;
  }

  .drip-lightbox dl {
    display: block;
    margin: 0;
    padding: 0 0 5px 0;
  }

  .drip-lightbox dl dt {
    display: block;
    padding: 0 0 5px 0;
    /* font-size: 13px; */
    font-weight: bold;
  }

  .drip-lightbox dl.no-labels dt.label-for-type-text,
  .drip-lightbox dl.no-labels dt.label-for-type-dropdown,
  .drip-lightbox dl.no-labels dt.label-for-type-email {
    display: none;
  }

  .drip-lightbox dl dd {
    display: block;
    padding: 0 0 8px 0;
  }

  .drip-lightbox .drip-text-field {
    margin: 0 !important;
    height: 40px !important;
    width: 100% !important;
    color: #4F5362 !important;
    background-color: #fff !important;
    border: 1px solid #A8ACB9 !important;
    -webkit-border-radius: 3px !important;
       -moz-border-radius: 3px !important;
            border-radius: 3px !important;
    -webkit-box-sizing: border-box !important;
       -moz-box-sizing: border-box !important;
        -ms-box-sizing: border-box !important;
            box-sizing: border-box !important;
    background-image: none !important;
    min-width: 0 !important;
    min-height: 0 !important;
  }

  .drip-lightbox .drip-text-field,
  .drip-lightbox .drip-dropdown-select select {
    padding: 10px 12px !important;
  }

  .drip-lightbox .drip-text-field:focus {
    border-color: #9398a9 !important;
    outline: 0;
    background-image: none;
    background-color: #fff !important;
  }

  .drip-lightbox.mobile .drip-text-field {
    font-size: 16px;
  }

  .drip-lightbox .drip-errors:not(:empty) {
    padding: 5px 0 0 0;
    font-weight: normal;
    color: red;
  }

  .drip-lightbox .drip-submit-button {
    padding: 6px 26px !important;
    color: #ffffff !important;
    font-weight: bold !important;
    line-height: 1.6 !important;
    border: 0 !important;
    -webkit-border-radius: 3px !important;
       -moz-border-radius: 3px !important;
            border-radius: 3px !important;
    cursor: pointer !important;
    background-image: none !important;
    min-width: 0 !important;
    min-height: 0 !important;
    height: auto;
    transition: background 0.2s ease !important;
    -webkit-box-shadow: 0px 2px 4px rgba(0,0,0,0.20);
       -moz-box-shadow: 0px 2px 4px rgba(0,0,0,0.20);
            box-shadow: 0px 2px 4px rgba(0,0,0,0.20);
  }

  .drip-lightbox .drip-submit-button:hover {
    background-image: none !important;
  }

  .drip-lightbox .drip-submit-button:active {
    background-image: none !important;
  }

  /* RADIOS */

  .drip-lightbox .drip-radio-buttons,
  .drip-lightbox .drip-radio-buttons * {
    box-sizing: border-box;
  }
  .drip-lightbox .drip-radio-buttons h4 {
    font-family: inherit;
    font-weight: bold;
    font-size: 19px;
    margin: 0 0 3px;
    padding: 0;
  }

  .drip-lightbox .drip-radio-button {
    width: 100%;
    display: block;
    position: relative;
    margin-bottom: 6px;
  }

  .drip-lightbox .drip-radio-button input[type="radio"] {
    height: 0;
    width: 0;
    opacity: 0;
    position: absolute;
    top: 0;
    left: 0;
    display: inline-block;
    border: none;
    padding: 0;
    margin: 0;
  }

  .drip-lightbox .drip-radio-button label {
    font-size: 19px;
    padding-left: 30px;
    color: #262626;
    white-space: normal;
    word-break: normal;
    cursor: pointer;
  }

  .drip-lightbox .drip-radio-button label:before {
    content: "";
    display: block;
    background: #f5f5f5;
    width: 18px;
    height: 18px;
    position: absolute;
    top: 50%;
    left: 0;
    transform: translateY(-50%);
    border-radius: 9px;
    border: 1px solid #cccccc;
    box-sizing: border-box;
    padding: 1px;
    transition: background 300ms ease-out, border-color 300ms, border-width 300ms ease-in;
  }
  .drip-lightbox .drip-radio-button label:hover:before {
    border-color: #f9a82f;
  }

  .drip-lightbox .drip-radio-button input[type="radio"]:checked ~ label:before {
    background-color: #ffffff;
    border: 5px solid #f9a82f;
  }

  /* DROPDOWNS */

  /* stylelint-disable */

.drip-lightbox .drip-dropdown-select h4 {
  font-family: inherit;
  font-weight: bold;
  font-size: 19px;
  margin: 0 0 3px;
  padding: 0;
}

.drip-lightbox .drip-dropdown-select select {
  display: block;
  box-shadow: none;
  position: relative;
  border: 1px solid #A8ACB9;
  outline: none;
  border-radius: 3px;
  line-height: inherit;
  font-family: inherit;
  color: #262626;
  transition: border-color 300ms;
  width: 100%;
  max-width: 100%; /* useful when width is set to anything other than 100% */
  box-sizing: border-box;

  -moz-appearance: none;
  -webkit-appearance: none;
  appearance: none;
  background-color: #fff;
  /* note: bg image below uses 2 urls. The first is an svg data uri for the arrow
    icon, and the second is the gradient. for the icon, if you want to change the
    color, be sure to use `%23` instead of `#`, since it's a url. You can also
    swap in a different svg icon or an external image reference
  */
  background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23262626%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E'),
    linear-gradient(to bottom, #ffffff 0%, #ffffff 100%);
  background-repeat: no-repeat, repeat;
  /* arrow icon position (1em from the right, 50% vertical) , then gradient position*/
  background-position: right 12px top 50%, 0 0;
  /* icon size, then gradient */
  background-size: 12px auto, 100%;
}

/* Hide arrow icon in IE browsers */
.drip-lightbox .drip-dropdown-select select::-ms-expand {
  display: none;
}

/* Hover style */
.drip-lightbox .drip-dropdown-select select:hover {
  border-color: #888;
}

/* Focus style */
.drip-lightbox .drip-dropdown-select select:focus {
  border-color: #A8ACB9;
  /* It'd be nice to use -webkit-focus-ring-color here but it doesn't work on box-shadow */
  /* box-shadow: 0 0 1px 3px rgba(59, 153, 252, .7);
  box-shadow: 0 0 0 3px -moz-mac-focusring;
  color: #222; */
  outline: none;
}

/* Set options to normal weight */
.drip-lightbox .drip-dropdown-select select option {
  font-weight:normal;
}

/* Support for rtl text, explicit support for Arabic and Hebrew */
*[dir="rtl"] .drip-lightbox .drip-dropdown-select select,
:root:lang(ar) .drip-lightbox .drip-dropdown-select select,
:root:lang(iw) .drip-lightbox .drip-dropdown-select select {
  background-position: left 12px top 50%, 0 0;
  padding: .6em .8em .5em 1.4em;
}

/* Disabled styles */
.drip-lightbox .drip-dropdown-select select:disabled,
.drip-lightbox .drip-dropdown-select select[aria-disabled=true] {
  color: graytext;
  background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22graytext%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E'),
    linear-gradient(to bottom, #ffffff 0%,#e5e5e5 100%);
}
.drip-lightbox .drip-dropdown-select select:disabled:hover,
.drip-lightbox .drip-dropdown-select select[aria-disabled=true] {
  border-color: #aaa;
}

/* stylelint-enable */


  /* checkbox */

  .drip-lightbox input,
  .drip-lightbox textarea {
    box-sizing: border-box;
    display: block;
    box-shadow: none;
    position: relative;
    border: 1px solid #cccccc;
    outline: none;
    border-radius: 3px;
    font: inherit;
    color: #262626;
    padding: 12px 18px;
    transition: border-color 300ms;
    width: 100%;
    -moz-appearance: none;
    -webkit-appearance: none;
    appearance: none;
  }

  .drip-lightbox .zenput--checkbox.hidden {
    margin-bottom: -8px;
    display: none;
  }

  .drip-lightbox .zenput--checkbox input[type="checkbox"] {
    height: 0;
    width: 0;
    opacity: 0;
    position: absolute;
    top: 0;
    left: 0;
  }

  .drip-lightbox .zenput--checkbox input[type="checkbox"] ~ .zenput__checkbox-label {
    font: inherit;
    font-size: 16px;
    line-height: 30px;
    color: #262626;
    cursor: pointer;
    white-space: normal;
    word-break: break-word;
    display: block;
    padding-left: 36px;
    position: relative;
    transition: color 300ms
  }

  .drip-lightbox .zenput--checkbox input[type="checkbox"] ~ .zenput__checkbox-label .zenput__checkbox-label__icon {
    content: "";
    display: block;
    background: #f5f5f5;
    width: 24px;
    height: 24px;
    position: absolute;
    top: 3px;
    left: 0;
    border-radius: 3px;
    border: 1px solid #cccccc;
    box-sizing: border-box;
    padding: 3px;
    transition: background 300ms ease-out, border-color 300ms;
  }

  .drip-lightbox .zenput--checkbox input[type="checkbox"] ~ .zenput__checkbox-label .zenput__checkbox-label__icon svg {
    opacity: 0;
    width: 16px;
    display: block;
    fill: #cccccc;
    transition: opacity 300ms ease-out;
  }

  .drip-lightbox .zenput--checkbox .zenput__checkbox-label .zenput__checkbox-label__icon .octicon-dash {
    display: none;
  }

  .drip-lightbox .zenput--checkbox input[type="checkbox"]:checked ~ .zenput__checkbox-label {
    color: #333 !important;
  }
  .drip-lightbox .zenput--checkbox input[type="checkbox"]:checked ~ .zenput__checkbox-label .zenput__checkbox-label__icon {
    background-color: #ffffff;
    border-color: #a8acb9;
  }
  .drip-lightbox .zenput--checkbox input[type="checkbox"]:checked ~ .zenput__checkbox-label .zenput__checkbox-label__icon svg {
    fill: #f9a82f !important;
    opacity: 1;
  }

  /* telephone input */
  /* stylelint-disable */

.drip-lightbox .iti + .zenput--checkbox {
  margin-top: 10px;
}

.drip-lightbox .iti {
  position: relative;
  display: block;
}

.drip-lightbox .iti * {
  box-sizing: border-box;
  -moz-box-sizing: border-box;
}

.drip-lightbox .iti__hide {
  display: none;
}

.drip-lightbox .iti__v-hide {
  visibility: hidden;
}

.drip-lightbox .iti input,
.drip-lightbox .iti input[type=text],
.drip-lightbox .iti input[type=tel] {
  position: relative;
  z-index: 0;
  width: 100%;
  padding: 0 0 0 36px;
  margin: 0 !important;
}

  .drip-lightbox .iti input,
  .drip-lightbox .iti input[type=text],
  .drip-lightbox .iti input[type=tel] {
    height: 42px;
    border: 1px solid #A8ACB9 !important;
    border-radius: 3px !important;
  }

.drip-lightbox .iti__flag-container {
  position: absolute;
  top: 0;
  bottom: 0;
  right: 0;
  padding: 1px;
}

.drip-lightbox .iti__selected-flag {
  z-index: 1;
  position: relative;
  display: flex;
  align-items: center;
  height: 100%;
  padding: 0 6px 0 8px;
}

.drip-lightbox .iti__arrow {
  margin-left: 6px;
  width: 0;
  height: 0;
  border-left: 3px solid transparent;
  border-right: 3px solid transparent;
  border-top: 4px solid #555;
}

.drip-lightbox .iti__arrow--up {
  border-top: none;
  border-bottom: 4px solid #555;
}

.drip-lightbox .iti__country-list {
  position: absolute;
  z-index: 2;
  list-style: none;
  text-align: left;
  padding: 0;
  margin: 0 0 0 -1px;
  box-shadow: 1px 1px 4px rgba(0, 0, 0, 0.2);
  background-color: white;
  border: 1px solid #CCC;
  white-space: nowrap;
  max-height: 200px;
  width: 320px;
  overflow-y: scroll;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
}

.drip-lightbox .iti__country-list--dropup {
  bottom: 100%;
  margin-bottom: -1px;
}

@media (max-width: 500px) {
  .drip-lightbox .iti__country-list {
    white-space: normal;
  }
}

.drip-lightbox .iti__flag-box {
  display: inline-block;
  width: 20px;
}

.drip-lightbox .iti__divider {
  padding-bottom: 5px;
  margin-bottom: 5px;
  border-bottom: 1px solid #CCC;
}

.drip-lightbox .iti__country {
  padding: 5px 10px;
  outline: none;
}

.drip-lightbox .iti__dial-code {
  color: #999;
}

.drip-lightbox .iti__country.iti__highlight {
  background-color: rgba(0, 0, 0, 0.05);
}

.drip-lightbox .iti__flag-box,
.drip-lightbox .iti__country-name,
.drip-lightbox .iti__dial-code {
  vertical-align: middle;
}

.drip-lightbox .iti__flag-box,
.drip-lightbox .iti__country-name {
  margin-right: 6px;
}

.drip-lightbox .iti--allow-dropdown input,
.drip-lightbox .iti--allow-dropdown input[type=text],
.drip-lightbox .iti--allow-dropdown input[type=tel],
.drip-lightbox .iti--separate-dial-code input,
.drip-lightbox .iti--separate-dial-code input[type=text],
.drip-lightbox .iti--separate-dial-code input[type=tel] {
  padding-right: 6px;
  padding-left: 52px;
  margin-left: 0;
}

.drip-lightbox .iti--allow-dropdown .iti__flag-container,
.drip-lightbox .iti--separate-dial-code .iti__flag-container {
  right: auto;
  left: 0;
}

.drip-lightbox .iti--allow-dropdown .iti__flag-container:hover {
  cursor: pointer;
}

.drip-lightbox .iti--allow-dropdown .iti__flag-container:hover .iti__selected-flag {
  background-color: rgba(0, 0, 0, 0.05);
}

.drip-lightbox .iti--allow-dropdown input[disabled]+.iti__flag-container:hover,
.drip-lightbox .iti--allow-dropdown input[readonly]+.iti__flag-container:hover {
  cursor: default;
}

.drip-lightbox .iti--allow-dropdown input[disabled]+.iti__flag-container:hover .iti__selected-flag,
.drip-lightbox .iti--allow-dropdown input[readonly]+.iti__flag-container:hover .iti__selected-flag {
  background-color: transparent;
}

.drip-lightbox .iti--separate-dial-code .iti__selected-flag {
  background-color: rgba(0, 0, 0, 0.05);
}

.drip-lightbox .iti--separate-dial-code .iti__selected-dial-code {
  margin-left: 6px;
}

.drip-lightbox .iti--container {
  position: absolute;
  top: -1000px;
  left: -1000px;
  z-index: 1060;
  padding: 1px;
}

.drip-lightbox .iti--container:hover {
  cursor: pointer;
}

.iti-mobile .drip-lightbox  .iti--container {
  top: 30px;
  bottom: 30px;
  left: 30px;
  right: 30px;
  position: fixed;
}

.iti-mobile .drip-lightbox .iti__country-list {
  max-height: 100%;
  width: 100%;
}

.iti-mobile .drip-lightbox .iti__country {
  padding: 10px 10px;
  line-height: 1.5em;
}

.drip-lightbox .sms-subtext {
  margin-top: .75em;
  font-size: .75em;
  line-height: 1.4;
  display: inline-block;
}

.drip-lightbox .sms-subtext a {
  text-decoration: underline;
  cursor: pointer;
}

.drip-lightbox .iti__flag {
  width: 20px;
}

.drip-lightbox .iti__flag.iti__be {
  width: 18px;
}

.drip-lightbox .iti__flag.iti__ch {
  width: 15px;
}

.drip-lightbox .iti__flag.iti__mc {
  width: 19px;
}

.drip-lightbox .iti__flag.iti__ne {
  width: 18px;
}

.drip-lightbox .iti__flag.iti__np {
  width: 13px;
}

.drip-lightbox .iti__flag.iti__va {
  width: 15px;
}

@media (-webkit-min-device-pixel-ratio: 2),
(min-resolution: 192dpi) {
  .drip-lightbox .iti__flag {
    background-size: 5652px 15px;
  }
}

.drip-lightbox .iti__flag.iti__ac {
    height: 10px;
    background-position: 0px 0px;
  }

.drip-lightbox .iti__flag.iti__ad {
    height: 14px;
    background-position: -22px 0px;
  }

.drip-lightbox .iti__flag.iti__ae {
    height: 10px;
    background-position: -44px 0px;
  }

.drip-lightbox .iti__flag.iti__af {
    height: 14px;
    background-position: -66px 0px;
  }

.drip-lightbox .iti__flag.iti__ag {
    height: 14px;
    background-position: -88px 0px;
  }

.drip-lightbox .iti__flag.iti__ai {
    height: 10px;
    background-position: -110px 0px;
  }

.drip-lightbox .iti__flag.iti__al {
    height: 15px;
    background-position: -132px 0px;
  }

.drip-lightbox .iti__flag.iti__am {
    height: 10px;
    background-position: -154px 0px;
  }

.drip-lightbox .iti__flag.iti__ao {
    height: 14px;
    background-position: -176px 0px;
  }

.drip-lightbox .iti__flag.iti__aq {
    height: 14px;
    background-position: -198px 0px;
  }

.drip-lightbox .iti__flag.iti__ar {
    height: 13px;
    background-position: -220px 0px;
  }

.drip-lightbox .iti__flag.iti__as {
    height: 10px;
    background-position: -242px 0px;
  }

.drip-lightbox .iti__flag.iti__at {
    height: 14px;
    background-position: -264px 0px;
  }

.drip-lightbox .iti__flag.iti__au {
    height: 10px;
    background-position: -286px 0px;
  }

.drip-lightbox .iti__flag.iti__aw {
    height: 14px;
    background-position: -308px 0px;
  }

.drip-lightbox .iti__flag.iti__ax {
    height: 13px;
    background-position: -330px 0px;
  }

.drip-lightbox .iti__flag.iti__az {
    height: 10px;
    background-position: -352px 0px;
  }

.drip-lightbox .iti__flag.iti__ba {
    height: 10px;
    background-position: -374px 0px;
  }

.drip-lightbox .iti__flag.iti__bb {
    height: 14px;
    background-position: -396px 0px;
  }

.drip-lightbox .iti__flag.iti__bd {
    height: 12px;
    background-position: -418px 0px;
  }

.drip-lightbox .iti__flag.iti__be {
    height: 15px;
    background-position: -440px 0px;
  }

.drip-lightbox .iti__flag.iti__bf {
    height: 14px;
    background-position: -460px 0px;
  }

.drip-lightbox .iti__flag.iti__bg {
    height: 12px;
    background-position: -482px 0px;
  }

.drip-lightbox .iti__flag.iti__bh {
    height: 12px;
    background-position: -504px 0px;
  }

.drip-lightbox .iti__flag.iti__bi {
    height: 12px;
    background-position: -526px 0px;
  }

.drip-lightbox .iti__flag.iti__bj {
    height: 14px;
    background-position: -548px 0px;
  }

.drip-lightbox .iti__flag.iti__bl {
    height: 14px;
    background-position: -570px 0px;
  }

.drip-lightbox .iti__flag.iti__bm {
    height: 10px;
    background-position: -592px 0px;
  }

.drip-lightbox .iti__flag.iti__bn {
    height: 10px;
    background-position: -614px 0px;
  }

.drip-lightbox .iti__flag.iti__bo {
    height: 14px;
    background-position: -636px 0px;
  }

.drip-lightbox .iti__flag.iti__bq {
    height: 14px;
    background-position: -658px 0px;
  }

.drip-lightbox .iti__flag.iti__br {
    height: 14px;
    background-position: -680px 0px;
  }

.drip-lightbox .iti__flag.iti__bs {
    height: 10px;
    background-position: -702px 0px;
  }

.drip-lightbox .iti__flag.iti__bt {
    height: 14px;
    background-position: -724px 0px;
  }

.drip-lightbox .iti__flag.iti__bv {
    height: 15px;
    background-position: -746px 0px;
  }

.drip-lightbox .iti__flag.iti__bw {
    height: 14px;
    background-position: -768px 0px;
  }

.drip-lightbox .iti__flag.iti__by {
    height: 10px;
    background-position: -790px 0px;
  }

.drip-lightbox .iti__flag.iti__bz {
    height: 14px;
    background-position: -812px 0px;
  }

.drip-lightbox .iti__flag.iti__ca {
    height: 10px;
    background-position: -834px 0px;
  }

.drip-lightbox .iti__flag.iti__cc {
    height: 10px;
    background-position: -856px 0px;
  }

.drip-lightbox .iti__flag.iti__cd {
    height: 15px;
    background-position: -878px 0px;
  }

.drip-lightbox .iti__flag.iti__cf {
    height: 14px;
    background-position: -900px 0px;
  }

.drip-lightbox .iti__flag.iti__cg {
    height: 14px;
    background-position: -922px 0px;
  }

.drip-lightbox .iti__flag.iti__ch {
    height: 15px;
    background-position: -944px 0px;
  }

.drip-lightbox .iti__flag.iti__ci {
    height: 14px;
    background-position: -961px 0px;
  }

.drip-lightbox .iti__flag.iti__ck {
    height: 10px;
    background-position: -983px 0px;
  }

.drip-lightbox .iti__flag.iti__cl {
    height: 14px;
    background-position: -1005px 0px;
  }

.drip-lightbox .iti__flag.iti__cm {
    height: 14px;
    background-position: -1027px 0px;
  }

.drip-lightbox .iti__flag.iti__cn {
    height: 14px;
    background-position: -1049px 0px;
  }

.drip-lightbox .iti__flag.iti__co {
    height: 14px;
    background-position: -1071px 0px;
  }

.drip-lightbox .iti__flag.iti__cp {
    height: 14px;
    background-position: -1093px 0px;
  }

.drip-lightbox .iti__flag.iti__cr {
    height: 12px;
    background-position: -1115px 0px;
  }

.drip-lightbox .iti__flag.iti__cu {
    height: 10px;
    background-position: -1137px 0px;
  }

.drip-lightbox .iti__flag.iti__cv {
    height: 12px;
    background-position: -1159px 0px;
  }

.drip-lightbox .iti__flag.iti__cw {
    height: 14px;
    background-position: -1181px 0px;
  }

.drip-lightbox .iti__flag.iti__cx {
    height: 10px;
    background-position: -1203px 0px;
  }

.drip-lightbox .iti__flag.iti__cy {
    height: 14px;
    background-position: -1225px 0px;
  }

.drip-lightbox .iti__flag.iti__cz {
    height: 14px;
    background-position: -1247px 0px;
  }

.drip-lightbox .iti__flag.iti__de {
    height: 12px;
    background-position: -1269px 0px;
  }

.drip-lightbox .iti__flag.iti__dg {
    height: 10px;
    background-position: -1291px 0px;
  }

.drip-lightbox .iti__flag.iti__dj {
    height: 14px;
    background-position: -1313px 0px;
  }

.drip-lightbox .iti__flag.iti__dk {
    height: 15px;
    background-position: -1335px 0px;
  }

.drip-lightbox .iti__flag.iti__dm {
    height: 10px;
    background-position: -1357px 0px;
  }

.drip-lightbox .iti__flag.iti__do {
    height: 14px;
    background-position: -1379px 0px;
  }

.drip-lightbox .iti__flag.iti__dz {
    height: 14px;
    background-position: -1401px 0px;
  }

.drip-lightbox .iti__flag.iti__ea {
    height: 14px;
    background-position: -1423px 0px;
  }

.drip-lightbox .iti__flag.iti__ec {
    height: 14px;
    background-position: -1445px 0px;
  }

.drip-lightbox .iti__flag.iti__ee {
    height: 13px;
    background-position: -1467px 0px;
  }

.drip-lightbox .iti__flag.iti__eg {
    height: 14px;
    background-position: -1489px 0px;
  }

.drip-lightbox .iti__flag.iti__eh {
    height: 10px;
    background-position: -1511px 0px;
  }

.drip-lightbox .iti__flag.iti__er {
    height: 10px;
    background-position: -1533px 0px;
  }

.drip-lightbox .iti__flag.iti__es {
    height: 14px;
    background-position: -1555px 0px;
  }

.drip-lightbox .iti__flag.iti__et {
    height: 10px;
    background-position: -1577px 0px;
  }

.drip-lightbox .iti__flag.iti__eu {
    height: 14px;
    background-position: -1599px 0px;
  }

.drip-lightbox .iti__flag.iti__fi {
    height: 12px;
    background-position: -1621px 0px;
  }

.drip-lightbox .iti__flag.iti__fj {
    height: 10px;
    background-position: -1643px 0px;
  }

.drip-lightbox .iti__flag.iti__fk {
    height: 10px;
    background-position: -1665px 0px;
  }

.drip-lightbox .iti__flag.iti__fm {
    height: 11px;
    background-position: -1687px 0px;
  }

.drip-lightbox .iti__flag.iti__fo {
    height: 15px;
    background-position: -1709px 0px;
  }

.drip-lightbox .iti__flag.iti__fr {
    height: 14px;
    background-position: -1731px 0px;
  }

.drip-lightbox .iti__flag.iti__ga {
    height: 15px;
    background-position: -1753px 0px;
  }

.drip-lightbox .iti__flag.iti__gb {
    height: 10px;
    background-position: -1775px 0px;
  }

.drip-lightbox .iti__flag.iti__gd {
    height: 12px;
    background-position: -1797px 0px;
  }

.drip-lightbox .iti__flag.iti__ge {
    height: 14px;
    background-position: -1819px 0px;
  }

.drip-lightbox .iti__flag.iti__gf {
    height: 14px;
    background-position: -1841px 0px;
  }

.drip-lightbox .iti__flag.iti__gg {
    height: 14px;
    background-position: -1863px 0px;
  }

.drip-lightbox .iti__flag.iti__gh {
    height: 14px;
    background-position: -1885px 0px;
  }

.drip-lightbox .iti__flag.iti__gi {
    height: 10px;
    background-position: -1907px 0px;
  }

.drip-lightbox .iti__flag.iti__gl {
    height: 14px;
    background-position: -1929px 0px;
  }

.drip-lightbox .iti__flag.iti__gm {
    height: 14px;
    background-position: -1951px 0px;
  }

.drip-lightbox .iti__flag.iti__gn {
    height: 14px;
    background-position: -1973px 0px;
  }

.drip-lightbox .iti__flag.iti__gp {
    height: 14px;
    background-position: -1995px 0px;
  }

.drip-lightbox .iti__flag.iti__gq {
    height: 14px;
    background-position: -2017px 0px;
  }

.drip-lightbox .iti__flag.iti__gr {
    height: 14px;
    background-position: -2039px 0px;
  }

.drip-lightbox .iti__flag.iti__gs {
    height: 10px;
    background-position: -2061px 0px;
  }

.drip-lightbox .iti__flag.iti__gt {
    height: 13px;
    background-position: -2083px 0px;
  }

.drip-lightbox .iti__flag.iti__gu {
    height: 11px;
    background-position: -2105px 0px;
  }

.drip-lightbox .iti__flag.iti__gw {
    height: 10px;
    background-position: -2127px 0px;
  }

.drip-lightbox .iti__flag.iti__gy {
    height: 12px;
    background-position: -2149px 0px;
  }

.drip-lightbox .iti__flag.iti__hk {
    height: 14px;
    background-position: -2171px 0px;
  }

.drip-lightbox .iti__flag.iti__hm {
    height: 10px;
    background-position: -2193px 0px;
  }

.drip-lightbox .iti__flag.iti__hn {
    height: 10px;
    background-position: -2215px 0px;
  }

.drip-lightbox .iti__flag.iti__hr {
    height: 10px;
    background-position: -2237px 0px;
  }

.drip-lightbox .iti__flag.iti__ht {
    height: 12px;
    background-position: -2259px 0px;
  }

.drip-lightbox .iti__flag.iti__hu {
    height: 10px;
    background-position: -2281px 0px;
  }

.drip-lightbox .iti__flag.iti__ic {
    height: 14px;
    background-position: -2303px 0px;
  }

.drip-lightbox .iti__flag.iti__id {
    height: 14px;
    background-position: -2325px 0px;
  }

.drip-lightbox .iti__flag.iti__ie {
    height: 10px;
    background-position: -2347px 0px;
  }

.drip-lightbox .iti__flag.iti__il {
    height: 15px;
    background-position: -2369px 0px;
  }

.drip-lightbox .iti__flag.iti__im {
    height: 10px;
    background-position: -2391px 0px;
  }

.drip-lightbox .iti__flag.iti__in {
    height: 14px;
    background-position: -2413px 0px;
  }

.drip-lightbox .iti__flag.iti__io {
    height: 10px;
    background-position: -2435px 0px;
  }

.drip-lightbox .iti__flag.iti__iq {
    height: 14px;
    background-position: -2457px 0px;
  }

.drip-lightbox .iti__flag.iti__ir {
    height: 12px;
    background-position: -2479px 0px;
  }

.drip-lightbox .iti__flag.iti__is {
    height: 15px;
    background-position: -2501px 0px;
  }

.drip-lightbox .iti__flag.iti__it {
    height: 14px;
    background-position: -2523px 0px;
  }

.drip-lightbox .iti__flag.iti__je {
    height: 12px;
    background-position: -2545px 0px;
  }

.drip-lightbox .iti__flag.iti__jm {
    height: 10px;
    background-position: -2567px 0px;
  }

.drip-lightbox .iti__flag.iti__jo {
    height: 10px;
    background-position: -2589px 0px;
  }

.drip-lightbox .iti__flag.iti__jp {
    height: 14px;
    background-position: -2611px 0px;
  }

.drip-lightbox .iti__flag.iti__ke {
    height: 14px;
    background-position: -2633px 0px;
  }

.drip-lightbox .iti__flag.iti__kg {
    height: 12px;
    background-position: -2655px 0px;
  }

.drip-lightbox .iti__flag.iti__kh {
    height: 13px;
    background-position: -2677px 0px;
  }

.drip-lightbox .iti__flag.iti__ki {
    height: 10px;
    background-position: -2699px 0px;
  }

.drip-lightbox .iti__flag.iti__km {
    height: 12px;
    background-position: -2721px 0px;
  }

.drip-lightbox .iti__flag.iti__kn {
    height: 14px;
    background-position: -2743px 0px;
  }

.drip-lightbox .iti__flag.iti__kp {
    height: 10px;
    background-position: -2765px 0px;
  }

.drip-lightbox .iti__flag.iti__kr {
    height: 14px;
    background-position: -2787px 0px;
  }

.drip-lightbox .iti__flag.iti__kw {
    height: 10px;
    background-position: -2809px 0px;
  }

.drip-lightbox .iti__flag.iti__ky {
    height: 10px;
    background-position: -2831px 0px;
  }

.drip-lightbox .iti__flag.iti__kz {
    height: 10px;
    background-position: -2853px 0px;
  }

.drip-lightbox .iti__flag.iti__la {
    height: 14px;
    background-position: -2875px 0px;
  }

.drip-lightbox .iti__flag.iti__lb {
    height: 14px;
    background-position: -2897px 0px;
  }

.drip-lightbox .iti__flag.iti__lc {
    height: 10px;
    background-position: -2919px 0px;
  }

.drip-lightbox .iti__flag.iti__li {
    height: 12px;
    background-position: -2941px 0px;
  }

.drip-lightbox .iti__flag.iti__lk {
    height: 10px;
    background-position: -2963px 0px;
  }

.drip-lightbox .iti__flag.iti__lr {
    height: 11px;
    background-position: -2985px 0px;
  }

.drip-lightbox .iti__flag.iti__ls {
    height: 14px;
    background-position: -3007px 0px;
  }

.drip-lightbox .iti__flag.iti__lt {
    height: 12px;
    background-position: -3029px 0px;
  }

.drip-lightbox .iti__flag.iti__lu {
    height: 12px;
    background-position: -3051px 0px;
  }

.drip-lightbox .iti__flag.iti__lv {
    height: 10px;
    background-position: -3073px 0px;
  }

.drip-lightbox .iti__flag.iti__ly {
    height: 10px;
    background-position: -3095px 0px;
  }

.drip-lightbox .iti__flag.iti__ma {
    height: 14px;
    background-position: -3117px 0px;
  }

.drip-lightbox .iti__flag.iti__mc {
    height: 15px;
    background-position: -3139px 0px;
  }

.drip-lightbox .iti__flag.iti__md {
    height: 10px;
    background-position: -3160px 0px;
  }

.drip-lightbox .iti__flag.iti__me {
    height: 10px;
    background-position: -3182px 0px;
  }

.drip-lightbox .iti__flag.iti__mf {
    height: 14px;
    background-position: -3204px 0px;
  }

.drip-lightbox .iti__flag.iti__mg {
    height: 14px;
    background-position: -3226px 0px;
  }

.drip-lightbox .iti__flag.iti__mh {
    height: 11px;
    background-position: -3248px 0px;
  }

.drip-lightbox .iti__flag.iti__mk {
    height: 10px;
    background-position: -3270px 0px;
  }

.drip-lightbox .iti__flag.iti__ml {
    height: 14px;
    background-position: -3292px 0px;
  }

.drip-lightbox .iti__flag.iti__mm {
    height: 14px;
    background-position: -3314px 0px;
  }

.drip-lightbox .iti__flag.iti__mn {
    height: 10px;
    background-position: -3336px 0px;
  }

.drip-lightbox .iti__flag.iti__mo {
    height: 14px;
    background-position: -3358px 0px;
  }

.drip-lightbox .iti__flag.iti__mp {
    height: 10px;
    background-position: -3380px 0px;
  }

.drip-lightbox .iti__flag.iti__mq {
    height: 14px;
    background-position: -3402px 0px;
  }

.drip-lightbox .iti__flag.iti__mr {
    height: 14px;
    background-position: -3424px 0px;
  }

.drip-lightbox .iti__flag.iti__ms {
    height: 10px;
    background-position: -3446px 0px;
  }

.drip-lightbox .iti__flag.iti__mt {
    height: 14px;
    background-position: -3468px 0px;
  }

.drip-lightbox .iti__flag.iti__mu {
    height: 14px;
    background-position: -3490px 0px;
  }

.drip-lightbox .iti__flag.iti__mv {
    height: 14px;
    background-position: -3512px 0px;
  }

.drip-lightbox .iti__flag.iti__mw {
    height: 14px;
    background-position: -3534px 0px;
  }

.drip-lightbox .iti__flag.iti__mx {
    height: 12px;
    background-position: -3556px 0px;
  }

.drip-lightbox .iti__flag.iti__my {
    height: 10px;
    background-position: -3578px 0px;
  }

.drip-lightbox .iti__flag.iti__mz {
    height: 14px;
    background-position: -3600px 0px;
  }

.drip-lightbox .iti__flag.iti__na {
    height: 14px;
    background-position: -3622px 0px;
  }

.drip-lightbox .iti__flag.iti__nc {
    height: 10px;
    background-position: -3644px 0px;
  }

.drip-lightbox .iti__flag.iti__ne {
    height: 15px;
    background-position: -3666px 0px;
  }

.drip-lightbox .iti__flag.iti__nf {
    height: 10px;
    background-position: -3686px 0px;
  }

.drip-lightbox .iti__flag.iti__ng {
    height: 10px;
    background-position: -3708px 0px;
  }

.drip-lightbox .iti__flag.iti__ni {
    height: 12px;
    background-position: -3730px 0px;
  }

.drip-lightbox .iti__flag.iti__nl {
    height: 14px;
    background-position: -3752px 0px;
  }

.drip-lightbox .iti__flag.iti__no {
    height: 15px;
    background-position: -3774px 0px;
  }

.drip-lightbox .iti__flag.iti__np {
    height: 15px;
    background-position: -3796px 0px;
  }

.drip-lightbox .iti__flag.iti__nr {
    height: 10px;
    background-position: -3811px 0px;
  }

.drip-lightbox .iti__flag.iti__nu {
    height: 10px;
    background-position: -3833px 0px;
  }

.drip-lightbox .iti__flag.iti__nz {
    height: 10px;
    background-position: -3855px 0px;
  }

.drip-lightbox .iti__flag.iti__om {
    height: 10px;
    background-position: -3877px 0px;
  }

.drip-lightbox .iti__flag.iti__pa {
    height: 14px;
    background-position: -3899px 0px;
  }

.drip-lightbox .iti__flag.iti__pe {
    height: 14px;
    background-position: -3921px 0px;
  }

.drip-lightbox .iti__flag.iti__pf {
    height: 14px;
    background-position: -3943px 0px;
  }

.drip-lightbox .iti__flag.iti__pg {
    height: 15px;
    background-position: -3965px 0px;
  }

.drip-lightbox .iti__flag.iti__ph {
    height: 10px;
    background-position: -3987px 0px;
  }

.drip-lightbox .iti__flag.iti__pk {
    height: 14px;
    background-position: -4009px 0px;
  }

.drip-lightbox .iti__flag.iti__pl {
    height: 13px;
    background-position: -4031px 0px;
  }

.drip-lightbox .iti__flag.iti__pm {
    height: 14px;
    background-position: -4053px 0px;
  }

.drip-lightbox .iti__flag.iti__pn {
    height: 10px;
    background-position: -4075px 0px;
  }

.drip-lightbox .iti__flag.iti__pr {
    height: 14px;
    background-position: -4097px 0px;
  }

.drip-lightbox .iti__flag.iti__ps {
    height: 10px;
    background-position: -4119px 0px;
  }

.drip-lightbox .iti__flag.iti__pt {
    height: 14px;
    background-position: -4141px 0px;
  }

.drip-lightbox .iti__flag.iti__pw {
    height: 13px;
    background-position: -4163px 0px;
  }

.drip-lightbox .iti__flag.iti__py {
    height: 11px;
    background-position: -4185px 0px;
  }

.drip-lightbox .iti__flag.iti__qa {
    height: 8px;
    background-position: -4207px 0px;
  }

.drip-lightbox .iti__flag.iti__re {
    height: 14px;
    background-position: -4229px 0px;
  }

.drip-lightbox .iti__flag.iti__ro {
    height: 14px;
    background-position: -4251px 0px;
  }

.drip-lightbox .iti__flag.iti__rs {
    height: 14px;
    background-position: -4273px 0px;
  }

.drip-lightbox .iti__flag.iti__ru {
    height: 14px;
    background-position: -4295px 0px;
  }

.drip-lightbox .iti__flag.iti__rw {
    height: 14px;
    background-position: -4317px 0px;
  }

.drip-lightbox .iti__flag.iti__sa {
    height: 14px;
    background-position: -4339px 0px;
  }

.drip-lightbox .iti__flag.iti__sb {
    height: 10px;
    background-position: -4361px 0px;
  }

.drip-lightbox .iti__flag.iti__sc {
    height: 10px;
    background-position: -4383px 0px;
  }

.drip-lightbox .iti__flag.iti__sd {
    height: 10px;
    background-position: -4405px 0px;
  }

.drip-lightbox .iti__flag.iti__se {
    height: 13px;
    background-position: -4427px 0px;
  }

.drip-lightbox .iti__flag.iti__sg {
    height: 14px;
    background-position: -4449px 0px;
  }

.drip-lightbox .iti__flag.iti__sh {
    height: 10px;
    background-position: -4471px 0px;
  }

.drip-lightbox .iti__flag.iti__si {
    height: 10px;
    background-position: -4493px 0px;
  }

.drip-lightbox .iti__flag.iti__sj {
    height: 15px;
    background-position: -4515px 0px;
  }

.drip-lightbox .iti__flag.iti__sk {
    height: 14px;
    background-position: -4537px 0px;
  }

.drip-lightbox .iti__flag.iti__sl {
    height: 14px;
    background-position: -4559px 0px;
  }

.drip-lightbox .iti__flag.iti__sm {
    height: 15px;
    background-position: -4581px 0px;
  }

.drip-lightbox .iti__flag.iti__sn {
    height: 14px;
    background-position: -4603px 0px;
  }

.drip-lightbox .iti__flag.iti__so {
    height: 14px;
    background-position: -4625px 0px;
  }

.drip-lightbox .iti__flag.iti__sr {
    height: 14px;
    background-position: -4647px 0px;
  }

.drip-lightbox .iti__flag.iti__ss {
    height: 10px;
    background-position: -4669px 0px;
  }

.drip-lightbox .iti__flag.iti__st {
    height: 10px;
    background-position: -4691px 0px;
  }

.drip-lightbox .iti__flag.iti__sv {
    height: 12px;
    background-position: -4713px 0px;
  }

.drip-lightbox .iti__flag.iti__sx {
    height: 14px;
    background-position: -4735px 0px;
  }

.drip-lightbox .iti__flag.iti__sy {
    height: 14px;
    background-position: -4757px 0px;
  }

.drip-lightbox .iti__flag.iti__sz {
    height: 14px;
    background-position: -4779px 0px;
  }

.drip-lightbox .iti__flag.iti__ta {
    height: 10px;
    background-position: -4801px 0px;
  }

.drip-lightbox .iti__flag.iti__tc {
    height: 10px;
    background-position: -4823px 0px;
  }

.drip-lightbox .iti__flag.iti__td {
    height: 14px;
    background-position: -4845px 0px;
  }

.drip-lightbox .iti__flag.iti__tf {
    height: 14px;
    background-position: -4867px 0px;
  }

.drip-lightbox .iti__flag.iti__tg {
    height: 13px;
    background-position: -4889px 0px;
  }

.drip-lightbox .iti__flag.iti__th {
    height: 14px;
    background-position: -4911px 0px;
  }

.drip-lightbox .iti__flag.iti__tj {
    height: 10px;
    background-position: -4933px 0px;
  }

.drip-lightbox .iti__flag.iti__tk {
    height: 10px;
    background-position: -4955px 0px;
  }

.drip-lightbox .iti__flag.iti__tl {
    height: 10px;
    background-position: -4977px 0px;
  }

.drip-lightbox .iti__flag.iti__tm {
    height: 14px;
    background-position: -4999px 0px;
  }

.drip-lightbox .iti__flag.iti__tn {
    height: 14px;
    background-position: -5021px 0px;
  }

.drip-lightbox .iti__flag.iti__to {
    height: 10px;
    background-position: -5043px 0px;
  }

.drip-lightbox .iti__flag.iti__tr {
    height: 14px;
    background-position: -5065px 0px;
  }

.drip-lightbox .iti__flag.iti__tt {
    height: 12px;
    background-position: -5087px 0px;
  }

.drip-lightbox .iti__flag.iti__tv {
    height: 10px;
    background-position: -5109px 0px;
  }

.drip-lightbox .iti__flag.iti__tw {
    height: 14px;
    background-position: -5131px 0px;
  }

.drip-lightbox .iti__flag.iti__tz {
    height: 14px;
    background-position: -5153px 0px;
  }

.drip-lightbox .iti__flag.iti__ua {
    height: 14px;
    background-position: -5175px 0px;
  }

.drip-lightbox .iti__flag.iti__ug {
    height: 14px;
    background-position: -5197px 0px;
  }

.drip-lightbox .iti__flag.iti__um {
    height: 11px;
    background-position: -5219px 0px;
  }

.drip-lightbox .iti__flag.iti__un {
    height: 14px;
    background-position: -5241px 0px;
  }

.drip-lightbox .iti__flag.iti__us {
    height: 11px;
    background-position: -5263px 0px;
  }

.drip-lightbox .iti__flag.iti__uy {
    height: 14px;
    background-position: -5285px 0px;
  }

.drip-lightbox .iti__flag.iti__uz {
    height: 10px;
    background-position: -5307px 0px;
  }

.drip-lightbox .iti__flag.iti__va {
    height: 15px;
    background-position: -5329px 0px;
  }

.drip-lightbox .iti__flag.iti__vc {
    height: 14px;
    background-position: -5346px 0px;
  }

.drip-lightbox .iti__flag.iti__ve {
    height: 14px;
    background-position: -5368px 0px;
  }

.drip-lightbox .iti__flag.iti__vg {
    height: 10px;
    background-position: -5390px 0px;
  }

.drip-lightbox .iti__flag.iti__vi {
    height: 14px;
    background-position: -5412px 0px;
  }

.drip-lightbox .iti__flag.iti__vn {
    height: 14px;
    background-position: -5434px 0px;
  }

.drip-lightbox .iti__flag.iti__vu {
    height: 12px;
    background-position: -5456px 0px;
  }

.drip-lightbox .iti__flag.iti__wf {
    height: 14px;
    background-position: -5478px 0px;
  }

.drip-lightbox .iti__flag.iti__ws {
    height: 10px;
    background-position: -5500px 0px;
  }

.drip-lightbox .iti__flag.iti__xk {
    height: 15px;
    background-position: -5522px 0px;
  }

.drip-lightbox .iti__flag.iti__ye {
    height: 14px;
    background-position: -5544px 0px;
  }

.drip-lightbox .iti__flag.iti__yt {
    height: 14px;
    background-position: -5566px 0px;
  }

.drip-lightbox .iti__flag.iti__za {
    height: 14px;
    background-position: -5588px 0px;
  }

.drip-lightbox .iti__flag.iti__zm {
    height: 14px;
    background-position: -5610px 0px;
  }

.drip-lightbox .iti__flag.iti__zw {
    height: 10px;
    background-position: -5632px 0px;
  }

.drip-lightbox .iti__flag {
    height: 15px;
    box-shadow: 0px 0px 1px 0px #888;
    background-image: url("flags.png");
    background-repeat: no-repeat;
    background-position: 20px 0;
  }

.drip-lightbox .iti__flag.iti__np {
  background-color: transparent;
}

.drip-lightbox .iti__flag {
  background-image: url("https://d14jnfavjicsbe.cloudfront.net/images/client/flags.png");
};

@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  .drip-lightbox .iti__flag {
    background-image: url("https://d14jnfavjicsbe.cloudfront.net/images/client/flags@2x.png");
  }
}

/* stylelint-enable */


  /* preview settings */
  body.after-submit-preview .drip-panel:not(.drip-success) {
    display: none !important;
  }
  body.after-submit-preview .drip-success {
    display: block !important;
  }
  /* stylelint-enable */

</style><style type="text/css">
  /* === Form-Specific Styles === */
  /* stylelint-disable */

  #drip-106703 {
  }

  #drip-106703 .drip-header {
    background-color: #43ac6a !important;
  }

  #drip-106703 .drip-content h3 {
    color: #43ac6a !important;
    font-size: 29px !important;
  }

  #drip-106703 .drip-submit-button {
    background-color: #43ac6a !important;
    font-size: 19px !important;
  }

  #drip-106703 .drip-submit-button:hover {
    background-color: #40a365 !important;
  }

  #drip-106703 .drip-submit-button:active {
    background-color: #3c9b5f !important;
  }

  #drip-106703 .drip-submit-button:disabled {
    background-color: #a1d6b5 !important;
  }

  #drip-106703 dl dt,
  #drip-106703 .drip-content .drip-description,
  #drip-106703 .drip-errors {
    font-size: 18px !important;
  }

  #drip-106703 .drip-text-field,
  #drip-106703 .drip-radio-buttons,
  #drip-106703 .drip-dropdown-select {
    font-size: 18px !important;
  }

  /* === Reset styles === */

  .drip-tab h1,
  .drip-tab h2,
  .drip-tab h3,
  .drip-tab dl,
  .drip-tab dt,
  .drip-tab dd,
  .drip-tab p,
  .drip-tab a,
  .drip-tab .drip-text-field,
  .drip-tab .drip-radio-buttons,
  .drip-tab .drip-text-field:focus,
  .drip-tab .drip-submit-button {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
    float: none;
    width: auto;
    background-image: none;
    letter-spacing: 0;
    -webkit-box-shadow: none;
       -moz-box-shadow: none;
            box-shadow: none;
    -webkit-text-shadow: none !important;
       -moz-text-shadow: none !important;
            text-shadow: none !important;
  }

  .drip-tab a {
    text-decoration: none;
    color: #43ac6a !important;
  }

  .drip-tab :focus {
    outline: 0;
  }

  /* === Clearfix === */

  .drip-clearfix:after {
    visibility: hidden;
    display: block;
    font-size: 0;
    content: " ";
    clear: both;
    height: 0;
  }
  * html .drip-clearfix             { zoom: 1; } /* IE6 */
  *:first-child+html .drip-clearfix { zoom: 1; } /* IE7 */

  /* === Main Container === */

  .drip-tab-container * {
    box-sizing: content-box;
  }

  /* === Content === */

  .drip-tab .drip-content {
    margin: 0;
    padding: 0;
    width: 380px;
    position: fixed;
    font-size: 100%;
    font: inherit;
    z-index: 10000;
    color: #333;
    vertical-align: baseline;
    text-align: left;
    background-color: #ffffff;
    -webkit-box-shadow: 0px 10px 28px rgba(0,0,0,0.36);
       -moz-box-shadow: 0px 10px 28px rgba(0,0,0,0.36);
            box-shadow: 0px 10px 28px rgba(0,0,0,0.36);
  }

  .drip-tab.bottom .drip-content {
    bottom: -800px;
    -webkit-border-radius: 8px 8px 0 0;
       -moz-border-radius: 8px 8px 0 0;
            border-radius: 8px 8px 0 0;
    -webkit-transition: bottom 200ms ease-in;
       -moz-transition: bottom 200ms ease-in;
         -o-transition: bottom 200ms ease-in;
            transition: bottom 200ms ease-in;
  }

  .drip-tab.bottom.left .drip-content {
    left: 40px;
  }

  .drip-tab.bottom.right .drip-content {
    right: 40px;
  }

  .drip-tab.side-image .drip-content {
    width: 650px;
  }

  .drip-tab.side .drip-content {
    top: 10%;
  }

  .drip-tab.side.right .drip-content {
    right: -675px;
    -webkit-border-radius: 8px 0 0 8px;
       -moz-border-radius: 8px 0 0 8px;
            border-radius: 8px 0 0 8px;
    -webkit-transition: right 200ms ease-in;
       -moz-transition: right 200ms ease-in;
         -o-transition: right 200ms ease-in;
            transition: right 200ms ease-in;
  }

  .drip-tab.side.left .drip-content {
    left: -675px;
    -webkit-border-radius: 0 8px 8px 0;
       -moz-border-radius: 0 8px 8px 0;
            border-radius: 0 8px 8px 0;
    -webkit-transition: left 200ms ease-in;
       -moz-transition: left 200ms ease-in;
         -o-transition: left 200ms ease-in;
            transition: left 200ms ease-in;
  }

  .drip-tab.mobile .drip-content {
    width: 100% !important;
    bottom: -800px;
    left: 0;
    -webkit-border-radius: 0;
       -moz-border-radius: 0;
            border-radius: 0;
    -webkit-transition: bottom 200ms ease-in;
       -moz-transition: bottom 200ms ease-in;
         -o-transition: bottom 200ms ease-in;
            transition: bottom 200ms ease-in;
  }

  .drip-tab.drip-scrollable .drip-content {
    overflow-y: scroll;
  }

  /* === Header === */

  .drip-tab .drip-header {
    margin: 0;
    padding: 0;
    position: fixed;
    font-size: 100%;
    font: inherit;
    z-index: 10000;
    color: #333;
    vertical-align: baseline;
    text-align: left;
    -webkit-border-radius: 8px 8px 0 0;
       -moz-border-radius: 8px 8px 0 0;
            border-radius: 8px 8px 0 0;
    -webkit-box-shadow: 0px 10px 28px rgba(0,0,0,0.36);
       -moz-box-shadow: 0px 10px 28px rgba(0,0,0,0.36);
            box-shadow: 0px 10px 28px rgba(0,0,0,0.36);
  }

  .drip-tab.bottom .drip-header {
    width: 380px;
    bottom: 0;
    -webkit-transition: bottom 200ms ease-in;
       -moz-transition: bottom 200ms ease-in;
         -o-transition: bottom 200ms ease-in;
            transition: bottom 200ms ease-in;
  }

  .drip-tab.bottom .drip-header.drip-hidden {
    bottom: -800px;
  }

  .drip-tab.bottom.left .drip-header {
    left: 40px;
  }

  .drip-tab.bottom.right .drip-header {
    right: 40px;
  }

  .drip-tab.bottom.image-left .drip-header,
  .drip-tab.bottom.image-right .drip-header {
    width: 510px;
  }

  .drip-tab.side .drip-header {
    width: 340px;
    top: 10%;
  }

  .drip-tab.side.right .drip-header {
    right: -100px;
    -webkit-transition: right 400ms ease-in;
       -moz-transition: right 400ms ease-in;
         -o-transition: right 400ms ease-in;
            transition: right 400ms ease-in;
    -webkit-transform: rotate(-90deg) !important;
       -moz-transform: rotate(-90deg) !important;
        -ms-transform: rotate(-90deg) !important;
         -o-transform: rotate(-90deg) !important;
            transform: rotate(-90deg) !important;
    -webkit-transform-origin: right center;
       -moz-transform-origin: right center;
         -o-transform-origin: right center;
            transform-origin: right center;
  }

  .drip-tab.side.right .drip-header.drip-hidden {
    right: -100px;
  }

  .drip-tab.side.left .drip-header {
    left: -100px;
    -webkit-transition: left 400ms ease-in;
       -moz-transition: left 400ms ease-in;
         -o-transition: left 400ms ease-in;
            transition: left 400ms ease-in;
    -webkit-transform: rotate(90deg) !important;
       -moz-transform: rotate(90deg) !important;
        -ms-transform: rotate(90deg) !important;
         -o-transform: rotate(90deg) !important;
            transform: rotate(90deg) !important;
    -webkit-transform-origin: left center;
       -moz-transform-origin: left center;
         -o-transform-origin: left center;
            transform-origin: left center;
  }

  .drip-tab.side.left .drip-header.drip-hidden {
    left: -100px;
  }

  .drip-tab.mobile .drip-header {
    width: 100% !important;
    bottom: 0;
    left: 0;
    -webkit-border-radius: 0;
       -moz-border-radius: 0;
            border-radius: 0;
    -webkit-transition: bottom 200ms ease-in;
       -moz-transition: bottom 200ms ease-in;
         -o-transition: bottom 200ms ease-in;
            transition: bottom 200ms ease-in;
  }

  .drip-tab.mobile .drip-header.drip-hidden {
    bottom: -300px;
  }

  /* === Header Toggle === */

  .drip-tab .drip-toggle {
    display: block;
    text-decoration: none;
    padding: 10px 50px 10px 25px; /* extra padding for the arrow */
  }

  /* === Teaser === */

  .drip-tab .drip-header h2 {
    display: block;
    margin: 0 !important;
    padding: 0 !important;
    border: 0 !important;
    font-size: 16px !important;
    line-height: 1.5 !important;
    font-weight: bold !important;
    text-align: left !important;
    color: #fff !important;
    clear: none !important;
    letter-spacing: 0 !important;
    width: auto !important;
  }

  /* === Arrows === */

  .drip-tab .drip-header span.drip-arrow {
    display: block;
    position: absolute;
    margin: 0;
    padding: 0;
    width: 0;
    height: 0;
    line-height: 0;
    top: 20px;
    right: 32px;
  }

  /* === Panel === */

  .drip-tab .drip-content > div.drip-panel {
    padding: 25px;
    background-color: #fff;
    -webkit-border-radius: 6px;
       -moz-border-radius: 6px;
            border-radius: 6px;
  }

  .drip-tab.bottom .drip-content > div.drip-panel {
    -webkit-border-radius: 6px 6px 0 0;
       -moz-border-radius: 6px 6px 0 0;
            border-radius: 6px 6px 0 0;
  }

  .drip-tab.side.left .drip-content > div.drip-panel {
    -webkit-border-radius: 0 6px 6px 0;
       -moz-border-radius: 0 6px 6px 0;
            border-radius: 0 6px 6px 0;
  }

  .drip-tab.side.right .drip-content > div.drip-panel  {
    -webkit-border-radius: 6px 0 0 6px;
       -moz-border-radius: 6px 0 0 6px;
            border-radius: 6px 0 0 6px;
  }

  /* === Content Sections === */

  .drip-tab.side-image .drip-form-aside {
    width: 245px;
    text-align: center;
  }

  .drip-tab.image-left .drip-form-main {
    margin-left: 270px;
  }

  .drip-tab.image-right .drip-form-main {
    margin-right: 270px;
  }

  .drip-tab.image-left .drip-form-aside {
    float: left;
  }

  .drip-tab.image-right .drip-form-aside {
    float: right;
  }

  @media screen and (max-width: 650px) {
    .drip-tab.side-image .drip-content {
      width: 380px;
    }

    .drip-tab.side-image .drip-form-main {
      margin-left: 0;
      margin-right: 0;
    }

    .drip-tab.side-image .drip-form-aside {
      display: none;
    }
  }

  /* === Content Headings & Paragraphs === */

  .drip-tab .drip-content h3 {
    display: block;
    margin: 0 20px 0 0 !important;
    padding: 0 0 15px 0 !important;
    line-height: 1.4 !important;
    font-weight: bold !important;
    text-align: left !important;
    color: #4477bd !important;
    clear: none !important;
  }

  .drip-tab .drip-content .drip-description {
    margin: 0;
    padding: 0 0 20px 0;
    line-height: 1.4;
    text-align: left;
    color: #4F5362;
  }

  .drip-tab .drip-content .drip-post-submission {
    padding: 0;
  }

  .drip-tab .drip-content .drip-description a {
    text-decoration: underline;
  }

  .drip-tab .drip-content .drip-description em {
    font-style: italic;
  }

  .drip-tab .drip-content .drip-description ul,
  .drip-tab .drip-content .drip-description ol {
    list-style-position: outside;
    margin: 8px 0 8px 30px;
  }

  .drip-tab .drip-content .drip-description ul li
  .drip-tab .drip-content .drip-description ol li {
    padding: 0;
  }

  .drip-tab .drip-content .drip-image-center-helper {
    display: inline-block;
    height: 100%;
    vertical-align: middle;
  }

  .drip-tab .drip-content img.drip-image {
    max-width: 245px;
    vertical-align: middle;
  }

  .drip-tab .drip-content a.drip-close {
    position: absolute;
    right: 25px;
    top: 25px;
  }

  .drip-tab .drip-content a.drip-close:hover {
    cursor: pointer;
  }

  /* === Content Subscribe Form === */

  .drip-tab form {
    margin: 0 !important;
    padding: 0 !important;
  }

  .drip-tab dl {
    display: block;
    margin: 0;
    padding: 0 0 5px 0;
  }

  .drip-tab dl dt {
    display: block;
    padding: 0 0 5px 0;
    font-weight: bold;
    color: #4F5362;
  }

  .drip-tab dl.no-labels dt.label-for-type-text,
  .drip-tab dl.no-labels dt.label-for-type-dropdown,
  .drip-tab dl.no-labels dt.label-for-type-email {
    display: none;
  }

  .drip-tab dl dd {
    display: block;
    padding: 0 0 8px 0;
  }

  .drip-tab .drip-text-field {
    margin: 0 !important;
    height: 40px !important;
    width: 100% !important;
    color: #4F5362 !important;
    background-color: #fff !important;
    border: 1px solid #A8ACB9 !important;
    -webkit-border-radius: 3px !important;
       -moz-border-radius: 3px !important;
            border-radius: 3px !important;
    -webkit-box-sizing: border-box !important;
       -moz-box-sizing: border-box !important;
        -ms-box-sizing: border-box !important;
            box-sizing: border-box !important;
    background-image: none !important;
    min-width: 0 !important;
    min-height: 0 !important;
  }

  .drip-tab .drip-text-field,
  .drip-tab .drip-dropdown-select select {
    padding: 10px 12px !important;
  }

  .drip-tab .drip-text-field::-webkit-input-placeholder { /* WebKit browsers */
    color: #A8ACB9 !important;
  }
  .drip-tab .drip-text-field:-moz-placeholder { /* Mozilla Firefox 4 to 18 */
    color: #A8ACB9 !important;
  }
  .drip-tab .drip-text-field::-moz-placeholder { /* Mozilla Firefox 19+ */
    color: #A8ACB9 !important;
  }
  .drip-tab .drip-text-field:-ms-input-placeholder { /* Internet Explorer 10+ */
    color: #A8ACB9 !important;
  }

  .drip-tab .drip-text-field:focus {
    border-color: #9398a9 !important;
    outline: 0;
    background-image: none;
    background-color: #fff !important;
  }

  .drip-tab.mobile .drip-text-field {
    font-size: 16px;
  }

  .drip-tab .drip-errors:not(:empty) {
    padding: 5px 0 0 0;
    font-weight: normal;
    color: red;
  }

  /* RADIOS */

  .drip-tab .drip-radio-buttons,
  .drip-tab .drip-radio-buttons * {
    box-sizing: border-box;
  }
  .drip-tab .drip-radio-buttons h4 {
    font-family: inherit;
    font-weight: bold;
    font-size: 21px;
    margin: 0 0 3px;
    padding: 0;
  }

  .drip-tab .drip-radio-button {
    width: 100%;
    display: block;
    position: relative;
    margin-bottom: 6px;
  }

  .drip-tab .drip-radio-button input[type="radio"] {
    height: 0;
    width: 0;
    opacity: 0;
    position: absolute;
    top: 0;
    left: 0;
    display: inline-block;
    border: none;
    padding: 0;
    margin: 0;
  }

  .drip-tab .drip-radio-button label {
    font-size: 21px;
    padding-left: 30px;
    color: #262626;
    white-space: normal;
    word-break: normal;
    cursor: pointer;
  }

  .drip-tab .drip-radio-button label:before {
    content: "";
    display: block;
    background: #f5f5f5;
    width: 18px;
    height: 18px;
    position: absolute;
    top: 50%;
    left: 0;
    transform: translateY(-50%);
    border-radius: 9px;
    border: 1px solid #cccccc;
    box-sizing: border-box;
    padding: 1px;
    transition: background 300ms ease-out, border-color 300ms, border-width 300ms ease-in;
  }
  .drip-tab .drip-radio-button label:hover:before {
    border-color: #43ac6a;
  }

  .drip-tab .drip-radio-button input[type="radio"]:checked ~ label:before {
    background-color: #ffffff;
    border: 5px solid #43ac6a;
  }

  /* DROPDOWNS */

  /* stylelint-disable */

.drip-tab .drip-dropdown-select h4 {
  font-family: inherit;
  font-weight: bold;
  font-size: 21px;
  margin: 0 0 3px;
  padding: 0;
}

.drip-tab .drip-dropdown-select select {
  display: block;
  box-shadow: none;
  position: relative;
  border: 1px solid #A8ACB9;
  outline: none;
  border-radius: 3px;
  line-height: inherit;
  font-family: inherit;
  color: #262626;
  transition: border-color 300ms;
  width: 100%;
  max-width: 100%; /* useful when width is set to anything other than 100% */
  box-sizing: border-box;

  -moz-appearance: none;
  -webkit-appearance: none;
  appearance: none;
  background-color: #fff;
  /* note: bg image below uses 2 urls. The first is an svg data uri for the arrow
    icon, and the second is the gradient. for the icon, if you want to change the
    color, be sure to use `%23` instead of `#`, since it's a url. You can also
    swap in a different svg icon or an external image reference
  */
  background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23262626%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E'),
    linear-gradient(to bottom, #ffffff 0%, #ffffff 100%);
  background-repeat: no-repeat, repeat;
  /* arrow icon position (1em from the right, 50% vertical) , then gradient position*/
  background-position: right 12px top 50%, 0 0;
  /* icon size, then gradient */
  background-size: 12px auto, 100%;
}

/* Hide arrow icon in IE browsers */
.drip-tab .drip-dropdown-select select::-ms-expand {
  display: none;
}

/* Hover style */
.drip-tab .drip-dropdown-select select:hover {
  border-color: #888;
}

/* Focus style */
.drip-tab .drip-dropdown-select select:focus {
  border-color: #A8ACB9;
  /* It'd be nice to use -webkit-focus-ring-color here but it doesn't work on box-shadow */
  /* box-shadow: 0 0 1px 3px rgba(59, 153, 252, .7);
  box-shadow: 0 0 0 3px -moz-mac-focusring;
  color: #222; */
  outline: none;
}

/* Set options to normal weight */
.drip-tab .drip-dropdown-select select option {
  font-weight:normal;
}

/* Support for rtl text, explicit support for Arabic and Hebrew */
*[dir="rtl"] .drip-tab .drip-dropdown-select select,
:root:lang(ar) .drip-tab .drip-dropdown-select select,
:root:lang(iw) .drip-tab .drip-dropdown-select select {
  background-position: left 12px top 50%, 0 0;
  padding: .6em .8em .5em 1.4em;
}

/* Disabled styles */
.drip-tab .drip-dropdown-select select:disabled,
.drip-tab .drip-dropdown-select select[aria-disabled=true] {
  color: graytext;
  background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22graytext%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E'),
    linear-gradient(to bottom, #ffffff 0%,#e5e5e5 100%);
}
.drip-tab .drip-dropdown-select select:disabled:hover,
.drip-tab .drip-dropdown-select select[aria-disabled=true] {
  border-color: #aaa;
}

/* stylelint-enable */


  /* SUBMIT BUTTON */

  .drip-tab .drip-submit-button {
    padding: 6px 26px !important;
    color: #ffffff !important;
    font-weight: bold !important;
    line-height: 1.6 !important;
    border: 0 !important;
    -webkit-border-radius: 3px !important;
       -moz-border-radius: 3px !important;
            border-radius: 3px !important;
    cursor: pointer !important;
    background-image: none !important;
    min-width: 0 !important;
    min-height: 0 !important;
    height: auto;
    transition: background 0.2s ease !important;
  }

  .drip-tab .drip-submit-button:hover {
    background-image: none !important;
  }

  .drip-tab .drip-submit-button:active {
    background-image: none !important;
  }

  /* checkbox */

  .drip-tab input,
  .drip-tab textarea {
    box-sizing: border-box;
    display: block;
    box-shadow: none;
    position: relative;
    border: 1px solid #cccccc;
    outline: none;
    border-radius: 3px;
    font: inherit;
    color: #262626;
    padding: 12px 18px;
    transition: border-color 300ms;
    width: 100%;
    -moz-appearance: none;
    -webkit-appearance: none;
    appearance: none;
  }

  .drip-tab .zenput--checkbox.hidden {
    margin-bottom: -8px;
    display: none;
  }

  .drip-tab .zenput--checkbox input[type="checkbox"] {
    height: 0;
    width: 0;
    opacity: 0;
    position: absolute;
    top: 0;
    left: 0;
  }

  .drip-tab .zenput--checkbox input[type="checkbox"] ~ .zenput__checkbox-label {
    font: inherit;
    font-size: 16px;
    line-height: 30px;
    color: #262626;
    cursor: pointer;
    white-space: normal;
    word-break: normal;
    display: block;
    padding-left: 36px;
    position: relative;
    transition: color 300ms;
  }

  .drip-tab .zenput--checkbox input[type="checkbox"]~ .zenput__checkbox-label .zenput__checkbox-label__icon {
    content: "";
    display: block;
    background: #f5f5f5;
    width: 24px;
    height: 24px;
    position: absolute;
    top: 3px;
    left: 0;
    border-radius: 3px;
    border: 1px solid #cccccc;
    box-sizing: border-box;
    padding: 3px;
    transition: background 300ms ease-out, border-color 300ms;
  }

  .drip-tab .zenput--checkbox input[type="checkbox"] ~ .zenput__checkbox-label .zenput__checkbox-label__icon svg {
    opacity: 0;
    width: 16px;
    display: block;
    fill: #cccccc;
    transition: opacity 300ms ease-out;
  }

  .drip-tab .zenput--checkbox input[type="checkbox"]:checked ~ .zenput__checkbox-label {
    color: #333 !important;
  }
  .drip-tab .zenput--checkbox input[type="checkbox"]:checked ~ .zenput__checkbox-label .zenput__checkbox-label__icon {
    background-color: #ffffff;
    border-color: #a8acb9;
  }
  .drip-tab .zenput--checkbox input[type="checkbox"]:checked ~ .zenput__checkbox-label .zenput__checkbox-label__icon svg {
    fill: #43ac6a !important;
    opacity: 1;
  }

  /* hover state */

  .drip-tab .zenput--checkbox input:not([disabled]):not(:checked) ~ .zenput__checkbox-label:hover {
    color: #262626;
  }

  .drip-tab .zenput--checkbox input:not([disabled]):not(:checked) ~ .zenput__checkbox-label:hover  .zenput__checkbox-label__icon {
    border-color: var(--gray-9);
  }

  .drip-tab .zenput--checkbox input:not([disabled]):not(:checked) ~ .zenput__checkbox-label:hover  .zenput__checkbox-label__icon svg {
    opacity: 1;
  }

  /* active state */

  .drip-tab .zenput--checkbox input:not([disabled]) ~ .zenput__checkbox-label:active {
    color: #f224f2;
  }

  /* focus state */

  .drip-tab .zenput--checkbox input:not([disabled]) ~ .zenput__checkbox-label:focus .zenput__checkbox-label__icon,
  .drip-tab .zenput--checkbox input:not([disabled]):focus ~ .zenput__checkbox-label .zenput__checkbox-label__icon {
    border-color: #262626;
  }

  /* telephone input */
  /* stylelint-disable */

.drip-tab .iti + .zenput--checkbox {
  margin-top: 10px;
}

.drip-tab .iti {
  position: relative;
  display: block;
}

.drip-tab .iti * {
  box-sizing: border-box;
  -moz-box-sizing: border-box;
}

.drip-tab .iti__hide {
  display: none;
}

.drip-tab .iti__v-hide {
  visibility: hidden;
}

.drip-tab .iti input,
.drip-tab .iti input[type=text],
.drip-tab .iti input[type=tel] {
  position: relative;
  z-index: 0;
  width: 100%;
  padding: 0 0 0 36px;
  margin: 0 !important;
}

  .drip-tab .iti input,
  .drip-tab .iti input[type=text],
  .drip-tab .iti input[type=tel] {
    height: 42px;
    border: 1px solid #A8ACB9 !important;
    border-radius: 3px !important;
  }

.drip-tab .iti__flag-container {
  position: absolute;
  top: 0;
  bottom: 0;
  right: 0;
  padding: 1px;
}

.drip-tab .iti__selected-flag {
  z-index: 1;
  position: relative;
  display: flex;
  align-items: center;
  height: 100%;
  padding: 0 6px 0 8px;
}

.drip-tab .iti__arrow {
  margin-left: 6px;
  width: 0;
  height: 0;
  border-left: 3px solid transparent;
  border-right: 3px solid transparent;
  border-top: 4px solid #555;
}

.drip-tab .iti__arrow--up {
  border-top: none;
  border-bottom: 4px solid #555;
}

.drip-tab .iti__country-list {
  position: absolute;
  z-index: 2;
  list-style: none;
  text-align: left;
  padding: 0;
  margin: 0 0 0 -1px;
  box-shadow: 1px 1px 4px rgba(0, 0, 0, 0.2);
  background-color: white;
  border: 1px solid #CCC;
  white-space: nowrap;
  max-height: 200px;
  width: 320px;
  overflow-y: scroll;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
}

.drip-tab .iti__country-list--dropup {
  bottom: 100%;
  margin-bottom: -1px;
}

@media (max-width: 500px) {
  .drip-tab .iti__country-list {
    white-space: normal;
  }
}

.drip-tab .iti__flag-box {
  display: inline-block;
  width: 20px;
}

.drip-tab .iti__divider {
  padding-bottom: 5px;
  margin-bottom: 5px;
  border-bottom: 1px solid #CCC;
}

.drip-tab .iti__country {
  padding: 5px 10px;
  outline: none;
}

.drip-tab .iti__dial-code {
  color: #999;
}

.drip-tab .iti__country.iti__highlight {
  background-color: rgba(0, 0, 0, 0.05);
}

.drip-tab .iti__flag-box,
.drip-tab .iti__country-name,
.drip-tab .iti__dial-code {
  vertical-align: middle;
}

.drip-tab .iti__flag-box,
.drip-tab .iti__country-name {
  margin-right: 6px;
}

.drip-tab .iti--allow-dropdown input,
.drip-tab .iti--allow-dropdown input[type=text],
.drip-tab .iti--allow-dropdown input[type=tel],
.drip-tab .iti--separate-dial-code input,
.drip-tab .iti--separate-dial-code input[type=text],
.drip-tab .iti--separate-dial-code input[type=tel] {
  padding-right: 6px;
  padding-left: 52px;
  margin-left: 0;
}

.drip-tab .iti--allow-dropdown .iti__flag-container,
.drip-tab .iti--separate-dial-code .iti__flag-container {
  right: auto;
  left: 0;
}

.drip-tab .iti--allow-dropdown .iti__flag-container:hover {
  cursor: pointer;
}

.drip-tab .iti--allow-dropdown .iti__flag-container:hover .iti__selected-flag {
  background-color: rgba(0, 0, 0, 0.05);
}

.drip-tab .iti--allow-dropdown input[disabled]+.iti__flag-container:hover,
.drip-tab .iti--allow-dropdown input[readonly]+.iti__flag-container:hover {
  cursor: default;
}

.drip-tab .iti--allow-dropdown input[disabled]+.iti__flag-container:hover .iti__selected-flag,
.drip-tab .iti--allow-dropdown input[readonly]+.iti__flag-container:hover .iti__selected-flag {
  background-color: transparent;
}

.drip-tab .iti--separate-dial-code .iti__selected-flag {
  background-color: rgba(0, 0, 0, 0.05);
}

.drip-tab .iti--separate-dial-code .iti__selected-dial-code {
  margin-left: 6px;
}

.drip-tab .iti--container {
  position: absolute;
  top: -1000px;
  left: -1000px;
  z-index: 1060;
  padding: 1px;
}

.drip-tab .iti--container:hover {
  cursor: pointer;
}

.iti-mobile .drip-tab  .iti--container {
  top: 30px;
  bottom: 30px;
  left: 30px;
  right: 30px;
  position: fixed;
}

.iti-mobile .drip-tab .iti__country-list {
  max-height: 100%;
  width: 100%;
}

.iti-mobile .drip-tab .iti__country {
  padding: 10px 10px;
  line-height: 1.5em;
}

.drip-tab .sms-subtext {
  margin-top: .75em;
  font-size: .75em;
  line-height: 1.4;
  display: inline-block;
}

.drip-tab .sms-subtext a {
  text-decoration: underline;
  cursor: pointer;
}

.drip-tab .iti__flag {
  width: 20px;
}

.drip-tab .iti__flag.iti__be {
  width: 18px;
}

.drip-tab .iti__flag.iti__ch {
  width: 15px;
}

.drip-tab .iti__flag.iti__mc {
  width: 19px;
}

.drip-tab .iti__flag.iti__ne {
  width: 18px;
}

.drip-tab .iti__flag.iti__np {
  width: 13px;
}

.drip-tab .iti__flag.iti__va {
  width: 15px;
}

@media (-webkit-min-device-pixel-ratio: 2),
(min-resolution: 192dpi) {
  .drip-tab .iti__flag {
    background-size: 5652px 15px;
  }
}

.drip-tab .iti__flag.iti__ac {
    height: 10px;
    background-position: 0px 0px;
  }

.drip-tab .iti__flag.iti__ad {
    height: 14px;
    background-position: -22px 0px;
  }

.drip-tab .iti__flag.iti__ae {
    height: 10px;
    background-position: -44px 0px;
  }

.drip-tab .iti__flag.iti__af {
    height: 14px;
    background-position: -66px 0px;
  }

.drip-tab .iti__flag.iti__ag {
    height: 14px;
    background-position: -88px 0px;
  }

.drip-tab .iti__flag.iti__ai {
    height: 10px;
    background-position: -110px 0px;
  }

.drip-tab .iti__flag.iti__al {
    height: 15px;
    background-position: -132px 0px;
  }

.drip-tab .iti__flag.iti__am {
    height: 10px;
    background-position: -154px 0px;
  }

.drip-tab .iti__flag.iti__ao {
    height: 14px;
    background-position: -176px 0px;
  }

.drip-tab .iti__flag.iti__aq {
    height: 14px;
    background-position: -198px 0px;
  }

.drip-tab .iti__flag.iti__ar {
    height: 13px;
    background-position: -220px 0px;
  }

.drip-tab .iti__flag.iti__as {
    height: 10px;
    background-position: -242px 0px;
  }

.drip-tab .iti__flag.iti__at {
    height: 14px;
    background-position: -264px 0px;
  }

.drip-tab .iti__flag.iti__au {
    height: 10px;
    background-position: -286px 0px;
  }

.drip-tab .iti__flag.iti__aw {
    height: 14px;
    background-position: -308px 0px;
  }

.drip-tab .iti__flag.iti__ax {
    height: 13px;
    background-position: -330px 0px;
  }

.drip-tab .iti__flag.iti__az {
    height: 10px;
    background-position: -352px 0px;
  }

.drip-tab .iti__flag.iti__ba {
    height: 10px;
    background-position: -374px 0px;
  }

.drip-tab .iti__flag.iti__bb {
    height: 14px;
    background-position: -396px 0px;
  }

.drip-tab .iti__flag.iti__bd {
    height: 12px;
    background-position: -418px 0px;
  }

.drip-tab .iti__flag.iti__be {
    height: 15px;
    background-position: -440px 0px;
  }

.drip-tab .iti__flag.iti__bf {
    height: 14px;
    background-position: -460px 0px;
  }

.drip-tab .iti__flag.iti__bg {
    height: 12px;
    background-position: -482px 0px;
  }

.drip-tab .iti__flag.iti__bh {
    height: 12px;
    background-position: -504px 0px;
  }

.drip-tab .iti__flag.iti__bi {
    height: 12px;
    background-position: -526px 0px;
  }

.drip-tab .iti__flag.iti__bj {
    height: 14px;
    background-position: -548px 0px;
  }

.drip-tab .iti__flag.iti__bl {
    height: 14px;
    background-position: -570px 0px;
  }

.drip-tab .iti__flag.iti__bm {
    height: 10px;
    background-position: -592px 0px;
  }

.drip-tab .iti__flag.iti__bn {
    height: 10px;
    background-position: -614px 0px;
  }

.drip-tab .iti__flag.iti__bo {
    height: 14px;
    background-position: -636px 0px;
  }

.drip-tab .iti__flag.iti__bq {
    height: 14px;
    background-position: -658px 0px;
  }

.drip-tab .iti__flag.iti__br {
    height: 14px;
    background-position: -680px 0px;
  }

.drip-tab .iti__flag.iti__bs {
    height: 10px;
    background-position: -702px 0px;
  }

.drip-tab .iti__flag.iti__bt {
    height: 14px;
    background-position: -724px 0px;
  }

.drip-tab .iti__flag.iti__bv {
    height: 15px;
    background-position: -746px 0px;
  }

.drip-tab .iti__flag.iti__bw {
    height: 14px;
    background-position: -768px 0px;
  }

.drip-tab .iti__flag.iti__by {
    height: 10px;
    background-position: -790px 0px;
  }

.drip-tab .iti__flag.iti__bz {
    height: 14px;
    background-position: -812px 0px;
  }

.drip-tab .iti__flag.iti__ca {
    height: 10px;
    background-position: -834px 0px;
  }

.drip-tab .iti__flag.iti__cc {
    height: 10px;
    background-position: -856px 0px;
  }

.drip-tab .iti__flag.iti__cd {
    height: 15px;
    background-position: -878px 0px;
  }

.drip-tab .iti__flag.iti__cf {
    height: 14px;
    background-position: -900px 0px;
  }

.drip-tab .iti__flag.iti__cg {
    height: 14px;
    background-position: -922px 0px;
  }

.drip-tab .iti__flag.iti__ch {
    height: 15px;
    background-position: -944px 0px;
  }

.drip-tab .iti__flag.iti__ci {
    height: 14px;
    background-position: -961px 0px;
  }

.drip-tab .iti__flag.iti__ck {
    height: 10px;
    background-position: -983px 0px;
  }

.drip-tab .iti__flag.iti__cl {
    height: 14px;
    background-position: -1005px 0px;
  }

.drip-tab .iti__flag.iti__cm {
    height: 14px;
    background-position: -1027px 0px;
  }

.drip-tab .iti__flag.iti__cn {
    height: 14px;
    background-position: -1049px 0px;
  }

.drip-tab .iti__flag.iti__co {
    height: 14px;
    background-position: -1071px 0px;
  }

.drip-tab .iti__flag.iti__cp {
    height: 14px;
    background-position: -1093px 0px;
  }

.drip-tab .iti__flag.iti__cr {
    height: 12px;
    background-position: -1115px 0px;
  }

.drip-tab .iti__flag.iti__cu {
    height: 10px;
    background-position: -1137px 0px;
  }

.drip-tab .iti__flag.iti__cv {
    height: 12px;
    background-position: -1159px 0px;
  }

.drip-tab .iti__flag.iti__cw {
    height: 14px;
    background-position: -1181px 0px;
  }

.drip-tab .iti__flag.iti__cx {
    height: 10px;
    background-position: -1203px 0px;
  }

.drip-tab .iti__flag.iti__cy {
    height: 14px;
    background-position: -1225px 0px;
  }

.drip-tab .iti__flag.iti__cz {
    height: 14px;
    background-position: -1247px 0px;
  }

.drip-tab .iti__flag.iti__de {
    height: 12px;
    background-position: -1269px 0px;
  }

.drip-tab .iti__flag.iti__dg {
    height: 10px;
    background-position: -1291px 0px;
  }

.drip-tab .iti__flag.iti__dj {
    height: 14px;
    background-position: -1313px 0px;
  }

.drip-tab .iti__flag.iti__dk {
    height: 15px;
    background-position: -1335px 0px;
  }

.drip-tab .iti__flag.iti__dm {
    height: 10px;
    background-position: -1357px 0px;
  }

.drip-tab .iti__flag.iti__do {
    height: 14px;
    background-position: -1379px 0px;
  }

.drip-tab .iti__flag.iti__dz {
    height: 14px;
    background-position: -1401px 0px;
  }

.drip-tab .iti__flag.iti__ea {
    height: 14px;
    background-position: -1423px 0px;
  }

.drip-tab .iti__flag.iti__ec {
    height: 14px;
    background-position: -1445px 0px;
  }

.drip-tab .iti__flag.iti__ee {
    height: 13px;
    background-position: -1467px 0px;
  }

.drip-tab .iti__flag.iti__eg {
    height: 14px;
    background-position: -1489px 0px;
  }

.drip-tab .iti__flag.iti__eh {
    height: 10px;
    background-position: -1511px 0px;
  }

.drip-tab .iti__flag.iti__er {
    height: 10px;
    background-position: -1533px 0px;
  }

.drip-tab .iti__flag.iti__es {
    height: 14px;
    background-position: -1555px 0px;
  }

.drip-tab .iti__flag.iti__et {
    height: 10px;
    background-position: -1577px 0px;
  }

.drip-tab .iti__flag.iti__eu {
    height: 14px;
    background-position: -1599px 0px;
  }

.drip-tab .iti__flag.iti__fi {
    height: 12px;
    background-position: -1621px 0px;
  }

.drip-tab .iti__flag.iti__fj {
    height: 10px;
    background-position: -1643px 0px;
  }

.drip-tab .iti__flag.iti__fk {
    height: 10px;
    background-position: -1665px 0px;
  }

.drip-tab .iti__flag.iti__fm {
    height: 11px;
    background-position: -1687px 0px;
  }

.drip-tab .iti__flag.iti__fo {
    height: 15px;
    background-position: -1709px 0px;
  }

.drip-tab .iti__flag.iti__fr {
    height: 14px;
    background-position: -1731px 0px;
  }

.drip-tab .iti__flag.iti__ga {
    height: 15px;
    background-position: -1753px 0px;
  }

.drip-tab .iti__flag.iti__gb {
    height: 10px;
    background-position: -1775px 0px;
  }

.drip-tab .iti__flag.iti__gd {
    height: 12px;
    background-position: -1797px 0px;
  }

.drip-tab .iti__flag.iti__ge {
    height: 14px;
    background-position: -1819px 0px;
  }

.drip-tab .iti__flag.iti__gf {
    height: 14px;
    background-position: -1841px 0px;
  }

.drip-tab .iti__flag.iti__gg {
    height: 14px;
    background-position: -1863px 0px;
  }

.drip-tab .iti__flag.iti__gh {
    height: 14px;
    background-position: -1885px 0px;
  }

.drip-tab .iti__flag.iti__gi {
    height: 10px;
    background-position: -1907px 0px;
  }

.drip-tab .iti__flag.iti__gl {
    height: 14px;
    background-position: -1929px 0px;
  }

.drip-tab .iti__flag.iti__gm {
    height: 14px;
    background-position: -1951px 0px;
  }

.drip-tab .iti__flag.iti__gn {
    height: 14px;
    background-position: -1973px 0px;
  }

.drip-tab .iti__flag.iti__gp {
    height: 14px;
    background-position: -1995px 0px;
  }

.drip-tab .iti__flag.iti__gq {
    height: 14px;
    background-position: -2017px 0px;
  }

.drip-tab .iti__flag.iti__gr {
    height: 14px;
    background-position: -2039px 0px;
  }

.drip-tab .iti__flag.iti__gs {
    height: 10px;
    background-position: -2061px 0px;
  }

.drip-tab .iti__flag.iti__gt {
    height: 13px;
    background-position: -2083px 0px;
  }

.drip-tab .iti__flag.iti__gu {
    height: 11px;
    background-position: -2105px 0px;
  }

.drip-tab .iti__flag.iti__gw {
    height: 10px;
    background-position: -2127px 0px;
  }

.drip-tab .iti__flag.iti__gy {
    height: 12px;
    background-position: -2149px 0px;
  }

.drip-tab .iti__flag.iti__hk {
    height: 14px;
    background-position: -2171px 0px;
  }

.drip-tab .iti__flag.iti__hm {
    height: 10px;
    background-position: -2193px 0px;
  }

.drip-tab .iti__flag.iti__hn {
    height: 10px;
    background-position: -2215px 0px;
  }

.drip-tab .iti__flag.iti__hr {
    height: 10px;
    background-position: -2237px 0px;
  }

.drip-tab .iti__flag.iti__ht {
    height: 12px;
    background-position: -2259px 0px;
  }

.drip-tab .iti__flag.iti__hu {
    height: 10px;
    background-position: -2281px 0px;
  }

.drip-tab .iti__flag.iti__ic {
    height: 14px;
    background-position: -2303px 0px;
  }

.drip-tab .iti__flag.iti__id {
    height: 14px;
    background-position: -2325px 0px;
  }

.drip-tab .iti__flag.iti__ie {
    height: 10px;
    background-position: -2347px 0px;
  }

.drip-tab .iti__flag.iti__il {
    height: 15px;
    background-position: -2369px 0px;
  }

.drip-tab .iti__flag.iti__im {
    height: 10px;
    background-position: -2391px 0px;
  }

.drip-tab .iti__flag.iti__in {
    height: 14px;
    background-position: -2413px 0px;
  }

.drip-tab .iti__flag.iti__io {
    height: 10px;
    background-position: -2435px 0px;
  }

.drip-tab .iti__flag.iti__iq {
    height: 14px;
    background-position: -2457px 0px;
  }

.drip-tab .iti__flag.iti__ir {
    height: 12px;
    background-position: -2479px 0px;
  }

.drip-tab .iti__flag.iti__is {
    height: 15px;
    background-position: -2501px 0px;
  }

.drip-tab .iti__flag.iti__it {
    height: 14px;
    background-position: -2523px 0px;
  }

.drip-tab .iti__flag.iti__je {
    height: 12px;
    background-position: -2545px 0px;
  }

.drip-tab .iti__flag.iti__jm {
    height: 10px;
    background-position: -2567px 0px;
  }

.drip-tab .iti__flag.iti__jo {
    height: 10px;
    background-position: -2589px 0px;
  }

.drip-tab .iti__flag.iti__jp {
    height: 14px;
    background-position: -2611px 0px;
  }

.drip-tab .iti__flag.iti__ke {
    height: 14px;
    background-position: -2633px 0px;
  }

.drip-tab .iti__flag.iti__kg {
    height: 12px;
    background-position: -2655px 0px;
  }

.drip-tab .iti__flag.iti__kh {
    height: 13px;
    background-position: -2677px 0px;
  }

.drip-tab .iti__flag.iti__ki {
    height: 10px;
    background-position: -2699px 0px;
  }

.drip-tab .iti__flag.iti__km {
    height: 12px;
    background-position: -2721px 0px;
  }

.drip-tab .iti__flag.iti__kn {
    height: 14px;
    background-position: -2743px 0px;
  }

.drip-tab .iti__flag.iti__kp {
    height: 10px;
    background-position: -2765px 0px;
  }

.drip-tab .iti__flag.iti__kr {
    height: 14px;
    background-position: -2787px 0px;
  }

.drip-tab .iti__flag.iti__kw {
    height: 10px;
    background-position: -2809px 0px;
  }

.drip-tab .iti__flag.iti__ky {
    height: 10px;
    background-position: -2831px 0px;
  }

.drip-tab .iti__flag.iti__kz {
    height: 10px;
    background-position: -2853px 0px;
  }

.drip-tab .iti__flag.iti__la {
    height: 14px;
    background-position: -2875px 0px;
  }

.drip-tab .iti__flag.iti__lb {
    height: 14px;
    background-position: -2897px 0px;
  }

.drip-tab .iti__flag.iti__lc {
    height: 10px;
    background-position: -2919px 0px;
  }

.drip-tab .iti__flag.iti__li {
    height: 12px;
    background-position: -2941px 0px;
  }

.drip-tab .iti__flag.iti__lk {
    height: 10px;
    background-position: -2963px 0px;
  }

.drip-tab .iti__flag.iti__lr {
    height: 11px;
    background-position: -2985px 0px;
  }

.drip-tab .iti__flag.iti__ls {
    height: 14px;
    background-position: -3007px 0px;
  }

.drip-tab .iti__flag.iti__lt {
    height: 12px;
    background-position: -3029px 0px;
  }

.drip-tab .iti__flag.iti__lu {
    height: 12px;
    background-position: -3051px 0px;
  }

.drip-tab .iti__flag.iti__lv {
    height: 10px;
    background-position: -3073px 0px;
  }

.drip-tab .iti__flag.iti__ly {
    height: 10px;
    background-position: -3095px 0px;
  }

.drip-tab .iti__flag.iti__ma {
    height: 14px;
    background-position: -3117px 0px;
  }

.drip-tab .iti__flag.iti__mc {
    height: 15px;
    background-position: -3139px 0px;
  }

.drip-tab .iti__flag.iti__md {
    height: 10px;
    background-position: -3160px 0px;
  }

.drip-tab .iti__flag.iti__me {
    height: 10px;
    background-position: -3182px 0px;
  }

.drip-tab .iti__flag.iti__mf {
    height: 14px;
    background-position: -3204px 0px;
  }

.drip-tab .iti__flag.iti__mg {
    height: 14px;
    background-position: -3226px 0px;
  }

.drip-tab .iti__flag.iti__mh {
    height: 11px;
    background-position: -3248px 0px;
  }

.drip-tab .iti__flag.iti__mk {
    height: 10px;
    background-position: -3270px 0px;
  }

.drip-tab .iti__flag.iti__ml {
    height: 14px;
    background-position: -3292px 0px;
  }

.drip-tab .iti__flag.iti__mm {
    height: 14px;
    background-position: -3314px 0px;
  }

.drip-tab .iti__flag.iti__mn {
    height: 10px;
    background-position: -3336px 0px;
  }

.drip-tab .iti__flag.iti__mo {
    height: 14px;
    background-position: -3358px 0px;
  }

.drip-tab .iti__flag.iti__mp {
    height: 10px;
    background-position: -3380px 0px;
  }

.drip-tab .iti__flag.iti__mq {
    height: 14px;
    background-position: -3402px 0px;
  }

.drip-tab .iti__flag.iti__mr {
    height: 14px;
    background-position: -3424px 0px;
  }

.drip-tab .iti__flag.iti__ms {
    height: 10px;
    background-position: -3446px 0px;
  }

.drip-tab .iti__flag.iti__mt {
    height: 14px;
    background-position: -3468px 0px;
  }

.drip-tab .iti__flag.iti__mu {
    height: 14px;
    background-position: -3490px 0px;
  }

.drip-tab .iti__flag.iti__mv {
    height: 14px;
    background-position: -3512px 0px;
  }

.drip-tab .iti__flag.iti__mw {
    height: 14px;
    background-position: -3534px 0px;
  }

.drip-tab .iti__flag.iti__mx {
    height: 12px;
    background-position: -3556px 0px;
  }

.drip-tab .iti__flag.iti__my {
    height: 10px;
    background-position: -3578px 0px;
  }

.drip-tab .iti__flag.iti__mz {
    height: 14px;
    background-position: -3600px 0px;
  }

.drip-tab .iti__flag.iti__na {
    height: 14px;
    background-position: -3622px 0px;
  }

.drip-tab .iti__flag.iti__nc {
    height: 10px;
    background-position: -3644px 0px;
  }

.drip-tab .iti__flag.iti__ne {
    height: 15px;
    background-position: -3666px 0px;
  }

.drip-tab .iti__flag.iti__nf {
    height: 10px;
    background-position: -3686px 0px;
  }

.drip-tab .iti__flag.iti__ng {
    height: 10px;
    background-position: -3708px 0px;
  }

.drip-tab .iti__flag.iti__ni {
    height: 12px;
    background-position: -3730px 0px;
  }

.drip-tab .iti__flag.iti__nl {
    height: 14px;
    background-position: -3752px 0px;
  }

.drip-tab .iti__flag.iti__no {
    height: 15px;
    background-position: -3774px 0px;
  }

.drip-tab .iti__flag.iti__np {
    height: 15px;
    background-position: -3796px 0px;
  }

.drip-tab .iti__flag.iti__nr {
    height: 10px;
    background-position: -3811px 0px;
  }

.drip-tab .iti__flag.iti__nu {
    height: 10px;
    background-position: -3833px 0px;
  }

.drip-tab .iti__flag.iti__nz {
    height: 10px;
    background-position: -3855px 0px;
  }

.drip-tab .iti__flag.iti__om {
    height: 10px;
    background-position: -3877px 0px;
  }

.drip-tab .iti__flag.iti__pa {
    height: 14px;
    background-position: -3899px 0px;
  }

.drip-tab .iti__flag.iti__pe {
    height: 14px;
    background-position: -3921px 0px;
  }

.drip-tab .iti__flag.iti__pf {
    height: 14px;
    background-position: -3943px 0px;
  }

.drip-tab .iti__flag.iti__pg {
    height: 15px;
    background-position: -3965px 0px;
  }

.drip-tab .iti__flag.iti__ph {
    height: 10px;
    background-position: -3987px 0px;
  }

.drip-tab .iti__flag.iti__pk {
    height: 14px;
    background-position: -4009px 0px;
  }

.drip-tab .iti__flag.iti__pl {
    height: 13px;
    background-position: -4031px 0px;
  }

.drip-tab .iti__flag.iti__pm {
    height: 14px;
    background-position: -4053px 0px;
  }

.drip-tab .iti__flag.iti__pn {
    height: 10px;
    background-position: -4075px 0px;
  }

.drip-tab .iti__flag.iti__pr {
    height: 14px;
    background-position: -4097px 0px;
  }

.drip-tab .iti__flag.iti__ps {
    height: 10px;
    background-position: -4119px 0px;
  }

.drip-tab .iti__flag.iti__pt {
    height: 14px;
    background-position: -4141px 0px;
  }

.drip-tab .iti__flag.iti__pw {
    height: 13px;
    background-position: -4163px 0px;
  }

.drip-tab .iti__flag.iti__py {
    height: 11px;
    background-position: -4185px 0px;
  }

.drip-tab .iti__flag.iti__qa {
    height: 8px;
    background-position: -4207px 0px;
  }

.drip-tab .iti__flag.iti__re {
    height: 14px;
    background-position: -4229px 0px;
  }

.drip-tab .iti__flag.iti__ro {
    height: 14px;
    background-position: -4251px 0px;
  }

.drip-tab .iti__flag.iti__rs {
    height: 14px;
    background-position: -4273px 0px;
  }

.drip-tab .iti__flag.iti__ru {
    height: 14px;
    background-position: -4295px 0px;
  }

.drip-tab .iti__flag.iti__rw {
    height: 14px;
    background-position: -4317px 0px;
  }

.drip-tab .iti__flag.iti__sa {
    height: 14px;
    background-position: -4339px 0px;
  }

.drip-tab .iti__flag.iti__sb {
    height: 10px;
    background-position: -4361px 0px;
  }

.drip-tab .iti__flag.iti__sc {
    height: 10px;
    background-position: -4383px 0px;
  }

.drip-tab .iti__flag.iti__sd {
    height: 10px;
    background-position: -4405px 0px;
  }

.drip-tab .iti__flag.iti__se {
    height: 13px;
    background-position: -4427px 0px;
  }

.drip-tab .iti__flag.iti__sg {
    height: 14px;
    background-position: -4449px 0px;
  }

.drip-tab .iti__flag.iti__sh {
    height: 10px;
    background-position: -4471px 0px;
  }

.drip-tab .iti__flag.iti__si {
    height: 10px;
    background-position: -4493px 0px;
  }

.drip-tab .iti__flag.iti__sj {
    height: 15px;
    background-position: -4515px 0px;
  }

.drip-tab .iti__flag.iti__sk {
    height: 14px;
    background-position: -4537px 0px;
  }

.drip-tab .iti__flag.iti__sl {
    height: 14px;
    background-position: -4559px 0px;
  }

.drip-tab .iti__flag.iti__sm {
    height: 15px;
    background-position: -4581px 0px;
  }

.drip-tab .iti__flag.iti__sn {
    height: 14px;
    background-position: -4603px 0px;
  }

.drip-tab .iti__flag.iti__so {
    height: 14px;
    background-position: -4625px 0px;
  }

.drip-tab .iti__flag.iti__sr {
    height: 14px;
    background-position: -4647px 0px;
  }

.drip-tab .iti__flag.iti__ss {
    height: 10px;
    background-position: -4669px 0px;
  }

.drip-tab .iti__flag.iti__st {
    height: 10px;
    background-position: -4691px 0px;
  }

.drip-tab .iti__flag.iti__sv {
    height: 12px;
    background-position: -4713px 0px;
  }

.drip-tab .iti__flag.iti__sx {
    height: 14px;
    background-position: -4735px 0px;
  }

.drip-tab .iti__flag.iti__sy {
    height: 14px;
    background-position: -4757px 0px;
  }

.drip-tab .iti__flag.iti__sz {
    height: 14px;
    background-position: -4779px 0px;
  }

.drip-tab .iti__flag.iti__ta {
    height: 10px;
    background-position: -4801px 0px;
  }

.drip-tab .iti__flag.iti__tc {
    height: 10px;
    background-position: -4823px 0px;
  }

.drip-tab .iti__flag.iti__td {
    height: 14px;
    background-position: -4845px 0px;
  }

.drip-tab .iti__flag.iti__tf {
    height: 14px;
    background-position: -4867px 0px;
  }

.drip-tab .iti__flag.iti__tg {
    height: 13px;
    background-position: -4889px 0px;
  }

.drip-tab .iti__flag.iti__th {
    height: 14px;
    background-position: -4911px 0px;
  }

.drip-tab .iti__flag.iti__tj {
    height: 10px;
    background-position: -4933px 0px;
  }

.drip-tab .iti__flag.iti__tk {
    height: 10px;
    background-position: -4955px 0px;
  }

.drip-tab .iti__flag.iti__tl {
    height: 10px;
    background-position: -4977px 0px;
  }

.drip-tab .iti__flag.iti__tm {
    height: 14px;
    background-position: -4999px 0px;
  }

.drip-tab .iti__flag.iti__tn {
    height: 14px;
    background-position: -5021px 0px;
  }

.drip-tab .iti__flag.iti__to {
    height: 10px;
    background-position: -5043px 0px;
  }

.drip-tab .iti__flag.iti__tr {
    height: 14px;
    background-position: -5065px 0px;
  }

.drip-tab .iti__flag.iti__tt {
    height: 12px;
    background-position: -5087px 0px;
  }

.drip-tab .iti__flag.iti__tv {
    height: 10px;
    background-position: -5109px 0px;
  }

.drip-tab .iti__flag.iti__tw {
    height: 14px;
    background-position: -5131px 0px;
  }

.drip-tab .iti__flag.iti__tz {
    height: 14px;
    background-position: -5153px 0px;
  }

.drip-tab .iti__flag.iti__ua {
    height: 14px;
    background-position: -5175px 0px;
  }

.drip-tab .iti__flag.iti__ug {
    height: 14px;
    background-position: -5197px 0px;
  }

.drip-tab .iti__flag.iti__um {
    height: 11px;
    background-position: -5219px 0px;
  }

.drip-tab .iti__flag.iti__un {
    height: 14px;
    background-position: -5241px 0px;
  }

.drip-tab .iti__flag.iti__us {
    height: 11px;
    background-position: -5263px 0px;
  }

.drip-tab .iti__flag.iti__uy {
    height: 14px;
    background-position: -5285px 0px;
  }

.drip-tab .iti__flag.iti__uz {
    height: 10px;
    background-position: -5307px 0px;
  }

.drip-tab .iti__flag.iti__va {
    height: 15px;
    background-position: -5329px 0px;
  }

.drip-tab .iti__flag.iti__vc {
    height: 14px;
    background-position: -5346px 0px;
  }

.drip-tab .iti__flag.iti__ve {
    height: 14px;
    background-position: -5368px 0px;
  }

.drip-tab .iti__flag.iti__vg {
    height: 10px;
    background-position: -5390px 0px;
  }

.drip-tab .iti__flag.iti__vi {
    height: 14px;
    background-position: -5412px 0px;
  }

.drip-tab .iti__flag.iti__vn {
    height: 14px;
    background-position: -5434px 0px;
  }

.drip-tab .iti__flag.iti__vu {
    height: 12px;
    background-position: -5456px 0px;
  }

.drip-tab .iti__flag.iti__wf {
    height: 14px;
    background-position: -5478px 0px;
  }

.drip-tab .iti__flag.iti__ws {
    height: 10px;
    background-position: -5500px 0px;
  }

.drip-tab .iti__flag.iti__xk {
    height: 15px;
    background-position: -5522px 0px;
  }

.drip-tab .iti__flag.iti__ye {
    height: 14px;
    background-position: -5544px 0px;
  }

.drip-tab .iti__flag.iti__yt {
    height: 14px;
    background-position: -5566px 0px;
  }

.drip-tab .iti__flag.iti__za {
    height: 14px;
    background-position: -5588px 0px;
  }

.drip-tab .iti__flag.iti__zm {
    height: 14px;
    background-position: -5610px 0px;
  }

.drip-tab .iti__flag.iti__zw {
    height: 10px;
    background-position: -5632px 0px;
  }

.drip-tab .iti__flag {
    height: 15px;
    box-shadow: 0px 0px 1px 0px #888;
    background-image: url("flags.png");
    background-repeat: no-repeat;
    background-position: 20px 0;
  }

.drip-tab .iti__flag.iti__np {
  background-color: transparent;
}

.drip-tab .iti__flag {
  background-image: url("https://d14jnfavjicsbe.cloudfront.net/images/client/flags.png");
};

@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  .drip-tab .iti__flag {
    background-image: url("https://d14jnfavjicsbe.cloudfront.net/images/client/flags@2x.png");
  }
}

/* stylelint-enable */


  /* preview settings */
  body.after-submit-preview .drip-panel:not(.drip-success) {
    display: none !important;
  }
  body.after-submit-preview .drip-success {
    display: block !important;
  }

  /* stylelint-enable */

</style><link rel="stylesheet" href="./Socket Programming in Python (Guide) – Real Python_files/OneSignalSDKStyles.css"></head>
<body>
<nav class="navbar fixed-top navbar-expand-lg navbar-dark flex-column nav-message">
<div class="container flex-row">
<a class="navbar-brand" href="https://realpython.com/">
<img src="./Socket Programming in Python (Guide) – Real Python_files/real-python-logo.893c30edea53.svg" height="40" class="d-inline-block align-top" alt="Real Python">
</a>
<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
<span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse navbar-nav-scroll" id="navbarSupportedContent">
<ul class="navbar-nav mr-2 flex-fill">
<li class="nav-item">
<a class="nav-link" href="https://realpython.com/start-here/">Start&nbsp;Here</a>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href="https://realpython.com/python-sockets/#" id="navbarDropdownLibrary" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
<span class="fa fa-graduation-cap"></span> Learn Python
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownLibrary">
<a class="dropdown-item" href="https://realpython.com/" style="color: #ff7e73; line-height: 110%;"><i class="fa fa-fw mr-1 fa-graduation-cap"></i> Python Tutorials →<br><small class="text-secondary">In-depth articles and tutorials</small></a>
<a class="dropdown-item" href="https://realpython.com/courses/" style="color: #abe5b1; line-height: 110%;"><i class="fa fa-fw mr-1 fa-film"></i> Video Courses →<br><small class="text-secondary">Step-by-step video lessons</small></a>
<a class="dropdown-item" href="https://realpython.com/quizzes/" style="color: #abe0e5; line-height: 110%;"><i class="fa fa-fw mr-1 fa-trophy"></i> Quizzes →<br><small class="text-secondary">Check your learning progress</small></a>
<a class="dropdown-item" href="https://realpython.com/learning-paths/" style="color: #ffc873; line-height: 110%;"><i class="fa fa-fw mr-1 fa-map-o"></i> Learning Paths →<br><small class="text-secondary">Guided study plans for accelerated learning</small></a>
<a class="dropdown-item" href="https://realpython.com/community/" style="color: #e5c6ab; line-height: 110%;"><i class="fa fa-fw mr-1 fa-slack"></i> Community →<br><small class="text-secondary">Learn with other Pythonistas</small></a>
<a class="dropdown-item pb-3" href="https://realpython.com/tutorials/all/" style="color: #b8abe5; line-height: 110%;"><i class="fa fa-fw mr-1 fa-tags"></i> Topics →<br><small class="text-secondary">Focus on a specific area or skill level</small></a>
<a class="dropdown-item border-top" href="https://realpython.com/account/join/"><i class="fa fa-fw fa-star text-warning"></i> Unlock All Content</a>
</div>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href="https://realpython.com/python-sockets/#" id="navbarDropdownBooksCourses" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
Store
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownBooksCourses">
<a class="dropdown-item" href="https://realpython.com/account/join/"><i class="fa fa-fw fa-star text-warning"></i> RP Membership</a>
<a class="dropdown-item" href="https://realpython.com/products/python-basics-book/">Python Basics Book</a>
<a class="dropdown-item" href="https://realpython.com/products/python-tricks-book/">Python Tricks Book</a>
<a class="dropdown-item" href="https://realpython.com/products/cpython-internals-book/">CPython Internals Book</a>
<a class="dropdown-item" href="https://realpython.com/products/real-python-course/">The Real Python Course</a>
<a class="dropdown-item" href="https://realpython.com/products/managing-python-dependencies/">Managing Python Dependencies</a>
<a class="dropdown-item" href="https://realpython.com/products/sublime-python/">Sublime Text + Python Setup</a>
<a class="dropdown-item" href="https://realpython.com/products/pythonic-wallpapers/">Pythonic Wallpapers Pack</a>
<a class="dropdown-item" href="https://nerdlettering.com/" target="_blank">Python Mugs, T-Shirts, and More</a>
<a class="dropdown-item" href="https://www.pythonistacafe.com/" target="_blank">Pythonista Cafe Community</a>
<a class="dropdown-item border-top" href="https://realpython.com/products/">Browse All »</a>
</div>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href="https://realpython.com/python-sockets/#" id="navbarDropdownMore" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
More
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMore">
<a class="dropdown-item" href="https://realpython.com/newsletter/">Python Newsletter</a>
<a class="dropdown-item" href="https://realpython.com/podcasts/rpp/">Python Podcast</a>
<a class="dropdown-item" href="https://www.pythonjobshq.com/" target="_blank">Python Job Board</a>
<a class="dropdown-item" href="https://realpython.com/team/">Meet the Team</a>
<a class="dropdown-item" href="https://realpython.com/write-for-us/">Become a Tutorial Author</a>
<a class="dropdown-item" href="https://realpython.com/become-an-instructor/">Become a Video Instructor</a>
</div>
</li>
</ul>
<div class="d-block d-xl-none">
<ul class="navbar-nav">
<li class="nav-item">
<a class="nav-link" href="https://realpython.com/search" title="Search"><span class="d-block d-lg-none"><i class="fa fa-search"></i> Search</span><span class="d-none d-lg-block"><i class="fa fa-search"></i></span></a>
</li>
</ul>
</div>
<div class="d-none d-xl-flex align-items-center mr-2">
<form class="form-inline" action="https://realpython.com/search" method="GET">
<a class="js-search-form-submit position-absolute" href="https://realpython.com/search" title="Search"><i class="fa fa-search fa-fw text-muted pl-2"></i></a>
<input class="search-field form-control form-control-md mr-sm-1 mr-lg-2 w-100" style="padding-left: 2rem;" maxlength="50" type="search" placeholder="Search" aria-label="Search" name="q">
<input type="hidden" name="_from" value="nav">
</form>
</div>
<ul class="navbar-nav">
<li class="nav-item form-inline">
<a class="ml-2 ml-lg-0 btn btn-sm btn-primary px-3" href="https://realpython.com/account/join/">Join</a>
</li>
<li class="nav-item">
<a class="btn text-light" href="https://realpython.com/account/login/">Sign‑In</a>
</li>
</ul>
</div>
</div>
<div class="flex-row w-100" style="border-top: 1px dashed #ffc107 !important;">
<div class="container">
<a class="link-unstyled mx-auto" href="https://realpython.com/free-courses-march-2020"><p class="my-1 small"><span class="text-warning">😷 <strong>Stuck at home?</strong> Enjoy free courses, on&nbsp;us&nbsp;→</span></p></a>
</div>
</div>
</nav>
<div class="container main-content">
<div class="row justify-content-center">
<div class="col-md-11 col-lg-8 article with-headerlinks">
<figure class="embed-responsive embed-responsive-16by9">
<img class="card-img-top m-0 p-0 embed-responsive-item rounded" style="object-fit: contain;" alt="Python Socket Programming" src="./Socket Programming in Python (Guide) – Real Python_files/Python-Sockets-Tutorial_Watermarked.webp" width="1920" height="1080" srcset="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/Python-Sockets-Tutorial_Watermarked.815ce6c85789.jpg&amp;w=480&amp;sig=8ab0403d1d279933d2871e90f350c0c6a7814047 480w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/Python-Sockets-Tutorial_Watermarked.815ce6c85789.jpg&amp;w=960&amp;sig=63a279f0a3d22e185b687081fa04cd7f1106df33 960w, https://files.realpython.com/media/Python-Sockets-Tutorial_Watermarked.815ce6c85789.jpg 1920w" sizes="75vw">
</figure>
<h1>Socket Programming in Python (Guide)</h1>
<p class="mb-0">
<span class="text-muted">by <a class="text-muted" href="https://realpython.com/python-sockets/#author">Nathan Jennings</a>
<span class="ml-2 mr-1 fa fa-comments"></span><a class="text-muted" href="https://realpython.com/python-sockets/#reader-comments"><span class="disqus-comment-count" data-disqus-identifier="https://realpython.com/python-sockets/">91 Comments</span></a>
<span class="ml-2 fa fa-tags"></span>
<a href="https://realpython.com/tutorials/advanced/" class="badge badge-light text-muted">advanced</a>
<a href="https://realpython.com/tutorials/python/" class="badge badge-light text-muted">python</a>
<a href="https://realpython.com/tutorials/web-dev/" class="badge badge-light text-muted">web-dev</a>
</span></p><div class="d-sm-flex flex-row justify-content-between my-2">
<div class="jsCompletionStatusWidget btn-group mb-0">
<button title="Click to mark as completed" class="jsBtnCompletion btn btn-secondary border-right" style="border-top-right-radius: 0; border-bottom-right-radius: 0;">Mark as Completed</button>
<button title="Add bookmark" class="jsBtnBookmark btn btn-secondary border-left"><i class="fa fa-fw fa-bookmark-o"></i></button>
</div>
<div class="align-self-center">
<span>
<a target="_blank" rel="nofollow" href="https://twitter.com/intent/tweet/?text=Check%20out%20this%20%23Python%20tutorial:%20Socket%20Programming%20in%20Python%20%28Guide%29%20by%20@realpython&amp;url=https%3A//realpython.com/python-sockets/" class="mr-1 badge badge-twitter text-light mb-1"><i class="mr-1 fa fa-twitter text-light"></i>Tweet</a>
<a target="_blank" rel="nofollow" href="https://facebook.com/sharer/sharer.php?u=https%3A//realpython.com/python-sockets/" class="mr-1 badge badge-facebook text-light mb-1"><i class="mr-1 fa fa-facebook text-light"></i>Share</a>
<a target="_blank" rel="nofollow" href="mailto:?subject=Python%20article%20for%20you&amp;body=Check%20out%20this%20Python%20tutorial:%0A%0ASocket%20Programming%20in%20Python%20%28Guide%29%0A%0Ahttps%3A//realpython.com/python-sockets/" class="mr-1 badge badge-red text-light mb-1"><i class="mr-1 fa fa-envelope text-light"></i>Email</a>
</span>
</div>
</div>
<p></p>
<div class="article-body">
<div class="bg-light sidebar-module sidebar-module-inset" id="toc">
<p class="h3 mb-2 text-muted">Table of Contents</p>
<div class="toc">
<ul>
<li><a href="https://realpython.com/python-sockets/#background">Background</a></li>
<li><a href="https://realpython.com/python-sockets/#socket-api-overview">Socket API Overview</a></li>
<li><a href="https://realpython.com/python-sockets/#tcp-sockets">TCP Sockets</a></li>
<li><a href="https://realpython.com/python-sockets/#echo-client-and-server">Echo Client and Server</a><ul>
<li><a href="https://realpython.com/python-sockets/#echo-server">Echo Server</a></li>
<li><a href="https://realpython.com/python-sockets/#echo-client">Echo Client</a></li>
<li><a href="https://realpython.com/python-sockets/#running-the-echo-client-and-server">Running the Echo Client and Server</a></li>
<li><a href="https://realpython.com/python-sockets/#viewing-socket-state">Viewing Socket State</a></li>
</ul>
</li>
<li><a href="https://realpython.com/python-sockets/#communication-breakdown">Communication Breakdown</a></li>
<li><a href="https://realpython.com/python-sockets/#handling-multiple-connections">Handling Multiple Connections</a></li>
<li><a href="https://realpython.com/python-sockets/#multi-connection-client-and-server">Multi-Connection Client and Server</a><ul>
<li><a href="https://realpython.com/python-sockets/#multi-connection-server">Multi-Connection Server</a></li>
<li><a href="https://realpython.com/python-sockets/#multi-connection-client">Multi-Connection Client</a></li>
<li><a href="https://realpython.com/python-sockets/#running-the-multi-connection-client-and-server">Running the Multi-Connection Client and Server</a></li>
</ul>
</li>
<li><a href="https://realpython.com/python-sockets/#application-client-and-server">Application Client and Server</a><ul>
<li><a href="https://realpython.com/python-sockets/#application-protocol-header">Application Protocol Header</a></li>
<li><a href="https://realpython.com/python-sockets/#sending-an-application-message">Sending an Application Message</a></li>
<li><a href="https://realpython.com/python-sockets/#application-message-class">Application Message Class</a></li>
<li><a href="https://realpython.com/python-sockets/#running-the-application-client-and-server">Running the Application Client and Server</a></li>
</ul>
</li>
<li><a href="https://realpython.com/python-sockets/#troubleshooting">Troubleshooting</a><ul>
<li><a href="https://realpython.com/python-sockets/#ping">ping</a></li>
<li><a href="https://realpython.com/python-sockets/#netstat">netstat</a></li>
<li><a href="https://realpython.com/python-sockets/#windows">Windows</a></li>
<li><a href="https://realpython.com/python-sockets/#wireshark">Wireshark</a></li>
</ul>
</li>
<li><a href="https://realpython.com/python-sockets/#reference">Reference</a><ul>
<li><a href="https://realpython.com/python-sockets/#python-documentation">Python Documentation</a></li>
<li><a href="https://realpython.com/python-sockets/#errors">Errors</a></li>
<li><a href="https://realpython.com/python-sockets/#socket-address-families">Socket Address Families</a></li>
<li><a href="https://realpython.com/python-sockets/#using-hostnames">Using Hostnames</a></li>
<li><a href="https://realpython.com/python-sockets/#blocking-calls">Blocking Calls</a></li>
<li><a href="https://realpython.com/python-sockets/#closing-connections">Closing Connections</a></li>
<li><a href="https://realpython.com/python-sockets/#byte-endianness">Byte Endianness</a></li>
</ul>
</li>
<li><a href="https://realpython.com/python-sockets/#conclusion">Conclusion</a></li>
</ul>
</div>
</div>
<div class="sidebar-module sidebar-module-inset p-0" style="overflow:hidden;">
<div style="display:block;position:relative;">
<div style="display:block;width:100%;padding-top:12.5%;"></div>
<div class="rpad rounded border" data-unit="8x1" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;"><a href="https://srv.realpython.net/click/2142316168/?c=50610331919&amp;p=58946116052&amp;r=50872" rel="nofollow" target="_blank"><img src="./Socket Programming in Python (Guide) – Real Python_files/c75ad5c06078a2b00c305659dda76f56" style="max-width: 100%; max-height: 100%; width: 100%;"></a></div>
</div>
<a class="small text-muted" href="https://realpython.com/account/join/" rel="nofollow"> <i class="fa fa-info-circle" aria-hidden="true"> </i> Remove ads</a>
</div>
<p>Sockets and the socket API are used to send messages across a network. They provide a form of <a href="https://en.wikipedia.org/wiki/Inter-process_communication">inter-process communication (IPC)</a>. The network can be a logical, local network to the computer, or one that’s physically connected to an external network, with its own connections to other networks. The obvious example is the Internet, which you connect to via your ISP.</p>
<p>This tutorial has three different iterations of building a socket server and client with Python:</p>
<ol>
<li>We’ll start the tutorial by looking at a simple socket server and client.</li>
<li>Once you’ve seen the API and how things work in this initial example, we’ll look at an improved version that handles multiple connections simultaneously.</li>
<li>Finally, we’ll progress to building an example server and client that functions like a full-fledged socket application, complete with its own custom header and content.</li>
</ol>
<p>By the end of this tutorial, you’ll understand how to use the main functions and methods in Python’s <a href="https://docs.python.org/3/library/socket.html">socket module</a> to write your own client-server applications. This includes showing you how to use a custom class to send messages and data between endpoints that you can build upon and utilize for your own applications.</p>
<p>The examples in this tutorial use Python 3.6. You can find the <a href="https://github.com/realpython/materials/tree/master/python-sockets-tutorial">source code on GitHub</a>.</p>
<p>Networking and sockets are large subjects. Literal volumes have been written about them. If you’re new to sockets or networking, it’s completely normal if you feel overwhelmed with all of the terms and pieces. I know I did!</p>
<p>Don’t be discouraged though. I’ve written this tutorial for you. As we do with Python, we can learn a little bit at a time. Use your browser’s bookmark feature and come back when you’re ready for the next section.</p>
<p>Let’s get started!</p>
<div><div class="rounded border border-light" style="display:block;position:relative;"><div style="display:block;width:100%;padding-top:12.5%;"></div><div class="rpad rounded border" data-unit="8x1" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;"><a href="https://srv.realpython.net/click/32768813333/?c=50370534298&amp;p=58946116052&amp;r=70793" rel="nofollow" target="_blank"><img src="./Socket Programming in Python (Guide) – Real Python_files/b4e37fe7eacd981e87c0ebb599642da6" style="max-width: 100%; max-height: 100%; width: 100%;"></a></div></div><a class="small text-muted" href="https://realpython.com/account/join/" rel="nofollow"><i aria-hidden="true" class="fa fa-info-circle"> </i> Remove ads</a></div><section class="section2" id="background"><h2>Background<a class="headerlink" href="https://realpython.com/python-sockets/#background" title="Permanent link"></a></h2>
<p>Sockets have a long history. Their use <a href="https://en.wikipedia.org/wiki/Network_socket#History">originated with ARPANET</a> in 1971 and later became an API in the Berkeley Software Distribution (BSD) operating system released in 1983 called <a href="https://en.wikipedia.org/wiki/Berkeley_sockets">Berkeley sockets</a>.</p>
<p>When the Internet took off in the 1990s with the World Wide Web, so did network programming. Web servers and browsers weren’t the only applications taking advantage of newly connected networks and using sockets. Client-server applications of all types and sizes came into widespread use.</p>
<p>Today, although the underlying protocols used by the socket API have evolved over the years, and we’ve seen new ones, the low-level API has remained the same.</p>
<p>The most common type of socket applications are client-server applications, where one side acts as the server and waits for connections from clients. This is the type of application that I’ll be covering in this tutorial. More specifically, we’ll look at the socket API for <a href="https://en.wikipedia.org/wiki/Berkeley_sockets">Internet sockets</a>, sometimes called Berkeley or BSD sockets. There are also <a href="https://en.wikipedia.org/wiki/Unix_domain_socket">Unix domain sockets</a>, which can only be used to communicate between processes on the same host.</p>
</section><section class="section2" id="socket-api-overview"><h2>Socket API Overview<a class="headerlink" href="https://realpython.com/python-sockets/#socket-api-overview" title="Permanent link"></a></h2>
<p>Python’s <a href="https://docs.python.org/3/library/socket.html">socket module</a> provides an interface to the <a href="https://en.wikipedia.org/wiki/Berkeley_sockets">Berkeley sockets API</a>. This is the module that we’ll use and discuss in this tutorial.</p>
<p>The primary socket API functions and methods in this module are:</p>
<ul>
<li><code>socket()</code></li>
<li><code>bind()</code></li>
<li><code>listen()</code></li>
<li><code>accept()</code></li>
<li><code>connect()</code></li>
<li><code>connect_ex()</code></li>
<li><code>send()</code></li>
<li><code>recv()</code></li>
<li><code>close()</code></li>
</ul>
<p>Python provides a convenient and consistent API that maps directly to these system calls, their C counterparts. We’ll look at how these are used together in the next section.</p>
<p>As part of its standard library, Python also has classes that make using these low-level socket functions easier. Although it’s not covered in this tutorial, see the <a href="https://docs.python.org/3/library/socketserver.html">socketserver module</a>, a framework for network servers. There are also many modules available that implement higher-level Internet protocols like HTTP and SMTP. For an overview, see <a href="https://docs.python.org/3/library/internet.html">Internet Protocols and Support</a>.</p>
</section><section class="section2" id="tcp-sockets"><h2>TCP Sockets<a class="headerlink" href="https://realpython.com/python-sockets/#tcp-sockets" title="Permanent link"></a></h2>
<p>As you’ll see shortly, we’ll create a socket object using <code>socket.socket()</code> and specify the socket type as <code>socket.SOCK_STREAM</code>. When you do that, the default protocol that’s used is the <a href="https://en.wikipedia.org/wiki/Transmission_Control_Protocol">Transmission Control Protocol (TCP)</a>. This is a good default and probably what you want. </p>
<p>Why should you use TCP? The Transmission Control Protocol (TCP):</p>
<ul>
<li><strong>Is reliable:</strong> packets dropped in the network are detected and retransmitted by the sender.</li>
<li><strong>Has in-order data delivery:</strong> data is read by your application in the order it was written by the sender.</li>
</ul>
<p>In contrast, <a href="https://en.wikipedia.org/wiki/User_Datagram_Protocol">User Datagram Protocol (UDP)</a> sockets created with <code>socket.SOCK_DGRAM</code> aren’t reliable, and data read by the receiver can be out-of-order from the sender’s writes.</p>
<p>Why is this important? Networks are a best-effort delivery system. There’s no guarantee that your data will reach its destination or that you’ll receive what’s been sent to you.</p>
<p>Network devices (for example, routers and switches), have finite bandwidth available and their own inherent system limitations. They have CPUs, memory, buses, and interface packet buffers, just like our clients and servers. TCP relieves you from having to worry about <a href="https://en.wikipedia.org/wiki/Packet_loss">packet loss</a>, data arriving out-of-order, and many other things that invariably happen when you’re communicating across a network.</p>
<p>In the diagram below, let’s look at the sequence of socket API calls and data flow for TCP:</p>
<figure><a href="./Socket Programming in Python (Guide) – Real Python_files/sockets-tcp-flow.webp" target="_blank"><img loading="lazy" class="img-fluid mx-auto d-block w-66" src="./Socket Programming in Python (Guide) – Real Python_files/sockets-tcp-flow.webp" width="769" height="866" srcset="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/sockets-tcp-flow.1da426797e37.jpg&amp;w=192&amp;sig=09c2a0657d15c3c7b6ad900fd200d3c09e37d6d7 192w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/sockets-tcp-flow.1da426797e37.jpg&amp;w=384&amp;sig=958fd2ae24d5d337efdff2fcaf7ed57038f65aa9 384w, https://files.realpython.com/media/sockets-tcp-flow.1da426797e37.jpg 769w" sizes="75vw" alt="TCP socket flow" data-asset="490"></a><figcaption class="figure-caption text-center">TCP Socket Flow (<a href="https://commons.wikimedia.org/wiki/File:InternetSocketBasicDiagram_zhtw.png" target="_blank">Image source</a>)</figcaption></figure>
<p>The left-hand column represents the server. On the right-hand side is the client.</p>
<p>Starting in the top left-hand column, note the API calls the server makes to setup a “listening” socket:</p>
<ul>
<li><code>socket()</code></li>
<li><code>bind()</code></li>
<li><code>listen()</code></li>
<li><code>accept()</code></li>
</ul>
<p>A listening socket does just what it sounds like. It listens for connections from clients. When a client connects, the server calls <code>accept()</code> to accept, or complete, the connection.</p>
<p>The client calls <code>connect()</code> to establish a connection to the server and initiate the three-way handshake. The handshake step is important since it ensures that each side of the connection is reachable in the network, in other words that the client can reach the server and vice-versa. It may be that only one host, client or server, can reach the other.</p>
<p>In the middle is the round-trip section, where data is exchanged between the client and server using calls to <code>send()</code> and <code>recv()</code>.</p>
<p>At the bottom, the client and server <code>close()</code> their respective sockets.</p>
<div><div class="rounded border border-light" style="display:block;position:relative;"><div style="display:block;width:100%;padding-top:12.5%;"></div><div class="rpad rounded border" data-unit="8x1" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;"><a href="https://srv.realpython.net/click/36956403387/?c=50370534298&amp;p=58946116052&amp;r=48707" rel="nofollow" target="_blank"><img src="./Socket Programming in Python (Guide) – Real Python_files/e1ba3fda38afbf853a398cfa81ae1bca" style="max-width: 100%; max-height: 100%; width: 100%;"></a></div></div><a class="small text-muted" href="https://realpython.com/account/join/" rel="nofollow"><i aria-hidden="true" class="fa fa-info-circle"> </i> Remove ads</a></div></section><section class="section2" id="echo-client-and-server"><h2>Echo Client and Server<a class="headerlink" href="https://realpython.com/python-sockets/#echo-client-and-server" title="Permanent link"></a></h2>
<p>Now that you’ve seen an overview of the socket API and how the client and server communicate, let’s create our first client and server. We’ll begin with a simple implementation. The server will simply echo whatever it receives back to the client.</p>
<section class="section3" id="echo-server"><h3>Echo Server<a class="headerlink" href="https://realpython.com/python-sockets/#echo-server" title="Permanent link"></a></h3>
<p>Here’s the server, <code>echo-server.py</code>:</p>
<div class="highlight python"><pre><span></span><code><span class="ch">#!/usr/bin/env python3</span>

<span class="kn">import</span> <span class="nn">socket</span>

<span class="n">HOST</span> <span class="o">=</span> <span class="s1">'127.0.0.1'</span>  <span class="c1"># Standard loopback interface address (localhost)</span>
<span class="n">PORT</span> <span class="o">=</span> <span class="mi">65432</span>        <span class="c1"># Port to listen on (non-privileged ports are &gt; 1023)</span>

<span class="k">with</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span> <span class="k">as</span> <span class="n">s</span><span class="p">:</span>
    <span class="n">s</span><span class="o">.</span><span class="n">bind</span><span class="p">((</span><span class="n">HOST</span><span class="p">,</span> <span class="n">PORT</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">listen</span><span class="p">()</span>
    <span class="n">conn</span><span class="p">,</span> <span class="n">addr</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
    <span class="k">with</span> <span class="n">conn</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'Connected by'</span><span class="p">,</span> <span class="n">addr</span><span class="p">)</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="n">conn</span><span class="o">.</span><span class="n">sendall</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></div>
<div class="alert alert-primary" role="alert">
<p><strong>Note:</strong> Don’t worry about understanding everything above right now. There’s a lot going on in these few lines of code. This is just a starting point so you can see a basic server in action.</p>
<p>There’s a <a href="https://realpython.com/python-sockets/#reference">reference section</a> at the end of this tutorial that has more information and links to additional resources. I’ll link to these and other resources throughout the tutorial.</p>
</div>
<p>Let’s walk through each API call and see what’s happening.</p>
<p><code>socket.socket()</code> creates a socket object that supports the <a href="https://docs.python.org/3/reference/datamodel.html#context-managers">context manager type</a>, so you can use it in a <a href="https://docs.python.org/3/reference/compound_stmts.html#with"><code>with</code> statement</a>. There’s no need to call <code>s.close()</code>:</p>
<div class="highlight python"><pre><span></span><code><span class="k">with</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span> <span class="k">as</span> <span class="n">s</span><span class="p">:</span>
    <span class="k">pass</span>  <span class="c1"># Use the socket object without calling s.close().</span>
</code></pre></div>
<p>The arguments passed to <a href="https://docs.python.org/3/library/socket.html#socket.socket"><code>socket()</code></a> specify the <a href="https://realpython.com/python-sockets/#socket-address-families">address family</a> and socket type. <code>AF_INET</code> is the Internet address family for <a href="https://en.wikipedia.org/wiki/IPv4">IPv4</a>. <code>SOCK_STREAM</code> is the socket type for <a href="https://realpython.com/python-sockets/#tcp-sockets">TCP</a>, the protocol that will be used to transport our messages in the network.</p>
<p><code>bind()</code> is used to associate the socket with a specific network interface and port number:</p>
<div class="highlight python"><pre><span></span><code><span class="n">HOST</span> <span class="o">=</span> <span class="s1">'127.0.0.1'</span>  <span class="c1"># Standard loopback interface address (localhost)</span>
<span class="n">PORT</span> <span class="o">=</span> <span class="mi">65432</span>        <span class="c1"># Port to listen on (non-privileged ports are &gt; 1023)</span>

<span class="c1"># ...</span>

<span class="n">s</span><span class="o">.</span><span class="n">bind</span><span class="p">((</span><span class="n">HOST</span><span class="p">,</span> <span class="n">PORT</span><span class="p">))</span>
</code></pre></div>
<p>The values passed to <code>bind()</code> depend on the <a href="https://realpython.com/python-sockets/#socket-address-families">address family</a> of the socket. In this example, we’re using <code>socket.AF_INET</code> (IPv4). So it expects a 2-tuple: <code>(host, port)</code>.</p>
<p><code>host</code> can be a hostname, <a href="https://realpython.com/python-ipaddress-module/">IP address</a>, or empty string. If an IP address is used, <code>host</code> should be an IPv4-formatted address string. The IP address <code>127.0.0.1</code> is the standard IPv4 address for the <a href="https://en.wikipedia.org/wiki/Localhost">loopback</a> interface, so only processes on the host will be able to connect to the server. If you pass an empty string, the server will accept connections on all available IPv4 interfaces.</p>
<p><code>port</code> should be an integer from <code>1</code>-<code>65535</code> (<code>0</code> is reserved). It’s the <a href="https://en.wikipedia.org/wiki/Transmission_Control_Protocol#TCP_ports">TCP port</a> number to accept connections on from clients. Some systems may require superuser privileges if the port is &lt; <code>1024</code>.</p>
<p>Here’s a note on using hostnames with <code>bind()</code>:</p>
<blockquote>
<p>“If you use a hostname in the host portion of IPv4/v6 socket address, the program may show a non-deterministic behavior, as Python uses the first address returned from the DNS resolution. The socket address will be resolved differently into an actual IPv4/v6 address, depending on the results from DNS resolution and/or the host configuration. For deterministic behavior use a numeric address in host portion.” <a href="https://docs.python.org/3/library/socket.html">(Source)</a></p>
</blockquote>
<p>I’ll discuss this more later in <a href="https://realpython.com/python-sockets/#using-hostnames">Using Hostnames</a>, but it’s worth mentioning here. For now, just understand that when using a hostname, you could see different results depending on what’s returned from the name resolution process.</p>
<p>It could be anything. The first time you run your application, it might be the address <code>10.1.2.3</code>. The next time it’s a different address, <code>192.168.0.1</code>. The third time, it could be <code>172.16.7.8</code>, and so on.</p>
<p>Continuing with the server example, <code>listen()</code> enables a server to <code>accept()</code> connections. It makes it a “listening” socket:</p>
<div class="highlight python"><pre><span></span><code><span class="n">s</span><span class="o">.</span><span class="n">listen</span><span class="p">()</span>
<span class="n">conn</span><span class="p">,</span> <span class="n">addr</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
</code></pre></div>
<p><code>listen()</code> has a <code>backlog</code> parameter. It specifies the number of unaccepted connections that the system will allow before refusing new connections. Starting in Python 3.5, it’s optional. If not specified, a default <code>backlog</code> value is chosen.</p>
<p>If your server receives a lot of connection requests simultaneously, increasing the <code>backlog</code> value may help by setting the maximum length of the queue for pending connections. The maximum value is system dependent. For example, on Linux, see <a href="https://serverfault.com/questions/518862/will-increasing-net-core-somaxconn-make-a-difference/519152"><code>/proc/sys/net/core/somaxconn</code></a>.</p>
<p><code>accept()</code> <a href="https://realpython.com/python-sockets/#blocking-calls">blocks</a> and waits for an incoming connection. When a client connects, it returns a new socket object representing the connection and a tuple holding the address of the client. The tuple will contain <code>(host, port)</code> for IPv4 connections or <code>(host, port, flowinfo, scopeid)</code> for IPv6. See <a href="https://realpython.com/python-sockets/#socket-address-families">Socket Address Families</a> in the reference section for details on the tuple values.</p>
<p>One thing that’s imperative to understand is that we now have a new socket object from <code>accept()</code>. This is important since it’s the socket that you’ll use to communicate with the client. It’s distinct from the listening socket that the server is using to accept new connections:</p>
<div class="highlight python"><pre><span></span><code><span class="n">conn</span><span class="p">,</span> <span class="n">addr</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
<span class="k">with</span> <span class="n">conn</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">'Connected by'</span><span class="p">,</span> <span class="n">addr</span><span class="p">)</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">sendall</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></div>
<p>After getting the client socket object <code>conn</code> from <code>accept()</code>, an infinite <code>while</code> loop is used to loop over <a href="https://realpython.com/python-sockets/#blocking-calls">blocking calls</a> to <code>conn.recv()</code>. This reads whatever data the client sends and echoes it back using <code>conn.sendall()</code>.</p>
<p>If <code>conn.recv()</code> returns an empty <a href="https://docs.python.org/3/library/stdtypes.html#bytes-objects"><code>bytes</code></a> object, <code>b''</code>, then the client closed the connection and the loop is terminated. The <code>with</code> statement is used with <code>conn</code> to automatically close the socket at the end of the block.</p>
<div><div class="rounded border border-light" style="display:block;position:relative;"><div style="display:block;width:100%;padding-top:12.5%;"></div><div class="rpad rounded border" data-unit="8x1" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;"><a href="https://srv.realpython.net/click/5212255200/?c=56207115366&amp;p=58946116052&amp;r=95080" rel="nofollow" target="_blank"><img src="./Socket Programming in Python (Guide) – Real Python_files/655d5b5272a07eaebc6a0885e3bc64ec" style="max-width: 100%; max-height: 100%; width: 100%;"></a></div></div><a class="small text-muted" href="https://realpython.com/account/join/" rel="nofollow"><i aria-hidden="true" class="fa fa-info-circle"> </i> Remove ads</a></div></section><section class="section3" id="echo-client"><h3>Echo Client<a class="headerlink" href="https://realpython.com/python-sockets/#echo-client" title="Permanent link"></a></h3>
<p>Now let’s look at the client, <code>echo-client.py</code>:</p>
<div class="highlight python"><pre><span></span><code><span class="ch">#!/usr/bin/env python3</span>

<span class="kn">import</span> <span class="nn">socket</span>

<span class="n">HOST</span> <span class="o">=</span> <span class="s1">'127.0.0.1'</span>  <span class="c1"># The server's hostname or IP address</span>
<span class="n">PORT</span> <span class="o">=</span> <span class="mi">65432</span>        <span class="c1"># The port used by the server</span>

<span class="k">with</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span> <span class="k">as</span> <span class="n">s</span><span class="p">:</span>
    <span class="n">s</span><span class="o">.</span><span class="n">connect</span><span class="p">((</span><span class="n">HOST</span><span class="p">,</span> <span class="n">PORT</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">sendall</span><span class="p">(</span><span class="sa">b</span><span class="s1">'Hello, world'</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">'Received'</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</code></pre></div>
<p>In comparison to the server, the client is pretty simple. It creates a socket object, connects to the server and calls <code>s.sendall()</code> to send its message. Lastly, it calls <code>s.recv()</code> to read the server’s reply and then <a href="https://realpython.com/python-print/">prints it</a>.</p>
</section><section class="section3" id="running-the-echo-client-and-server"><h3>Running the Echo Client and Server<a class="headerlink" href="https://realpython.com/python-sockets/#running-the-echo-client-and-server" title="Permanent link"></a></h3>
<p>Let’s run the client and server to see how they behave and inspect what’s happening.</p>
<div class="alert alert-primary" role="alert">
<p><strong>Note:</strong> If you’re having trouble getting the examples or your own code to run from the command line, read <a href="https://dbader.org/blog/how-to-make-command-line-commands-with-python">How Do I Make My Own Command-Line Commands Using Python?</a> If you’re on Windows, check the <a href="https://docs.python.org/3.6/faq/windows.html">Python Windows FAQ</a>.</p>
</div>
<p>Open a terminal or command prompt, navigate to the directory that contains your scripts, and run the server:</p>
<div class="highlight sh"><pre><span></span><code><span class="gp">$ </span>./echo-server.py
</code></pre></div>
<p>Your terminal will appear to hang. That’s because the server is <a href="https://realpython.com/python-sockets/#blocking-calls">blocked</a> (suspended) in a call:</p>
<div class="highlight python"><pre><span></span><code><span class="n">conn</span><span class="p">,</span> <span class="n">addr</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
</code></pre></div>
<p>It’s waiting for a client connection. Now open another terminal window or command prompt and run the client:</p>
<div class="highlight sh"><pre><span></span><code><span class="gp">$ </span>./echo-client.py 
<span class="go">Received b'Hello, world'</span>
</code></pre></div>
<p>In the server window, you should see:</p>
<div class="highlight sh"><pre><span></span><code><span class="gp">$ </span>./echo-server.py 
<span class="go">Connected by ('127.0.0.1', 64623)</span>
</code></pre></div>
<p>In the output above, the server printed the <code>addr</code> tuple returned from <code>s.accept()</code>. This is the client’s IP address and TCP port number. The port number, <code>64623</code>, will most likely be different when you run it on your machine.</p>
</section><section class="section3" id="viewing-socket-state"><h3>Viewing Socket State<a class="headerlink" href="https://realpython.com/python-sockets/#viewing-socket-state" title="Permanent link"></a></h3>
<p>To see the current state of sockets on your host, use <code>netstat</code>. It’s available by default on macOS, Linux, and Windows.</p>
<p>Here’s the netstat output from macOS after starting the server:</p>
<div class="highlight sh"><pre><span></span><code><span class="gp">$ </span>netstat -an
<span class="go">Active Internet connections (including servers)</span>
<span class="go">Proto Recv-Q Send-Q  Local Address          Foreign Address        (state)</span>
<span class="go">tcp4       0      0  127.0.0.1.65432        *.*                    LISTEN</span>
</code></pre></div>
<p>Notice that <code>Local Address</code> is <code>127.0.0.1.65432</code>. If <code>echo-server.py</code> had used <code>HOST = ''</code> instead of <code>HOST = '127.0.0.1'</code>, netstat would show this:</p>
<div class="highlight sh"><pre><span></span><code><span class="gp">$ </span>netstat -an
<span class="go">Active Internet connections (including servers)</span>
<span class="go">Proto Recv-Q Send-Q  Local Address          Foreign Address        (state)</span>
<span class="go">tcp4       0      0  *.65432                *.*                    LISTEN</span>
</code></pre></div>
<p><code>Local Address</code> is <code>*.65432</code>, which means all available host interfaces that support the address family will be used to accept incoming connections. In this example, in the call to <code>socket()</code>, <code>socket.AF_INET</code> was used (IPv4). You can see this in the <code>Proto</code> column: <code>tcp4</code>.</p>
<p>I’ve trimmed the output above to show the echo server only. You’ll likely see much more output, depending on the system you’re running it on. The things to notice are the columns <code>Proto</code>, <code>Local Address</code>, and <code>(state)</code>. In the last example above, netstat shows the echo server is using an IPv4 TCP socket (<code>tcp4</code>), on port 65432 on all interfaces (<code>*.65432</code>), and it’s in the listening state (<code>LISTEN</code>).</p>
<p>Another way to see this, along with additional helpful information, is to use <code>lsof</code> (list open files). It’s available by default on macOS and can be installed on Linux using your package manager, if it’s not already:</p>
<div class="highlight sh"><pre><span></span><code><span class="gp">$ </span>lsof -i -n
<span class="go">COMMAND     PID   USER   FD   TYPE   DEVICE SIZE/OFF NODE NAME</span>
<span class="go">Python    67982 nathan    3u  IPv4 0xecf272      0t0  TCP *:65432 (LISTEN)</span>
</code></pre></div>
<p><code>lsof</code> gives you the <code>COMMAND</code>, <code>PID</code> (process id), and <code>USER</code> (user id) of open Internet sockets when used with the <code>-i</code> option. Above is the echo server process.</p>
<p><code>netstat</code> and <code>lsof</code> have a lot of options available and differ depending on the OS you’re running them on. Check the <code>man</code> page or documentation for both. They’re definitely worth spending a little time with and getting to know. You’ll be rewarded. On macOS and Linux, use <code>man netstat</code> and <code>man lsof</code>. For Windows, use <code>netstat /?</code>.</p>
<p>Here’s a common error you’ll see when a connection attempt is made to a port with no listening socket:</p>
<div class="highlight sh"><pre><span></span><code><span class="gp">$ </span>./echo-client.py 
<span class="go">Traceback (most recent call last):</span>
<span class="go">  File "./echo-client.py", line 9, in &lt;module&gt;</span>
<span class="go">    s.connect((HOST, PORT))</span>
<span class="go">ConnectionRefusedError: [Errno 61] Connection refused</span>
</code></pre></div>
<p>Either the specified port number is wrong or the server isn’t running. Or maybe there’s a firewall in the path that’s blocking the connection, which can be easy to forget about. You may also see the error <code>Connection timed out</code>. Get a firewall rule added that allows the client to connect to the TCP port!</p>
<p>There’s a list of common <a href="https://realpython.com/python-sockets/#errors">errors</a> in the reference section.</p>
<div><div class="rounded border border-light" style="display:block;position:relative;"><div style="display:block;width:100%;padding-top:12.5%;"></div><div class="rpad rounded border" data-unit="8x1" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;"><a href="https://srv.realpython.net/click/67002144333/?c=56207115366&amp;p=58946116052&amp;r=22661" rel="nofollow" target="_blank"><img src="./Socket Programming in Python (Guide) – Real Python_files/e822f46aa4962c3565f257bb0c4679a8" style="max-width: 100%; max-height: 100%; width: 100%;"></a></div></div><a class="small text-muted" href="https://realpython.com/account/join/" rel="nofollow"><i aria-hidden="true" class="fa fa-info-circle"> </i> Remove ads</a></div></section></section><section class="section2" id="communication-breakdown"><h2>Communication Breakdown<a class="headerlink" href="https://realpython.com/python-sockets/#communication-breakdown" title="Permanent link"></a></h2>
<p>Let’s take a closer look at how the client and server communicated with each other:</p>
<figure><a href="./Socket Programming in Python (Guide) – Real Python_files/sockets-loopback-interface.44fa30c53c70.jpg" target="_blank"><img loading="lazy" class="img-fluid mx-auto d-block w-66" src="./Socket Programming in Python (Guide) – Real Python_files/sockets-loopback-interface.44fa30c53c70.jpg" width="1134" height="800" srcset="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/sockets-loopback-interface.44fa30c53c70.jpg&amp;w=283&amp;sig=be902b06322b7f4e6a54dc337bbe14462e742a2d 283w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/sockets-loopback-interface.44fa30c53c70.jpg&amp;w=567&amp;sig=44672ac33d89bbe1124a176fb0e49e26bea8ade3 567w, https://files.realpython.com/media/sockets-loopback-interface.44fa30c53c70.jpg 1134w" sizes="75vw" alt="Sockets loopback interface" data-asset="491"></a></figure>
<p>When using the <a href="https://en.wikipedia.org/wiki/Localhost">loopback</a> interface (IPv4 address <code>127.0.0.1</code> or IPv6 address <code>::1</code>), data never leaves the host or touches the external network. In the diagram above, the loopback interface is contained inside the host. This represents the internal nature of the loopback interface and that connections and data that transit it are local to the host. This is why you’ll also hear the loopback interface and IP address <code>127.0.0.1</code> or <code>::1</code> referred to as “localhost.”</p>
<p>Applications use the loopback interface to communicate with other processes running on the host and for security and isolation from the external network. Since it’s internal and accessible only from within the host, it’s not exposed.</p>
<p>You can see this in action if you have an application server that uses its own private database. If it’s not a database used by other servers, it’s probably configured to listen for connections on the loopback interface only. If this is the case, other hosts on the network can’t connect to it.</p>
<p>When you use an IP address other than <code>127.0.0.1</code> or <code>::1</code> in your applications, it’s probably bound to an <a href="https://en.wikipedia.org/wiki/Ethernet">Ethernet</a> interface that’s connected to an external network. This is your gateway to other hosts outside of your “localhost” kingdom:</p>
<figure><a href="./Socket Programming in Python (Guide) – Real Python_files/sockets-ethernet-interface.aac312541af5.jpg" target="_blank"><img loading="lazy" class="img-fluid mx-auto d-block w-66" src="./Socket Programming in Python (Guide) – Real Python_files/sockets-ethernet-interface.aac312541af5.jpg" width="1280" height="780" srcset="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/sockets-ethernet-interface.aac312541af5.jpg&amp;w=320&amp;sig=e1aabc4d558d8ad5bfca10ad9ae183e3653e13f8 320w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/sockets-ethernet-interface.aac312541af5.jpg&amp;w=640&amp;sig=2329fd241af53cf40a5dcffb6949184979f704b6 640w, https://files.realpython.com/media/sockets-ethernet-interface.aac312541af5.jpg 1280w" sizes="75vw" alt="Sockets ethernet interface" data-asset="492"></a></figure>
<p>Be careful out there. It’s a nasty, cruel world. Be sure to read the section <a href="https://realpython.com/python-sockets/#using-hostnames">Using Hostnames</a> before venturing from the safe confines of “localhost.” There’s a security note that applies even if you’re not using hostnames and using IP addresses only.</p>
</section><section class="section2" id="handling-multiple-connections"><h2>Handling Multiple Connections<a class="headerlink" href="https://realpython.com/python-sockets/#handling-multiple-connections" title="Permanent link"></a></h2>
<p>The echo server definitely has its limitations. The biggest being that it serves only one client and then exits. The echo client has this limitation too, but there’s an additional problem. When the client makes the following call, it’s possible that <code>s.recv()</code> will return only one byte, <code>b'H'</code> from <code>b'Hello, world'</code>:</p>
<div class="highlight python"><pre><span></span><code><span class="n">data</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
</code></pre></div>
<p>The <code>bufsize</code> argument of <code>1024</code> used above is the maximum amount of data to be received at once. It doesn’t mean that <code>recv()</code> will return <code>1024</code> bytes.</p>
<p><code>send()</code> also behaves this way. <code>send()</code> returns the number of bytes sent, which may be less than the size of the data passed in. You’re responsible for checking this and calling <code>send()</code> as many times as needed to send all of the data:</p>
<blockquote>
<p>“Applications are responsible for checking that all data has been sent; if only some of the data was transmitted, the application needs to attempt delivery of the remaining data.” <a href="https://docs.python.org/3/library/socket.html#socket.socket.send">(Source)</a></p>
</blockquote>
<p>We avoided having to do this by using <code>sendall()</code>:</p>
<blockquote>
<p>“Unlike send(), this method continues to send data from bytes until either all data has been sent or an error occurs. None is returned on success.” <a href="https://docs.python.org/3/library/socket.html#socket.socket.sendall">(Source)</a></p>
</blockquote>
<p>We have two problems at this point:</p>
<ul>
<li>How do we handle multiple connections concurrently?</li>
<li>We need to call <code>send()</code> and <code>recv()</code> until all data is sent or received.</li>
</ul>
<p>What do we do? There are many approaches to <a href="https://realpython.com/python-concurrency/">concurrency</a>. More recently, a popular approach is to use <a href="https://docs.python.org/3/library/asyncio.html">Asynchronous I/O</a>. <code>asyncio</code> was introduced into the standard library in Python 3.4. The traditional choice is to use <a href="https://docs.python.org/3/library/threading.html">threads</a>.</p>
<p>The trouble with concurrency is it’s hard to get right. There are many subtleties to consider and guard against. All it takes is for one of these to manifest itself and your application may suddenly fail in not-so-subtle ways.</p>
<p>I don’t say this to scare you away from learning and using concurrent programming. If your application needs to scale, it’s a necessity if you want to use more than one processor or one core. However, for this tutorial, we’ll use something that’s more traditional than threads and easier to reason about. We’re going to use the granddaddy of system calls: <a href="https://docs.python.org/3/library/selectors.html#selectors.BaseSelector.select"><code>select()</code></a>.</p>
<p><code>select()</code> allows you to check for I/O completion on more than one socket. So you can call <code>select()</code> to see which sockets have I/O ready for reading and/or writing. But this is Python, so there’s more. We’re going to use the <a href="https://docs.python.org/3/library/selectors.html">selectors</a> module in the standard library so the most efficient implementation is used, regardless of the operating system we happen to be running on:</p>
<blockquote>
<p>“This module allows high-level and efficient I/O multiplexing, built upon the select module primitives. Users are encouraged to use this module instead, unless they want precise control over the OS-level primitives used.” <a href="https://docs.python.org/3/library/selectors.html">(Source)</a></p>
</blockquote>
<p>Even though, by using <code>select()</code>, we’re not able to run concurrently, depending on your workload, this approach may still be plenty fast. It depends on what your application needs to do when it services a request and the number of clients it needs to support.</p>
<p><a href="https://docs.python.org/3/library/asyncio.html"><code>asyncio</code></a> uses single-threaded cooperative multitasking and an event loop to manage tasks. With <code>select()</code>, we’ll be writing our own version of an event loop, albeit more simply and synchronously. When using multiple threads, even though you have concurrency, we currently have to use the <a href="https://realpython.com/python-gil/">GIL</a> with <a href="https://wiki.python.org/moin/GlobalInterpreterLock">CPython and PyPy</a>. This effectively limits the amount of work we can do in parallel anyway.</p>
<p>I say all of this to explain that using <code>select()</code> may be a perfectly fine choice. Don’t feel like you have to use <code>asyncio</code>, threads, or the latest asynchronous library. Typically, in a network application, your application is I/O bound: it could be waiting on the local network, endpoints on the other side of the network, on a disk, and so forth.</p>
<p>If you’re getting requests from clients that initiate CPU bound work, look at the <a href="https://docs.python.org/3/library/concurrent.futures.html">concurrent.futures</a> module. It contains the class <a href="https://docs.python.org/3/library/concurrent.futures.html#processpoolexecutor">ProcessPoolExecutor</a> that uses a pool of processes to execute calls asynchronously.</p>
<p>If you use multiple processes, the operating system is able to schedule your Python code to run in parallel on multiple processors or cores, without the GIL. For ideas and inspiration, see the PyCon talk <a href="https://www.youtube.com/watch?v=0kXaLh8Fz3k">John Reese - Thinking Outside the GIL with AsyncIO and Multiprocessing - PyCon 2018</a>.</p>
<p>In the next section, we’ll look at examples of a server and client that address these problems. They use <code>select()</code> to handle multiple connections simultaneously and call <code>send()</code> and <code>recv()</code> as many times as needed.</p>
<div><div class="rounded border border-light" style="display:block;position:relative;"><div style="display:block;width:100%;padding-top:12.5%;"></div><div class="rpad rounded border" data-unit="8x1" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;"><a href="https://srv.realpython.net/click/53740567618/?c=44675371757&amp;p=58946116052&amp;r=70307" rel="nofollow" target="_blank"><img src="./Socket Programming in Python (Guide) – Real Python_files/32dc2b8267d0b6061434a93732943fa5" style="max-width: 100%; max-height: 100%; width: 100%;"></a></div></div><a class="small text-muted" href="https://realpython.com/account/join/" rel="nofollow"><i aria-hidden="true" class="fa fa-info-circle"> </i> Remove ads</a></div></section><section class="section2" id="multi-connection-client-and-server"><h2>Multi-Connection Client and Server<a class="headerlink" href="https://realpython.com/python-sockets/#multi-connection-client-and-server" title="Permanent link"></a></h2>
<p>In the next two sections, we’ll create a server and client that handles multiple connections using a <code>selector</code> object created from the <a href="https://docs.python.org/3/library/selectors.html">selectors</a> module.</p>
<section class="section3" id="multi-connection-server"><h3>Multi-Connection Server<a class="headerlink" href="https://realpython.com/python-sockets/#multi-connection-server" title="Permanent link"></a></h3>
<p>First, let’s look at the multi-connection server, <code>multiconn-server.py</code>. Here’s the first part that sets up the listening socket:</p>
<div class="highlight python"><pre><span></span><code><span class="kn">import</span> <span class="nn">selectors</span>
<span class="n">sel</span> <span class="o">=</span> <span class="n">selectors</span><span class="o">.</span><span class="n">DefaultSelector</span><span class="p">()</span>
<span class="c1"># ...</span>
<span class="n">lsock</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
<span class="n">lsock</span><span class="o">.</span><span class="n">bind</span><span class="p">((</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">))</span>
<span class="n">lsock</span><span class="o">.</span><span class="n">listen</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">'listening on'</span><span class="p">,</span> <span class="p">(</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">))</span>
<span class="n">lsock</span><span class="o">.</span><span class="n">setblocking</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="n">sel</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">lsock</span><span class="p">,</span> <span class="n">selectors</span><span class="o">.</span><span class="n">EVENT_READ</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div>
<p>The biggest difference between this server and the echo server is the call to <code>lsock.setblocking(False)</code> to configure the socket in non-blocking mode. Calls made to this socket will no longer <a href="https://realpython.com/python-sockets/#blocking-calls">block</a>. When it’s used with <code>sel.select()</code>, as you’ll see below, we can wait for events on one or more sockets and then read and write data when it’s ready.</p>
<p><code>sel.register()</code> registers the socket to be monitored with <code>sel.select()</code> for the events you’re interested in. For the listening socket, we want read events: <code>selectors.EVENT_READ</code>.</p>
<p><code>data</code> is used to store whatever arbitrary data you’d like along with the socket. It’s returned when <code>select()</code> returns. We’ll use <code>data</code> to keep track of what’s been sent and received on the socket.</p>
<p>Next is the event loop:</p>
<div class="highlight python"><pre><span></span><code><span class="kn">import</span> <span class="nn">selectors</span>
<span class="n">sel</span> <span class="o">=</span> <span class="n">selectors</span><span class="o">.</span><span class="n">DefaultSelector</span><span class="p">()</span>

<span class="c1"># ...</span>

<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">events</span> <span class="o">=</span> <span class="n">sel</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">mask</span> <span class="ow">in</span> <span class="n">events</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">accept_wrapper</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">fileobj</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">service_connection</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">mask</span><span class="p">)</span>
</code></pre></div>
<p><a href="https://docs.python.org/3/library/selectors.html#selectors.BaseSelector.select"><code>sel.select(timeout=None)</code></a> <a href="https://realpython.com/python-sockets/#blocking-calls">blocks</a> until there are sockets ready for I/O. It returns a list of (key, events) tuples, one for each socket. <code>key</code> is a <a href="https://docs.python.org/3/library/selectors.html#selectors.SelectorKey">SelectorKey</a> <code>namedtuple</code> that contains a <code>fileobj</code> attribute. <code>key.fileobj</code> is the socket object, and <code>mask</code> is an event mask of the operations that are ready.</p>
<p>If <code>key.data</code> is <code>None</code>, then we know it’s from the listening socket and we need to <code>accept()</code> the connection. We’ll call our own <code>accept()</code> wrapper function to get the new socket object and register it with the selector. We’ll look at it in a moment.</p>
<p>If <code>key.data</code> is not <code>None</code>, then we know it’s a client socket that’s already been accepted, and we need to service it. <code>service_connection()</code> is then called and passed <code>key</code> and <code>mask</code>, which contains everything we need to operate on the socket.</p>
<p>Let’s look at what our <code>accept_wrapper()</code> function does:</p>
<div class="highlight python"><pre><span></span><code><span class="k">def</span> <span class="nf">accept_wrapper</span><span class="p">(</span><span class="n">sock</span><span class="p">):</span>
    <span class="n">conn</span><span class="p">,</span> <span class="n">addr</span> <span class="o">=</span> <span class="n">sock</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>  <span class="c1"># Should be ready to read</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">'accepted connection from'</span><span class="p">,</span> <span class="n">addr</span><span class="p">)</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">setblocking</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">SimpleNamespace</span><span class="p">(</span><span class="n">addr</span><span class="o">=</span><span class="n">addr</span><span class="p">,</span> <span class="n">inb</span><span class="o">=</span><span class="sa">b</span><span class="s1">''</span><span class="p">,</span> <span class="n">outb</span><span class="o">=</span><span class="sa">b</span><span class="s1">''</span><span class="p">)</span>
    <span class="n">events</span> <span class="o">=</span> <span class="n">selectors</span><span class="o">.</span><span class="n">EVENT_READ</span> <span class="o">|</span> <span class="n">selectors</span><span class="o">.</span><span class="n">EVENT_WRITE</span>
    <span class="n">sel</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">events</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
</code></pre></div>
<p>Since the listening socket was registered for the event <code>selectors.EVENT_READ</code>, it should be ready to read. We call <code>sock.accept()</code> and then immediately call <code>conn.setblocking(False)</code> to put the socket in non-blocking mode.</p>
<p>Remember, this is the main objective in this version of the server since we don’t want it to <a href="https://realpython.com/python-sockets/#blocking-calls">block</a>. If it blocks, then the entire server is stalled until it returns. Which means other sockets are left waiting. This is the dreaded “hang” state that you don’t want your server to be in.</p>
<p>Next, we create an object to hold the data we want included along with the socket using the class <code>types.SimpleNamespace</code>. Since we want to know when the client connection is ready for reading and writing, both of those events are set using the following:</p>
<div class="highlight python"><pre><span></span><code><span class="n">events</span> <span class="o">=</span> <span class="n">selectors</span><span class="o">.</span><span class="n">EVENT_READ</span> <span class="o">|</span> <span class="n">selectors</span><span class="o">.</span><span class="n">EVENT_WRITE</span>
</code></pre></div>
<p>The <code>events</code> mask, socket, and data objects are then passed to <code>sel.register()</code>.</p>
<p>Now let’s look at <code>service_connection()</code> to see how a client connection is handled when it’s ready:</p>
<div class="highlight python"><pre><span></span><code><span class="k">def</span> <span class="nf">service_connection</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">mask</span><span class="p">):</span>
    <span class="n">sock</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">fileobj</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">data</span>
    <span class="k">if</span> <span class="n">mask</span> <span class="o">&amp;</span> <span class="n">selectors</span><span class="o">.</span><span class="n">EVENT_READ</span><span class="p">:</span>
        <span class="n">recv_data</span> <span class="o">=</span> <span class="n">sock</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>  <span class="c1"># Should be ready to read</span>
        <span class="k">if</span> <span class="n">recv_data</span><span class="p">:</span>
            <span class="n">data</span><span class="o">.</span><span class="n">outb</span> <span class="o">+=</span> <span class="n">recv_data</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'closing connection to'</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">addr</span><span class="p">)</span>
            <span class="n">sel</span><span class="o">.</span><span class="n">unregister</span><span class="p">(</span><span class="n">sock</span><span class="p">)</span>
            <span class="n">sock</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">mask</span> <span class="o">&amp;</span> <span class="n">selectors</span><span class="o">.</span><span class="n">EVENT_WRITE</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">outb</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'echoing'</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">outb</span><span class="p">),</span> <span class="s1">'to'</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">addr</span><span class="p">)</span>
            <span class="n">sent</span> <span class="o">=</span> <span class="n">sock</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">outb</span><span class="p">)</span>  <span class="c1"># Should be ready to write</span>
            <span class="n">data</span><span class="o">.</span><span class="n">outb</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">outb</span><span class="p">[</span><span class="n">sent</span><span class="p">:]</span>
</code></pre></div>
<p>This is the heart of the simple multi-connection server. <code>key</code> is the <code>namedtuple</code> returned from <code>select()</code> that contains the socket object (<code>fileobj</code>) and data object. <code>mask</code> contains the events that are ready.</p>
<p>If the socket is ready for reading, then <code>mask &amp; selectors.EVENT_READ</code> is true, and <code>sock.recv()</code> is called. Any data that’s read is appended to <code>data.outb</code> so it can be sent later.</p>
<p>Note the <code>else:</code> block if no data is received:</p>
<div class="highlight python"><pre><span></span><code><span class="k">if</span> <span class="n">recv_data</span><span class="p">:</span>
    <span class="n">data</span><span class="o">.</span><span class="n">outb</span> <span class="o">+=</span> <span class="n">recv_data</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">'closing connection to'</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">addr</span><span class="p">)</span>
    <span class="n">sel</span><span class="o">.</span><span class="n">unregister</span><span class="p">(</span><span class="n">sock</span><span class="p">)</span>
    <span class="n">sock</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div>
<p>This means that the client has closed their socket, so the server should too. But don’t forget to first call <code>sel.unregister()</code> so it’s no longer monitored by <code>select()</code>.</p>
<p>When the socket is ready for writing, which should always be the case for a healthy socket, any received data stored in <code>data.outb</code> is echoed to the client using <code>sock.send()</code>. The bytes sent are then removed from the send buffer:</p>
<div class="highlight python"><pre><span></span><code><span class="n">data</span><span class="o">.</span><span class="n">outb</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">outb</span><span class="p">[</span><span class="n">sent</span><span class="p">:]</span>
</code></pre></div>
<div><div class="rounded border border-light" style="display:block;position:relative;"><div style="display:block;width:100%;padding-top:12.5%;"></div><div class="rpad rounded border" data-unit="8x1" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;"><a href="https://srv.realpython.net/click/54948072182/?c=30337084727&amp;p=58946116052&amp;r=51177" rel="nofollow" target="_blank"><img src="./Socket Programming in Python (Guide) – Real Python_files/913fd28f526ec8aca047551bce4892b6" style="max-width: 100%; max-height: 100%; width: 100%;"></a></div></div><a class="small text-muted" href="https://realpython.com/account/join/" rel="nofollow"><i aria-hidden="true" class="fa fa-info-circle"> </i> Remove ads</a></div></section><section class="section3" id="multi-connection-client"><h3>Multi-Connection Client<a class="headerlink" href="https://realpython.com/python-sockets/#multi-connection-client" title="Permanent link"></a></h3>
<p>Now let’s look at the multi-connection client, <code>multiconn-client.py</code>. It’s very similar to the server, but instead of listening for connections, it starts by initiating connections via <code>start_connections()</code>:</p>
<div class="highlight python"><pre><span></span><code><span class="n">messages</span> <span class="o">=</span> <span class="p">[</span><span class="sa">b</span><span class="s1">'Message 1 from client.'</span><span class="p">,</span> <span class="sa">b</span><span class="s1">'Message 2 from client.'</span><span class="p">]</span>


<span class="k">def</span> <span class="nf">start_connections</span><span class="p">(</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">num_conns</span><span class="p">):</span>
    <span class="n">server_addr</span> <span class="o">=</span> <span class="p">(</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">num_conns</span><span class="p">):</span>
        <span class="n">connid</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'starting connection'</span><span class="p">,</span> <span class="n">connid</span><span class="p">,</span> <span class="s1">'to'</span><span class="p">,</span> <span class="n">server_addr</span><span class="p">)</span>
        <span class="n">sock</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
        <span class="n">sock</span><span class="o">.</span><span class="n">setblocking</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">sock</span><span class="o">.</span><span class="n">connect_ex</span><span class="p">(</span><span class="n">server_addr</span><span class="p">)</span>
        <span class="n">events</span> <span class="o">=</span> <span class="n">selectors</span><span class="o">.</span><span class="n">EVENT_READ</span> <span class="o">|</span> <span class="n">selectors</span><span class="o">.</span><span class="n">EVENT_WRITE</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">SimpleNamespace</span><span class="p">(</span><span class="n">connid</span><span class="o">=</span><span class="n">connid</span><span class="p">,</span>
                                     <span class="n">msg_total</span><span class="o">=</span><span class="nb">sum</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">m</span><span class="p">)</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">messages</span><span class="p">),</span>
                                     <span class="n">recv_total</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                     <span class="n">messages</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">messages</span><span class="p">),</span>
                                     <span class="n">outb</span><span class="o">=</span><span class="sa">b</span><span class="s1">''</span><span class="p">)</span>
        <span class="n">sel</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">sock</span><span class="p">,</span> <span class="n">events</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
</code></pre></div>
<p><code>num_conns</code> is read from the command-line, which is the number of connections to create to the server. Just like the server, each socket is set to non-blocking mode.</p>
<p><code>connect_ex()</code> is used instead of <code>connect()</code> since <code>connect()</code> would immediately raise a <code>BlockingIOError</code> exception. <code>connect_ex()</code> initially returns an error indicator, <code>errno.EINPROGRESS</code>, instead of raising an exception while the connection is in progress. Once the connection is completed, the socket is ready for reading and writing and is returned as such by <code>select()</code>.</p>
<p>After the socket is setup, the data we want stored with the socket is created using the class <code>types.SimpleNamespace</code>. The messages the client will send to the server are copied using <code>list(messages)</code> since each connection will call <code>socket.send()</code> and modify the list. Everything needed to keep track of what the client needs to send, has sent and received, and the total number of bytes in the messages is stored in the object <code>data</code>.</p>
<p>Let’s look at <code>service_connection()</code>. It’s fundamentally the same as the server:</p>
<div class="highlight python"><pre><span></span><code><span class="k">def</span> <span class="nf">service_connection</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">mask</span><span class="p">):</span>
    <span class="n">sock</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">fileobj</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">data</span>
    <span class="k">if</span> <span class="n">mask</span> <span class="o">&amp;</span> <span class="n">selectors</span><span class="o">.</span><span class="n">EVENT_READ</span><span class="p">:</span>
        <span class="n">recv_data</span> <span class="o">=</span> <span class="n">sock</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>  <span class="c1"># Should be ready to read</span>
        <span class="k">if</span> <span class="n">recv_data</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'received'</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="n">recv_data</span><span class="p">),</span> <span class="s1">'from connection'</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">connid</span><span class="p">)</span>
            <span class="n">data</span><span class="o">.</span><span class="n">recv_total</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">recv_data</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">recv_data</span> <span class="ow">or</span> <span class="n">data</span><span class="o">.</span><span class="n">recv_total</span> <span class="o">==</span> <span class="n">data</span><span class="o">.</span><span class="n">msg_total</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'closing connection'</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">connid</span><span class="p">)</span>
            <span class="n">sel</span><span class="o">.</span><span class="n">unregister</span><span class="p">(</span><span class="n">sock</span><span class="p">)</span>
            <span class="n">sock</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">mask</span> <span class="o">&amp;</span> <span class="n">selectors</span><span class="o">.</span><span class="n">EVENT_WRITE</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="o">.</span><span class="n">outb</span> <span class="ow">and</span> <span class="n">data</span><span class="o">.</span><span class="n">messages</span><span class="p">:</span>
            <span class="n">data</span><span class="o">.</span><span class="n">outb</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">messages</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">outb</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'sending'</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">outb</span><span class="p">),</span> <span class="s1">'to connection'</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">connid</span><span class="p">)</span>
            <span class="n">sent</span> <span class="o">=</span> <span class="n">sock</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">outb</span><span class="p">)</span>  <span class="c1"># Should be ready to write</span>
            <span class="n">data</span><span class="o">.</span><span class="n">outb</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">outb</span><span class="p">[</span><span class="n">sent</span><span class="p">:]</span>
</code></pre></div>
<p>There’s one important difference. It keeps track of the number of bytes it’s received from the server so it can close its side of the connection. When the server detects this, it closes its side of the connection too.</p>
<p>Note that by doing this, the server depends on the client being well-behaved: the server expects the client to close its side of the connection when it’s done sending messages. If the client doesn’t close, the server will leave the connection open. In a real application, you may want to guard against this in your server and prevent client connections from accumulating if they don’t send a request after a certain amount of time.</p>
</section><section class="section3" id="running-the-multi-connection-client-and-server"><h3>Running the Multi-Connection Client and Server<a class="headerlink" href="https://realpython.com/python-sockets/#running-the-multi-connection-client-and-server" title="Permanent link"></a></h3>
<p>Now let’s run <code>multiconn-server.py</code> and <code>multiconn-client.py</code>. They both use <a href="https://realpython.com/python-command-line-arguments/">command-line arguments</a>. You can run them without arguments to see the options.</p>
<p>For the server, pass a <code>host</code> and <code>port</code> number:</p>
<div class="highlight sh"><pre><span></span><code><span class="gp">$ </span>./multiconn-server.py
<span class="go">usage: ./multiconn-server.py &lt;host&gt; &lt;port&gt;</span>
</code></pre></div>
<p>For the client, also pass the number of connections to create to the server, <code>num_connections</code>:</p>
<div class="highlight sh"><pre><span></span><code><span class="gp">$ </span>./multiconn-client.py
<span class="go">usage: ./multiconn-client.py &lt;host&gt; &lt;port&gt; &lt;num_connections&gt;</span>
</code></pre></div>
<p>Below is the server output when listening on the loopback interface on port 65432:</p>
<div class="highlight sh"><pre><span></span><code><span class="gp">$ </span>./multiconn-server.py <span class="m">127</span>.0.0.1 <span class="m">65432</span>
<span class="go">listening on ('127.0.0.1', 65432)</span>
<span class="go">accepted connection from ('127.0.0.1', 61354)</span>
<span class="go">accepted connection from ('127.0.0.1', 61355)</span>
<span class="go">echoing b'Message 1 from client.Message 2 from client.' to ('127.0.0.1', 61354)</span>
<span class="go">echoing b'Message 1 from client.Message 2 from client.' to ('127.0.0.1', 61355)</span>
<span class="go">closing connection to ('127.0.0.1', 61354)</span>
<span class="go">closing connection to ('127.0.0.1', 61355)</span>
</code></pre></div>
<p>Below is the client output when it creates two connections to the server above:</p>
<div class="highlight sh"><pre><span></span><code><span class="gp">$ </span>./multiconn-client.py <span class="m">127</span>.0.0.1 <span class="m">65432</span> <span class="m">2</span>
<span class="go">starting connection 1 to ('127.0.0.1', 65432)</span>
<span class="go">starting connection 2 to ('127.0.0.1', 65432)</span>
<span class="go">sending b'Message 1 from client.' to connection 1</span>
<span class="go">sending b'Message 2 from client.' to connection 1</span>
<span class="go">sending b'Message 1 from client.' to connection 2</span>
<span class="go">sending b'Message 2 from client.' to connection 2</span>
<span class="go">received b'Message 1 from client.Message 2 from client.' from connection 1</span>
<span class="go">closing connection 1</span>
<span class="go">received b'Message 1 from client.Message 2 from client.' from connection 2</span>
<span class="go">closing connection 2</span>
</code></pre></div>
<div><div class="rounded border border-light" style="display:block;position:relative;"><div style="display:block;width:100%;padding-top:12.5%;"></div><div class="rpad rounded border" data-unit="8x1" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;"><a href="https://srv.realpython.net/click/36075076065/?c=30337084727&amp;p=58946116052&amp;r=51584" rel="nofollow" target="_blank"><img src="./Socket Programming in Python (Guide) – Real Python_files/fc3dcce3b30783158d89077cf5a8810e" style="max-width: 100%; max-height: 100%; width: 100%;"></a></div></div><a class="small text-muted" href="https://realpython.com/account/join/" rel="nofollow"><i aria-hidden="true" class="fa fa-info-circle"> </i> Remove ads</a></div></section></section><section class="section2" id="application-client-and-server"><h2>Application Client and Server<a class="headerlink" href="https://realpython.com/python-sockets/#application-client-and-server" title="Permanent link"></a></h2>
<p>The multi-connection client and server example is definitely an improvement compared with where we started. However, let’s take one more step and address the shortcomings of the previous “multiconn” example in a final implementation: the application client and server.</p>
<p>We want a client and server that handles errors appropriately so other connections aren’t affected. Obviously, our client or server shouldn’t come crashing down in a ball of fury if an exception isn’t caught. This is something we haven’t discussed up until now. I’ve intentionally left out error handling for brevity and clarity in the examples.</p>
<p>Now that you’re familiar with the basic API, non-blocking sockets, and <code>select()</code>, we can add some error handling and discuss the “elephant in the room” that I’ve kept hidden from you behind that large curtain over there. Yes, I’m talking about the custom class I mentioned way back in the introduction. I knew you wouldn’t forget.</p>
<p>First, let’s address the errors:</p>
<blockquote>
<p>“All errors raise exceptions. The normal exceptions for invalid argument types and out-of-memory conditions can be raised; starting from Python 3.3, errors related to socket or address semantics raise <code>OSError</code> or one of its subclasses.” <a href="https://docs.python.org/3/library/socket.html">(Source)</a></p>
</blockquote>
<p>We need to catch <code>OSError</code>. Another thing I haven’t mentioned in relation to errors is timeouts. You’ll see them discussed in many places in the documentation. Timeouts happen and are a “normal” error. Hosts and routers are rebooted, switch ports go bad, cables go bad, cables get unplugged, you name it. You should be prepared for these and other errors and handle them in your code.</p>
<p>What about the “elephant in the room?” As hinted by the socket type <code>socket.SOCK_STREAM</code>, when using TCP, you’re reading from a continuous stream of bytes. It’s like reading from a file on disk, but instead you’re reading bytes from the network.</p>
<p>However, unlike reading a file, there’s no <a href="https://docs.python.org/3/tutorial/inputoutput.html#methods-of-file-objects"><code>f.seek()</code></a>. In other words, you can’t reposition the socket pointer, if there was one, and move randomly around the data reading whatever, whenever you’d like.</p>
<p>When bytes arrive at your socket, there are network buffers involved. Once you’ve read them, they need to be saved somewhere. Calling <code>recv()</code> again reads the next stream of bytes available from the socket.</p>
<p>What this means is that you’ll be reading from the socket in chunks. You need to call <code>recv()</code> and save the data in a buffer until you’ve read enough bytes to have a complete message that makes sense to your application.</p>
<p>It’s up to you to define and keep track of where the message boundaries are. As far as the TCP socket is concerned, it’s just sending and receiving raw bytes to and from the network. It knows nothing about what those raw bytes mean.</p>
<p>This bring us to defining an application-layer protocol. What’s an application-layer protocol? Put simply, your application will send and receive messages. These messages are your application’s protocol.</p>
<p>In other words, the length and format you choose for these messages define the semantics and behavior of your application. This is directly related to what I explained in the previous paragraph regarding reading bytes from the socket. When you’re reading bytes with <code>recv()</code>, you need to keep up with how many bytes were read and figure out where the message boundaries are.</p>
<p>How is this done? One way is to always send fixed-length messages. If they’re always the same size, then it’s easy. When you’ve read that number of bytes into a buffer, then you know you have one complete message.</p>
<p>However, using fixed-length messages is inefficient for small messages where you’d need to use padding to fill them out. Also, you’re still left with the problem of what to do about data that doesn’t fit into one message.</p>
<p>In this tutorial, we’ll take a generic approach. An approach that’s used by many protocols, including HTTP. We’ll prefix messages with a header that includes the content length as well as any other fields we need. By doing this, we’ll only need to keep up with the header. Once we’ve read the header, we can process it to determine the length of the message’s content and then read that number of bytes to consume it.</p>
<p>We’ll implement this by creating a custom class that can send and receive messages that contain text or binary data. You can improve and extend it for your own applications. The most important thing is that you’ll be able to see an example of how this is done.</p>
<p>I need to mention something regarding sockets and bytes that may affect you. As we talked about earlier, when sending and receiving data via sockets, you’re sending and receiving raw bytes.</p>
<p>If you receive data and want to use it in a context where it’s interpreted as multiple bytes, for example a 4-byte integer, you’ll need to take into account that it could be in a format that’s not native to your machine’s CPU. The client or server on the other end could have a CPU that uses a different byte order than your own. If this is the case, you’ll need to convert it to your host’s native byte order before using it.</p>
<p>This byte order is referred to as a CPU’s <a href="https://en.wikipedia.org/wiki/Endianness">endianness</a>. See <a href="https://realpython.com/python-sockets/#byte-endianness">Byte Endianness</a> in the reference section for details. We’ll avoid this issue by taking advantage of <a href="https://realpython.com/python-encodings-guide/">Unicode</a> for our message header and using the encoding UTF-8. Since UTF-8 uses an 8-bit encoding, there are no byte ordering issues.</p>
<p>You can find an explanation in Python’s <a href="https://docs.python.org/3/library/codecs.html#encodings-and-unicode">Encodings and Unicode</a> documentation. Note that this applies to the text header only. We’ll use an explicit type and encoding defined in the header for the content that’s being sent, the message payload. This will allow us to transfer any data we’d like (text or binary), in any format.</p>
<p>You can easily determine the byte order of your machine by using <code>sys.byteorder</code>. For example, on my Intel laptop, this happens:</p>
<div class="highlight sh"><pre><span></span><code><span class="gp">$ </span>python3 -c <span class="s1">'import sys; print(repr(sys.byteorder))'</span>
<span class="go">'little'</span>
</code></pre></div>
<p>If I run this in a virtual machine that <a href="https://www.qemu.org/">emulates</a> a big-endian CPU (PowerPC), then this happens:</p>
<div class="highlight sh"><pre><span></span><code><span class="gp">$ </span>python3 -c <span class="s1">'import sys; print(repr(sys.byteorder))'</span>
<span class="go">'big'</span>
</code></pre></div>
<p>In this example application, our application-layer protocol defines the header as Unicode text with a UTF-8 encoding. For the actual content in the message, the message payload, you’ll still have to swap the byte order manually if needed.</p>
<p>This will depend on your application and whether or not it needs to process multi-byte binary data from a machine with a different endianness. You can help your client or server implement binary support by adding additional headers and using them to pass parameters, similar to HTTP.</p>
<p>Don’t worry if this doesn’t make sense yet. In the next section, you’ll see how all of this works and fits together.</p>
<div><div class="rounded border border-light" style="display:block;position:relative;"><div style="display:block;width:100%;padding-top:12.5%;"></div><div class="rpad rounded border" data-unit="8x1" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;"><a href="https://srv.realpython.net/click/44043106944/?c=30337084727&amp;p=58946116052&amp;r=57099" rel="nofollow" target="_blank"><img src="./Socket Programming in Python (Guide) – Real Python_files/39d33f31dff9ce5e91d62b0a7b0c7420" style="max-width: 100%; max-height: 100%; width: 100%;"></a></div></div><a class="small text-muted" href="https://realpython.com/account/join/" rel="nofollow"><i aria-hidden="true" class="fa fa-info-circle"> </i> Remove ads</a></div><section class="section3" id="application-protocol-header"><h3>Application Protocol Header<a class="headerlink" href="https://realpython.com/python-sockets/#application-protocol-header" title="Permanent link"></a></h3>
<p>Let’s fully define the protocol header. The protocol header is:</p>
<ul>
<li>Variable-length text</li>
<li>Unicode with the encoding UTF-8</li>
<li>A Python dictionary serialized using <a href="https://realpython.com/python-json/">JSON</a></li>
</ul>
<p>The required headers, or sub-headers, in the protocol header’s dictionary are as follows:</p>
<div class="table-responsive">
<table class="table table-hover">
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>byteorder</code></td>
<td>The byte order of the machine (uses <code>sys.byteorder</code>). This may not be required for your application.</td>
</tr>
<tr>
<td><code>content-length</code></td>
<td>The length of the content in bytes.</td>
</tr>
<tr>
<td><code>content-type</code></td>
<td>The type of content in the payload, for example, <code>text/json</code> or <code>binary/my-binary-type</code>.</td>
</tr>
<tr>
<td><code>content-encoding</code></td>
<td>The encoding used by the content, for example, <code>utf-8</code> for Unicode text or <code>binary</code> for binary data.</td>
</tr>
</tbody>
</table>
</div>
<p>These headers inform the receiver about the content in the payload of the message. This allows you to send arbitrary data while providing enough information so the content can be decoded and interpreted correctly by the receiver. Since the headers are in a dictionary, it’s easy to add additional headers by inserting key/value pairs as needed.</p>
</section><section class="section3" id="sending-an-application-message"><h3>Sending an Application Message<a class="headerlink" href="https://realpython.com/python-sockets/#sending-an-application-message" title="Permanent link"></a></h3>
<p>There’s still a bit of a problem. We have a variable-length header, which is nice and flexible, but how do you know the length of the header when reading it with <code>recv()</code>?</p>
<p>When we previously talked about using <code>recv()</code> and message boundaries, I mentioned that fixed-length headers can be inefficient. That’s true, but we’re going to use a small, 2-byte, fixed-length header to prefix the JSON header that contains its length.</p>
<p>You can think of this as a hybrid approach to sending messages. In effect, we’re bootstrapping the message receive process by sending the length of the header first. This makes it easy for our receiver to deconstruct the message.</p>
<p>To give you a better idea of the message format, let’s look at a message in its entirety:</p>
<figure><a href="./Socket Programming in Python (Guide) – Real Python_files/sockets-app-message.2e131b0751e3.jpg" target="_blank"><img loading="lazy" class="img-fluid mx-auto d-block w-66" src="./Socket Programming in Python (Guide) – Real Python_files/sockets-app-message.2e131b0751e3.jpg" width="769" height="672" srcset="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/sockets-app-message.2e131b0751e3.jpg&amp;w=192&amp;sig=dbcf11baf145f87ecf56eeb11de655514e37e0da 192w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/sockets-app-message.2e131b0751e3.jpg&amp;w=384&amp;sig=c70c1ec1f35e51f2a95778a748a62c11218fd26a 384w, https://files.realpython.com/media/sockets-app-message.2e131b0751e3.jpg 769w" sizes="75vw" alt="Sockets application message" data-asset="525"></a></figure>
<p>A message starts with a fixed-length header of 2 bytes that’s an integer in network byte order. This is the length of the next header, the variable-length JSON header. Once we’ve read 2 bytes with <code>recv()</code>, then we know we can process the 2 bytes as an integer and then read that number of bytes before decoding the UTF-8 JSON header.</p>
<p>The <a href="https://realpython.com/python-sockets/#application-protocol-header">JSON header</a> contains a dictionary of additional headers. One of those is <code>content-length</code>, which is the number of bytes of the message’s content (not including the JSON header). Once we’ve called <code>recv()</code> and read <code>content-length</code> bytes, we’ve reached a message boundary and read an entire message.</p>
</section><section class="section3" id="application-message-class"><h3>Application Message Class<a class="headerlink" href="https://realpython.com/python-sockets/#application-message-class" title="Permanent link"></a></h3>
<p>Finally, the payoff! Let’s look at the <code>Message</code> class and see how it’s used with <code>select()</code> when read and write events happen on the socket.</p>
<p>For this example application, I had to come up with an idea for what types of messages the client and server would use. We’re far beyond toy echo clients and servers at this point.</p>
<p>To keep things simple and still demonstrate how things would work in a real application, I created an application protocol that implements a basic search feature. The client sends a search request and the server does a lookup for a match. If the request sent by the client isn’t recognized as a search, the server assumes it’s a binary request and returns a binary response.</p>
<p>After reading the following sections, running the examples, and experimenting with the code, you’ll see how things work. You can then use the <code>Message</code> class as a starting point and modify it for your own use.</p>
<p>We’re really not that far off from the “multiconn” client and server example. The event loop code stays the same in <code>app-client.py</code> and <code>app-server.py</code>. What I’ve done is move the message code into a class named <code>Message</code> and added methods to support reading, writing, and processing of the headers and content. This is a great example for using a class.</p>
<p>As we discussed before and you’ll see below, working with sockets involves keeping state. By using a class, we keep all of the state, data, and code bundled together in an organized unit. An instance of the class is created for each socket in the client and server when a connection is started or accepted.</p>
<p>The class is mostly the same for both the client and the server for the wrapper and utility methods. They start with an underscore, like <code>Message._json_encode()</code>. These methods simplify working with the class. They help other methods by allowing them to stay shorter and support the <a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself">DRY</a> principle.</p>
<p>The server’s <code>Message</code> class works in essentially the same way as the client’s and vice-versa. The difference being that the client initiates the connection and sends a request message, followed by processing the server’s response message. Conversely, the server waits for a connection, processes the client’s request message, and then sends a response message.</p>
<p>It looks like this:</p>
<div class="table-responsive">
<table class="table table-hover">
<thead>
<tr>
<th>Step</th>
<th>Endpoint</th>
<th>Action / Message Content</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Client</td>
<td>Sends a <code>Message</code> containing request content</td>
</tr>
<tr>
<td>2</td>
<td>Server</td>
<td>Receives and processes client request <code>Message</code></td>
</tr>
<tr>
<td>3</td>
<td>Server</td>
<td>Sends a <code>Message</code> containing response content</td>
</tr>
<tr>
<td>4</td>
<td>Client</td>
<td>Receives and processes server response <code>Message</code></td>
</tr>
</tbody>
</table>
</div>
<p>Here’s the file and code layout:</p>
<div class="table-responsive">
<table class="table table-hover">
<thead>
<tr>
<th>Application</th>
<th>File</th>
<th>Code</th>
</tr>
</thead>
<tbody>
<tr>
<td>Server</td>
<td><code>app-server.py</code></td>
<td>The server’s main script</td>
</tr>
<tr>
<td>Server</td>
<td><code>libserver.py</code></td>
<td>The server’s <code>Message</code> class</td>
</tr>
<tr>
<td>Client</td>
<td><code>app-client.py</code></td>
<td>The client’s main script</td>
</tr>
<tr>
<td>Client</td>
<td><code>libclient.py</code></td>
<td>The client’s <code>Message</code> class</td>
</tr>
</tbody>
</table>
</div>
<section class="section4" id="message-entry-point"><h4>Message Entry Point<a class="headerlink" href="https://realpython.com/python-sockets/#message-entry-point" title="Permanent link"></a></h4>
<p>I’d like to discuss how the <code>Message</code> class works by first mentioning an aspect of its design that wasn’t immediately obvious to me. Only after refactoring it at least five times did I arrive at what it is currently. Why? Managing state.</p>
<p>After a <code>Message</code> object is created, it’s associated with a socket that’s monitored for events using <code>selector.register()</code>:</p>
<div class="highlight python"><pre><span></span><code><span class="n">message</span> <span class="o">=</span> <span class="n">libserver</span><span class="o">.</span><span class="n">Message</span><span class="p">(</span><span class="n">sel</span><span class="p">,</span> <span class="n">conn</span><span class="p">,</span> <span class="n">addr</span><span class="p">)</span>
<span class="n">sel</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">selectors</span><span class="o">.</span><span class="n">EVENT_READ</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
</code></pre></div>
<div class="alert alert-primary" role="alert">
<p><strong>Note:</strong> Some of the code examples in this section are from the server’s main script and <code>Message</code> class, but this section and discussion applies equally to the client as well. I’ll show and explain the client’s version when it differs.</p>
</div>
<p>When events are ready on the socket, they’re returned by <code>selector.select()</code>. We can then get a reference back to the message object using the <code>data</code> attribute on the <code>key</code> object and call a method in <code>Message</code>:</p>
<div class="highlight python"><pre><span></span><code><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">events</span> <span class="o">=</span> <span class="n">sel</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">mask</span> <span class="ow">in</span> <span class="n">events</span><span class="p">:</span>
        <span class="c1"># ...</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">data</span>
        <span class="n">message</span><span class="o">.</span><span class="n">process_events</span><span class="p">(</span><span class="n">mask</span><span class="p">)</span>
</code></pre></div>
<p>Looking at the event loop above, you’ll see that <code>sel.select()</code> is in the driver’s seat. It’s blocking, waiting at the top of the loop for events. It’s responsible for waking up when read and write events are ready to be processed on the socket. Which means, indirectly, it’s also responsible for calling the method <code>process_events()</code>. This is what I mean when I say the method <code>process_events()</code> is the entry point.</p>
<p>Let’s see what the <code>process_events()</code> method does:</p>
<div class="highlight python"><pre><span></span><code><span class="k">def</span> <span class="nf">process_events</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mask</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">mask</span> <span class="o">&amp;</span> <span class="n">selectors</span><span class="o">.</span><span class="n">EVENT_READ</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">mask</span> <span class="o">&amp;</span> <span class="n">selectors</span><span class="o">.</span><span class="n">EVENT_WRITE</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">()</span>
</code></pre></div>
<p>That’s good: <code>process_events()</code> is simple. It can only do two things: call <code>read()</code> and <code>write()</code>.</p>
<p>This brings us back to managing state. After a few refactorings, I decided that if another method depended on state variables having a certain value, then they would only be called from <code>read()</code> and <code>write()</code>. This keeps the logic as simple as possible as events come in on the socket for processing.</p>
<p>This may seem obvious, but the first few iterations of the class were a mix of some methods that checked the current state and, depending on their value, called other methods to process data outside <code>read()</code> or <code>write()</code>. In the end, this proved too complex to manage and keep up with.</p>
<p>You should definitely modify the class to suit your own needs so it works best for you, but I’d recommend that you keep the state checks and the calls to methods that depend on that state to the <code>read()</code> and <code>write()</code> methods if possible.</p>
<p>Let’s look at <code>read()</code>. This is the server’s version, but the client’s is the same. It just uses a different method name, <code>process_response()</code> instead of <code>process_request()</code>:</p>
<div class="highlight python"><pre><span></span><code><span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_read</span><span class="p">()</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_jsonheader_len</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">process_protoheader</span><span class="p">()</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_jsonheader_len</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">jsonheader</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">process_jsonheader</span><span class="p">()</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">jsonheader</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">process_request</span><span class="p">()</span>
</code></pre></div>
<p>The <code>_read()</code> method is called first. It calls <code>socket.recv()</code> to read data from the socket and store it in a receive buffer.</p>
<p>Remember that when <code>socket.recv()</code> is called, all of the data that makes up a complete message may not have arrived yet. <code>socket.recv()</code> may need to be called again. This is why there are state checks for each part of the message before calling the appropriate method to process it.</p>
<p>Before a method processes its part of the message, it first checks to make sure enough bytes have been read into the receive buffer. If there are, it processes its respective bytes, removes them from the buffer and writes its output to a variable that’s used by the next processing stage. Since there are three components to a message, there are three state checks and <code>process</code> method calls:</p>
<div class="table-responsive">
<table class="table table-hover">
<thead>
<tr>
<th>Message Component</th>
<th>Method</th>
<th>Output</th>
</tr>
</thead>
<tbody>
<tr>
<td>Fixed-length header</td>
<td><code>process_protoheader()</code></td>
<td><code>self._jsonheader_len</code></td>
</tr>
<tr>
<td>JSON header</td>
<td><code>process_jsonheader()</code></td>
<td><code>self.jsonheader</code></td>
</tr>
<tr>
<td>Content</td>
<td><code>process_request()</code></td>
<td><code>self.request</code></td>
</tr>
</tbody>
</table>
</div>
<p>Next, let’s look at <code>write()</code>. This is the server’s version:</p>
<div class="highlight python"><pre><span></span><code><span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">response_created</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">()</span>
</code></pre></div>
<p><code>write()</code> checks first for a <code>request</code>. If one exists and a response hasn’t been created, <code>create_response()</code> is called. <code>create_response()</code> sets the state variable <code>response_created</code> and writes the response to the send buffer.</p>
<p>The <code>_write()</code> method calls <code>socket.send()</code> if there’s data in the send buffer.</p>
<p>Remember that when <code>socket.send()</code> is called, all of the data in the send buffer may not have been queued for transmission. The network buffers for the socket may be full, and <code>socket.send()</code> may need to be called again. This is why there are state checks. <code>create_response()</code> should only be called once, but it’s expected that <code>_write()</code> will need to be called multiple times.</p>
<p>The client version of <code>write()</code> is similar:</p>
<div class="highlight python"><pre><span></span><code><span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request_queued</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">queue_request</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">()</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request_queued</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_buffer</span><span class="p">:</span>
            <span class="c1"># Set selector to listen for read events, we're done writing.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_selector_events_mask</span><span class="p">(</span><span class="s1">'r'</span><span class="p">)</span>
</code></pre></div>
<p>Since the client initiates a connection to the server and sends a request first, the state variable <code>_request_queued</code> is checked. If a request hasn’t been queued, it calls <code>queue_request()</code>. <code>queue_request()</code> creates the request and writes it to the send buffer. It also sets the state variable <code>_request_queued</code> so it’s only called once.</p>
<p>Just like the server, <code>_write()</code> calls <code>socket.send()</code> if there’s data in the send buffer.</p>
<p>The notable difference in the client’s version of <code>write()</code> is the last check to see if the request has been queued. This will be explained more in the section <a href="https://realpython.com/python-sockets/#client-main-script">Client Main Script</a>, but the reason for this is to tell <code>selector.select()</code> to stop monitoring the socket for write events. If the request has been queued and the send buffer is empty, then we’re done writing and we’re only interested in read events. There’s no reason to be notified that the socket is writable.</p>
<p>I’ll wrap up this section by leaving you with one thought. The main purpose of this section was to explain that <code>selector.select()</code> is calling into the <code>Message</code> class via the method <code>process_events()</code> and to describe how state is managed.</p>
<p>This is important because <code>process_events()</code> will be called many times over the life of the connection. Therefore, make sure that any methods that should only be called once are either checking a state variable themselves, or the state variable set by the method is checked by the caller.</p>
</section><section class="section4" id="server-main-script"><h4>Server Main Script<a class="headerlink" href="https://realpython.com/python-sockets/#server-main-script" title="Permanent link"></a></h4>
<p>In the server’s main script <code>app-server.py</code>, arguments are read from the command line that specify the interface and port to listen on:</p>
<div class="highlight sh"><pre><span></span><code><span class="gp">$ </span>./app-server.py
<span class="go">usage: ./app-server.py &lt;host&gt; &lt;port&gt;</span>
</code></pre></div>
<p>For example, to listen on the loopback interface on port <code>65432</code>, enter:</p>
<div class="highlight sh"><pre><span></span><code><span class="gp">$ </span>./app-server.py <span class="m">127</span>.0.0.1 <span class="m">65432</span>
<span class="go">listening on ('127.0.0.1', 65432)</span>
</code></pre></div>
<p>Use an empty string for <code>&lt;host&gt;</code> to listen on all interfaces.</p>
<p>After creating the socket, a call is made to <code>socket.setsockopt()</code> with the option <code>socket.SO_REUSEADDR</code>:</p>
<div class="highlight python"><pre><span></span><code><span class="c1"># Avoid bind() exception: OSError: [Errno 48] Address already in use</span>
<span class="n">lsock</span><span class="o">.</span><span class="n">setsockopt</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">SOL_SOCKET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SO_REUSEADDR</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</code></pre></div>
<p>Setting this socket option avoids the error <code>Address already in use</code>. You’ll see this when starting the server and a previously used TCP socket on the same port has connections in the <a href="http://www.serverframework.com/asynchronousevents/2011/01/time-wait-and-its-design-implications-for-protocols-and-scalable-servers.html">TIME_WAIT</a> state.</p>
<p>For example, if the server actively closed a connection, it will remain in the <code>TIME_WAIT</code> state for two minutes or more, depending on the operating system. If you try to start the server again before the <code>TIME_WAIT</code> state expires, you’ll get an <code>OSError</code> exception of <code>Address already in use</code>. This is a safeguard to make sure that any delayed packets in the network aren’t delivered to the wrong application.</p>
<p>The event loop catches any errors so the server can stay up and continue to run:</p>
<div class="highlight python"><pre><span></span><code><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">events</span> <span class="o">=</span> <span class="n">sel</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">mask</span> <span class="ow">in</span> <span class="n">events</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">accept_wrapper</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">fileobj</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">message</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">data</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">message</span><span class="o">.</span><span class="n">process_events</span><span class="p">(</span><span class="n">mask</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">'main: error: exception for'</span><span class="p">,</span>
                      <span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="n">message</span><span class="o">.</span><span class="n">addr</span><span class="si">}</span><span class="s1">:</span><span class="se">\n</span><span class="si">{</span><span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
                <span class="n">message</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div>
<p>When a client connection is accepted, a <code>Message</code> object is created:</p>
<div class="highlight python"><pre><span></span><code><span class="k">def</span> <span class="nf">accept_wrapper</span><span class="p">(</span><span class="n">sock</span><span class="p">):</span>
    <span class="n">conn</span><span class="p">,</span> <span class="n">addr</span> <span class="o">=</span> <span class="n">sock</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>  <span class="c1"># Should be ready to read</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">'accepted connection from'</span><span class="p">,</span> <span class="n">addr</span><span class="p">)</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">setblocking</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">message</span> <span class="o">=</span> <span class="n">libserver</span><span class="o">.</span><span class="n">Message</span><span class="p">(</span><span class="n">sel</span><span class="p">,</span> <span class="n">conn</span><span class="p">,</span> <span class="n">addr</span><span class="p">)</span>
    <span class="n">sel</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">selectors</span><span class="o">.</span><span class="n">EVENT_READ</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
</code></pre></div>
<p>The <code>Message</code> object is associated with the socket in the call to <code>sel.register()</code> and is initially set to be monitored for read events only. Once the request has been read, we’ll modify it to listen for write events only.</p>
<p>An advantage of taking this approach in the server is that in most cases, when a socket is healthy and there are no network issues, it will always be writable.</p>
<p>If we told <code>sel.register()</code> to also monitor <code>EVENT_WRITE</code>, the event loop would immediately wakeup and notify us that this is the case. However, at this point, there’s no reason to wake up and call <code>send()</code> on the socket. There’s no response to send since a request hasn’t been processed yet. This would consume and waste valuable CPU cycles.</p>
</section><section class="section4" id="server-message-class"><h4>Server Message Class<a class="headerlink" href="https://realpython.com/python-sockets/#server-message-class" title="Permanent link"></a></h4>
<p>In the section <a href="https://realpython.com/python-sockets/#message-entry-point">Message Entry Point</a>, we looked at how the <code>Message</code> object was called into action when socket events were ready via <code>process_events()</code>. Now let’s look at what happens as data is read on the socket and a component, or piece, of the message is ready to be processed by the server.</p>
<p>The server’s message class is in <code>libserver.py</code>. You can find the <a href="https://github.com/realpython/materials/tree/master/python-sockets-tutorial">source code on GitHub</a>.</p>
<p>The methods appear in the class in the order in which processing takes place for a message.</p>
<p>When the server has read at least 2 bytes, the fixed-length header can be processed:</p>
<div class="highlight python"><pre><span></span><code><span class="k">def</span> <span class="nf">process_protoheader</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hdrlen</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_recv_buffer</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">hdrlen</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_jsonheader_len</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s1">'&gt;H'</span><span class="p">,</span>
                                             <span class="bp">self</span><span class="o">.</span><span class="n">_recv_buffer</span><span class="p">[:</span><span class="n">hdrlen</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_recv_buffer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_recv_buffer</span><span class="p">[</span><span class="n">hdrlen</span><span class="p">:]</span>
</code></pre></div>
<p>The fixed-length header is a 2-byte integer in network (big-endian) byte order that contains the length of the JSON header. <a href="https://docs.python.org/3/library/struct.html">struct.unpack()</a> is used to read the value, decode it, and store it in <code>self._jsonheader_len</code>. After processing the piece of the message it’s responsible for, <code>process_protoheader()</code> removes it from the receive buffer.</p>
<p>Just like the fixed-length header, when there’s enough data in the receive buffer to contain the JSON header, it can be processed as well:</p>
<div class="highlight python"><pre><span></span><code><span class="k">def</span> <span class="nf">process_jsonheader</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">hdrlen</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_jsonheader_len</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_recv_buffer</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">hdrlen</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">jsonheader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_json_decode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_recv_buffer</span><span class="p">[:</span><span class="n">hdrlen</span><span class="p">],</span>
                                            <span class="s1">'utf-8'</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_recv_buffer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_recv_buffer</span><span class="p">[</span><span class="n">hdrlen</span><span class="p">:]</span>
        <span class="k">for</span> <span class="n">reqhdr</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">'byteorder'</span><span class="p">,</span> <span class="s1">'content-length'</span><span class="p">,</span> <span class="s1">'content-type'</span><span class="p">,</span>
                       <span class="s1">'content-encoding'</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">reqhdr</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">jsonheader</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Missing required header "</span><span class="si">{</span><span class="n">reqhdr</span><span class="si">}</span><span class="s1">".'</span><span class="p">)</span>
</code></pre></div>
<p>The method <code>self._json_decode()</code> is called to decode and deserialize the JSON header into a dictionary. Since the JSON header is defined as Unicode with a UTF-8 encoding, <code>utf-8</code> is hardcoded in the call. The result is saved to <code>self.jsonheader</code>. After processing the piece of the message it’s responsible for, <code>process_jsonheader()</code> removes it from the receive buffer.</p>
<p>Next is the actual content, or payload, of the message. It’s described by the JSON header in <code>self.jsonheader</code>. When <code>content-length</code> bytes are available in the receive buffer, the request can be processed:</p>
<div class="highlight python"><pre><span></span><code><span class="k">def</span> <span class="nf">process_request</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">content_len</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">jsonheader</span><span class="p">[</span><span class="s1">'content-length'</span><span class="p">]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_recv_buffer</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">content_len</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_recv_buffer</span><span class="p">[:</span><span class="n">content_len</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_recv_buffer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_recv_buffer</span><span class="p">[</span><span class="n">content_len</span><span class="p">:]</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">jsonheader</span><span class="p">[</span><span class="s1">'content-type'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'text/json'</span><span class="p">:</span>
        <span class="n">encoding</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">jsonheader</span><span class="p">[</span><span class="s1">'content-encoding'</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_json_decode</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">encoding</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'received request'</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="s1">'from'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">addr</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Binary or unknown content-type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span> <span class="o">=</span> <span class="n">data</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'received </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">jsonheader</span><span class="p">[</span><span class="s2">"content-type"</span><span class="p">]</span><span class="si">}</span><span class="s1"> request from'</span><span class="p">,</span>
              <span class="bp">self</span><span class="o">.</span><span class="n">addr</span><span class="p">)</span>
    <span class="c1"># Set selector to listen for write events, we're done reading.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_set_selector_events_mask</span><span class="p">(</span><span class="s1">'w'</span><span class="p">)</span>
</code></pre></div>
<p>After saving the message content to the <code>data</code> variable, <code>process_request()</code> removes it from the receive buffer. Then, if the content type is JSON, it decodes and deserializes it. If it’s not, for this example application, it assumes it’s a binary request and simply prints the content type.</p>
<p>The last thing <code>process_request()</code> does is modify the selector to monitor write events only. In the server’s main script, <code>app-server.py</code>, the socket is initially set to monitor read events only. Now that the request has been fully processed, we’re no longer interested in reading.</p>
<p>A response can now be created and written to the socket. When the socket is writable, <code>create_response()</code> is called from <code>write()</code>:</p>
<div class="highlight python"><pre><span></span><code><span class="k">def</span> <span class="nf">create_response</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">jsonheader</span><span class="p">[</span><span class="s1">'content-type'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'text/json'</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_response_json_content</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Binary or unknown content-type</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_response_binary_content</span><span class="p">()</span>
    <span class="n">message</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_message</span><span class="p">(</span><span class="o">**</span><span class="n">response</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">response_created</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_send_buffer</span> <span class="o">+=</span> <span class="n">message</span>
</code></pre></div>
<p>A response is created by calling other methods, depending on the content type. In this example application, a simple dictionary lookup is done for JSON requests when <code>action == 'search'</code>. You can define other methods for your own applications that get called here.</p>
<p>After creating the response message, the state variable <code>self.response_created</code> is set so <code>write()</code> doesn’t call <code>create_response()</code> again. Finally, the response is appended to the send buffer. This is seen by and sent via <code>_write()</code>.</p>
<p>One tricky bit to figure out was how to close the connection after the response is written. I put the call to <code>close()</code> in the method <code>_write()</code>:</p>
<div class="highlight python"><pre><span></span><code><span class="k">def</span> <span class="nf">_write</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_buffer</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'sending'</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_send_buffer</span><span class="p">),</span> <span class="s1">'to'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">addr</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Should be ready to write</span>
            <span class="n">sent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sock</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_send_buffer</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">BlockingIOError</span><span class="p">:</span>
            <span class="c1"># Resource temporarily unavailable (errno EWOULDBLOCK)</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_send_buffer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_buffer</span><span class="p">[</span><span class="n">sent</span><span class="p">:]</span>
            <span class="c1"># Close when the buffer is drained. The response has been sent.</span>
            <span class="k">if</span> <span class="n">sent</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_buffer</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div>
<p>Although it’s somewhat “hidden,” I think it’s an acceptable trade-off given that the <code>Message</code> class only handles one message per connection. After the response is written, there’s nothing left for the server to do. It’s completed its work.</p>
</section><section class="section4" id="client-main-script"><h4>Client Main Script<a class="headerlink" href="https://realpython.com/python-sockets/#client-main-script" title="Permanent link"></a></h4>
<p>In the client’s main script <code>app-client.py</code>, arguments are read from the command line and used to create requests and start connections to the server:</p>
<div class="highlight sh"><pre><span></span><code><span class="gp">$ </span>./app-client.py
<span class="go">usage: ./app-client.py &lt;host&gt; &lt;port&gt; &lt;action&gt; &lt;value&gt;</span>
</code></pre></div>
<p>Here’s an example:</p>
<div class="highlight sh"><pre><span></span><code><span class="gp">$ </span>./app-client.py <span class="m">127</span>.0.0.1 <span class="m">65432</span> search needle
</code></pre></div>
<p>After creating a dictionary representing the request from the command-line arguments, the host, port, and request dictionary are passed to <code>start_connection()</code>:</p>
<div class="highlight python"><pre><span></span><code><span class="k">def</span> <span class="nf">start_connection</span><span class="p">(</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="n">addr</span> <span class="o">=</span> <span class="p">(</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">'starting connection to'</span><span class="p">,</span> <span class="n">addr</span><span class="p">)</span>
    <span class="n">sock</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
    <span class="n">sock</span><span class="o">.</span><span class="n">setblocking</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">sock</span><span class="o">.</span><span class="n">connect_ex</span><span class="p">(</span><span class="n">addr</span><span class="p">)</span>
    <span class="n">events</span> <span class="o">=</span> <span class="n">selectors</span><span class="o">.</span><span class="n">EVENT_READ</span> <span class="o">|</span> <span class="n">selectors</span><span class="o">.</span><span class="n">EVENT_WRITE</span>
    <span class="n">message</span> <span class="o">=</span> <span class="n">libclient</span><span class="o">.</span><span class="n">Message</span><span class="p">(</span><span class="n">sel</span><span class="p">,</span> <span class="n">sock</span><span class="p">,</span> <span class="n">addr</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>
    <span class="n">sel</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">sock</span><span class="p">,</span> <span class="n">events</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
</code></pre></div>
<p>A socket is created for the server connection as well as a <code>Message</code> object using the <code>request</code> dictionary.</p>
<p>Like the server, the <code>Message</code> object is associated with the socket in the call to <code>sel.register()</code>. However, for the client, the socket is initially set to be monitored for both read and write events. Once the request has been written, we’ll modify it to listen for read events only.</p>
<p>This approach gives us the same advantage as the server: not wasting CPU cycles. After the request has been sent, we’re no longer interested in write events, so there’s no reason to wake up and process them.</p>
</section><section class="section4" id="client-message-class"><h4>Client Message Class<a class="headerlink" href="https://realpython.com/python-sockets/#client-message-class" title="Permanent link"></a></h4>
<p>In the section <a href="https://realpython.com/python-sockets/#message-entry-point">Message Entry Point</a>, we looked at how the message object was called into action when socket events were ready via <code>process_events()</code>. Now let’s look at what happens after data is read and written on the socket and a message is ready to be processed by the client.</p>
<p>The client’s message class is in <code>libclient.py</code>. You can find the <a href="https://github.com/realpython/materials/tree/master/python-sockets-tutorial">source code on GitHub</a>.</p>
<p>The methods appear in the class in the order in which processing takes place for a message.</p>
<p>The first task for the client is to queue the request:</p>
<div class="highlight python"><pre><span></span><code><span class="k">def</span> <span class="nf">queue_request</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">content</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">[</span><span class="s1">'content'</span><span class="p">]</span>
    <span class="n">content_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">[</span><span class="s1">'type'</span><span class="p">]</span>
    <span class="n">content_encoding</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">[</span><span class="s1">'encoding'</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">content_type</span> <span class="o">==</span> <span class="s1">'text/json'</span><span class="p">:</span>
        <span class="n">req</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">'content_bytes'</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_json_encode</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">content_encoding</span><span class="p">),</span>
            <span class="s1">'content_type'</span><span class="p">:</span> <span class="n">content_type</span><span class="p">,</span>
            <span class="s1">'content_encoding'</span><span class="p">:</span> <span class="n">content_encoding</span>
        <span class="p">}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">req</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">'content_bytes'</span><span class="p">:</span> <span class="n">content</span><span class="p">,</span>
            <span class="s1">'content_type'</span><span class="p">:</span> <span class="n">content_type</span><span class="p">,</span>
            <span class="s1">'content_encoding'</span><span class="p">:</span> <span class="n">content_encoding</span>
        <span class="p">}</span>
    <span class="n">message</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_message</span><span class="p">(</span><span class="o">**</span><span class="n">req</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_send_buffer</span> <span class="o">+=</span> <span class="n">message</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_request_queued</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div>
<p>The dictionaries used to create the request, depending on what was passed on the command line, are in the client’s main script, <code>app-client.py</code>. The request dictionary is passed as an argument to the class when a <code>Message</code> object is created.</p>
<p>The request message is created and appended to the send buffer, which is then seen by and sent via <code>_write()</code>. The state variable <code>self._request_queued</code> is set so <code>queue_request()</code> isn’t called again.</p>
<p>After the request has been sent, the client waits for a response from the server.</p>
<p>The methods for reading and processing a message in the client are the same as the server. As response data is read from the socket, the <code>process</code> header methods are called: <code>process_protoheader()</code> and <code>process_jsonheader()</code>.</p>
<p>The difference is in the naming of the final <code>process</code> methods and the fact that they’re processing a response, not creating one: <code>process_response()</code>, <code>_process_response_json_content()</code>, and <code>_process_response_binary_content()</code>.</p>
<p>Last, but certainly not least, is the final call for <code>process_response()</code>:</p>
<div class="highlight python"><pre><span></span><code><span class="k">def</span> <span class="nf">process_response</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># ...</span>
    <span class="c1"># Close when response has been processed</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div>
</section><section class="section4" id="message-class-wrapup"><h4>Message Class Wrapup<a class="headerlink" href="https://realpython.com/python-sockets/#message-class-wrapup" title="Permanent link"></a></h4>
<p>I’ll conclude the <code>Message</code> class discussion by mentioning a couple of things that are important to notice with a few of the supporting methods.</p>
<p>Any exceptions raised by the class are caught by the main script in its <code>except</code> clause:</p>
<div class="highlight python"><pre><span></span><code><span class="k">try</span><span class="p">:</span>
    <span class="n">message</span><span class="o">.</span><span class="n">process_events</span><span class="p">(</span><span class="n">mask</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">'main: error: exception for'</span><span class="p">,</span>
          <span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="n">message</span><span class="o">.</span><span class="n">addr</span><span class="si">}</span><span class="s1">:</span><span class="se">\n</span><span class="si">{</span><span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
    <span class="n">message</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div>
<p>Note the last line: <code>message.close()</code>.</p>
<p>This is a really important line, for more than one reason! Not only does it make sure that the socket is closed, but <code>message.close()</code> also removes the socket from being monitored by <code>select()</code>. This greatly simplifies the code in the class and reduces complexity. If there’s an exception or we explicitly raise one ourselves, we know <code>close()</code> will take care of the cleanup.</p>
<p>The methods <code>Message._read()</code> and <code>Message._write()</code> also contain something interesting:</p>
<div class="highlight python"><pre><span></span><code><span class="k">def</span> <span class="nf">_read</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Should be ready to read</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sock</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">4096</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">BlockingIOError</span><span class="p">:</span>
        <span class="c1"># Resource temporarily unavailable (errno EWOULDBLOCK)</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">data</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_recv_buffer</span> <span class="o">+=</span> <span class="n">data</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">'Peer closed.'</span><span class="p">)</span>
</code></pre></div>
<p>Note the <code>except</code> line: <code>except BlockingIOError:</code>.</p>
<p><code>_write()</code> has one too. These lines are important because they catch a temporary error and skip over it using <code>pass</code>. The temporary error is when the socket would <a href="https://realpython.com/python-sockets/#blocking-calls">block</a>, for example if it’s waiting on the network or the other end of the connection (its peer).</p>
<p>By catching and skipping over the exception with <code>pass</code>, <code>select()</code> will eventually call us again, and we’ll get another chance to read or write the data.</p>
<div><div class="rounded border border-light" style="display:block;position:relative;"><div style="display:block;width:100%;padding-top:12.5%;"></div><div class="rpad rounded border" data-unit="8x1" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;"><a href="https://srv.realpython.net/click/28266526380/?c=30337084727&amp;p=58946116052&amp;r=29437" rel="nofollow" target="_blank"><img src="./Socket Programming in Python (Guide) – Real Python_files/e8b8e877da2a454b3a6930fecd28c95c" style="max-width: 100%; max-height: 100%; width: 100%;"></a></div></div><a class="small text-muted" href="https://realpython.com/account/join/" rel="nofollow"><i aria-hidden="true" class="fa fa-info-circle"> </i> Remove ads</a></div></section></section><section class="section3" id="running-the-application-client-and-server"><h3>Running the Application Client and Server<a class="headerlink" href="https://realpython.com/python-sockets/#running-the-application-client-and-server" title="Permanent link"></a></h3>
<p>After all of this hard work, let’s have some fun and run some searches!</p>
<p>In these examples, I’ll run the server so it listens on all interfaces by passing an empty string for the <code>host</code> argument. This will allow me to run the client and connect from a virtual machine that’s on another network. It emulates a big-endian PowerPC machine.</p>
<p>First, let’s start the server:</p>
<div class="highlight sh"><pre><span></span><code><span class="gp">$ </span>./app-server.py <span class="s1">''</span> <span class="m">65432</span>
<span class="go">listening on ('', 65432)</span>
</code></pre></div>
<p>Now let’s run the client and enter a search. Let’s see if we can find him:</p>
<div class="highlight sh"><pre><span></span><code><span class="gp">$ </span>./app-client.py <span class="m">10</span>.0.1.1 <span class="m">65432</span> search morpheus
<span class="go">starting connection to ('10.0.1.1', 65432)</span>
<span class="go">sending b'\x00d{"byteorder": "big", "content-type": "text/json", "content-encoding": "utf-8", "content-length": 41}{"action": "search", "value": "morpheus"}' to ('10.0.1.1', 65432)</span>
<span class="go">received response {'result': 'Follow the white rabbit. 🐰'} from ('10.0.1.1', 65432)</span>
<span class="go">got result: Follow the white rabbit. 🐰</span>
<span class="go">closing connection to ('10.0.1.1', 65432)</span>
</code></pre></div>
<p>My terminal is running a shell that’s using a text encoding of Unicode (UTF-8), so the output above prints nicely with emojis.</p>
<p>Let’s see if we can find the puppies:</p>
<div class="highlight sh"><pre><span></span><code><span class="gp">$ </span>./app-client.py <span class="m">10</span>.0.1.1 <span class="m">65432</span> search 🐶
<span class="go">starting connection to ('10.0.1.1', 65432)</span>
<span class="go">sending b'\x00d{"byteorder": "big", "content-type": "text/json", "content-encoding": "utf-8", "content-length": 37}{"action": "search", "value": "\xf0\x9f\x90\xb6"}' to ('10.0.1.1', 65432)</span>
<span class="go">received response {'result': '🐾 Playing ball! 🏐'} from ('10.0.1.1', 65432)</span>
<span class="go">got result: 🐾 Playing ball! 🏐</span>
<span class="go">closing connection to ('10.0.1.1', 65432)</span>
</code></pre></div>
<p>Notice the byte string sent over the network for the request in the <code>sending</code> line. It’s easier to see if you look for the bytes printed in hex that represent the puppy emoji: <code>\xf0\x9f\x90\xb6</code>. I was able to <a href="https://support.apple.com/en-us/HT201586">enter the emoji</a> for the search since my terminal is using Unicode with the encoding UTF-8.</p>
<p>This demonstrates that we’re sending raw bytes over the network and they need to be decoded by the receiver to be interpreted correctly. This is why we went to all of the trouble to create a header that contains the content type and encoding.</p>
<p>Here’s the server output from both client connections above:</p>
<div class="highlight sh"><pre><span></span><code><span class="go">accepted connection from ('10.0.2.2', 55340)</span>
<span class="go">received request {'action': 'search', 'value': 'morpheus'} from ('10.0.2.2', 55340)</span>
<span class="go">sending b'\x00g{"byteorder": "little", "content-type": "text/json", "content-encoding": "utf-8", "content-length": 43}{"result": "Follow the white rabbit. \xf0\x9f\x90\xb0"}' to ('10.0.2.2', 55340)</span>
<span class="go">closing connection to ('10.0.2.2', 55340)</span>

<span class="go">accepted connection from ('10.0.2.2', 55338)</span>
<span class="go">received request {'action': 'search', 'value': '🐶'} from ('10.0.2.2', 55338)</span>
<span class="go">sending b'\x00g{"byteorder": "little", "content-type": "text/json", "content-encoding": "utf-8", "content-length": 37}{"result": "\xf0\x9f\x90\xbe Playing ball! \xf0\x9f\x8f\x90"}' to ('10.0.2.2', 55338)</span>
<span class="go">closing connection to ('10.0.2.2', 55338)</span>
</code></pre></div>
<p>Look at the <code>sending</code> line to see the bytes that were written to the client’s socket. This is the server’s response message.</p>
<p>You can also test sending binary requests to the server if the <code>action</code> argument is anything other than <code>search</code>:</p>
<div class="highlight sh"><pre><span></span><code><span class="gp">$ </span>./app-client.py <span class="m">10</span>.0.1.1 <span class="m">65432</span> binary 😃
<span class="go">starting connection to ('10.0.1.1', 65432)</span>
<span class="go">sending b'\x00|{"byteorder": "big", "content-type": "binary/custom-client-binary-type", "content-encoding": "binary", "content-length": 10}binary\xf0\x9f\x98\x83' to ('10.0.1.1', 65432)</span>
<span class="go">received binary/custom-server-binary-type response from ('10.0.1.1', 65432)</span>
<span class="go">got response: b'First 10 bytes of request: binary\xf0\x9f\x98\x83'</span>
<span class="go">closing connection to ('10.0.1.1', 65432)</span>
</code></pre></div>
<p>Since the request’s <code>content-type</code> is not <code>text/json</code>, the server treats it as a custom binary type and doesn’t perform JSON decoding. It simply prints the <code>content-type</code> and returns the first 10 bytes to the client:</p>
<div class="highlight sh"><pre><span></span><code><span class="gp">$ </span>./app-server.py <span class="s1">''</span> <span class="m">65432</span>
<span class="go">listening on ('', 65432)</span>
<span class="go">accepted connection from ('10.0.2.2', 55320)</span>
<span class="go">received binary/custom-client-binary-type request from ('10.0.2.2', 55320)</span>
<span class="go">sending b'\x00\x7f{"byteorder": "little", "content-type": "binary/custom-server-binary-type", "content-encoding": "binary", "content-length": 37}First 10 bytes of request: binary\xf0\x9f\x98\x83' to ('10.0.2.2', 55320)</span>
<span class="go">closing connection to ('10.0.2.2', 55320)</span>
</code></pre></div>
</section></section><section class="section2" id="troubleshooting"><h2>Troubleshooting<a class="headerlink" href="https://realpython.com/python-sockets/#troubleshooting" title="Permanent link"></a></h2>
<p>Inevitably, something won’t work, and you’ll be wondering what to do. Don’t worry, it happens to all of us. Hopefully, with the help of this tutorial, your debugger, and favorite search engine, you’ll be able to get going again with the source code part.</p>
<p>If not, your first stop should be Python’s <a href="https://docs.python.org/3/library/socket.html">socket module</a> documentation. Make sure you read all of the documentation for each function or method you’re calling. Also, read through the <a href="https://realpython.com/python-sockets/#reference">Reference</a> section for ideas. In particular, check the <a href="https://realpython.com/python-sockets/#errors">Errors</a> section.</p>
<p>Sometimes, it’s not all about the source code. The source code might be correct, and it’s just the other host, the client or server. Or it could be the network, for example, a router, firewall, or some other networking device that’s playing man-in-the-middle.</p>
<p>For these types of issues, additional tools are essential. Below are a few tools and utilities that might help or at least provide some clues.</p>
<div><div class="rounded border border-light" style="display:block;position:relative;"><div style="display:block;width:100%;padding-top:12.5%;"></div><div class="rpad rounded border" data-unit="8x1" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;"><a href="https://srv.realpython.net/click/11225539816/?c=48874902176&amp;p=58946116052&amp;r=14584" rel="nofollow" target="_blank"><img src="./Socket Programming in Python (Guide) – Real Python_files/cae48de6b6f52aa978e17ea36747a9fc" style="max-width: 100%; max-height: 100%; width: 100%;"></a></div></div><a class="small text-muted" href="https://realpython.com/account/join/" rel="nofollow"><i aria-hidden="true" class="fa fa-info-circle"> </i> Remove ads</a></div><section class="section3" id="ping"><h3>ping<a class="headerlink" href="https://realpython.com/python-sockets/#ping" title="Permanent link"></a></h3>
<p><code>ping</code> will check if a host is alive and connected to the network by sending an <a href="https://en.wikipedia.org/wiki/Internet_Control_Message_Protocol">ICMP</a> echo request. It communicates directly with the operating system’s TCP/IP protocol stack, so it works independently from any application running on the host.</p>
<p>Below is an example of running ping on macOS:</p>
<div class="highlight sh"><pre><span></span><code><span class="gp">$ </span>ping -c <span class="m">3</span> <span class="m">127</span>.0.0.1
<span class="go">PING 127.0.0.1 (127.0.0.1): 56 data bytes</span>
<span class="go">64 bytes from 127.0.0.1: icmp_seq=0 ttl=64 time=0.058 ms</span>
<span class="go">64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.165 ms</span>
<span class="go">64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.164 ms</span>

<span class="go">--- 127.0.0.1 ping statistics ---</span>
<span class="go">3 packets transmitted, 3 packets received, 0.0% packet loss</span>
<span class="go">round-trip min/avg/max/stddev = 0.058/0.129/0.165/0.050 ms</span>
</code></pre></div>
<p>Note the statistics at the end of the output. This can be helpful when you’re trying to discover intermittent connectivity problems. For example, is there any packet loss? How much latency is there (see the round-trip times)?</p>
<p>If there’s a firewall between you and the other host, a ping’s echo request may not be allowed. Some firewall administrators implement policies that enforce this. The idea being that they don’t want their hosts to be discoverable. If this is the case and you have firewall rules added to allow the hosts to communicate, make sure that the rules also allow ICMP to pass between them.</p>
<p>ICMP is the protocol used by <code>ping</code>, but it’s also the protocol TCP and other lower-level protocols use to communicate error messages. If you’re experiencing strange behavior or slow connections, this could be the reason.</p>
<p>ICMP messages are identified by type and code. To give you an idea of the important information they carry, here are a few:</p>
<div class="table-responsive">
<table class="table table-hover">
<thead>
<tr>
<th>ICMP Type</th>
<th>ICMP Code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>8</td>
<td>0</td>
<td>Echo request</td>
</tr>
<tr>
<td>0</td>
<td>0</td>
<td>Echo reply</td>
</tr>
<tr>
<td>3</td>
<td>0</td>
<td>Destination network unreachable</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>Destination host unreachable</td>
</tr>
<tr>
<td>3</td>
<td>2</td>
<td>Destination protocol unreachable</td>
</tr>
<tr>
<td>3</td>
<td>3</td>
<td>Destination port unreachable</td>
</tr>
<tr>
<td>3</td>
<td>4</td>
<td>Fragmentation required, and DF flag set</td>
</tr>
<tr>
<td>11</td>
<td>0</td>
<td>TTL expired in transit</td>
</tr>
</tbody>
</table>
</div>
<p>See the article <a href="https://en.wikipedia.org/wiki/Path_MTU_Discovery#Problems_with_PMTUD">Path MTU Discovery</a> for information regarding fragmentation and ICMP messages. This is an example of something that can cause strange behavior that I mentioned previously.</p>
</section><section class="section3" id="netstat"><h3>netstat<a class="headerlink" href="https://realpython.com/python-sockets/#netstat" title="Permanent link"></a></h3>
<p>In the section <a href="https://realpython.com/python-sockets/#viewing-socket-state">Viewing Socket State</a>, we looked at how <code>netstat</code> can be used to display information about sockets and their current state. This utility is available on macOS, Linux, and Windows.</p>
<p>I didn’t mention the columns <code>Recv-Q</code> and <code>Send-Q</code> in the example output. These columns will show you the number of bytes that are held in network buffers that are queued for transmission or receipt, but for some reason haven’t been read or written by the remote or local application.</p>
<p>In other words, the bytes are waiting in network buffers in the operating system’s queues. One reason could be the application is CPU bound or is otherwise unable to call <code>socket.recv()</code> or <code>socket.send()</code> and process the bytes. Or there could be network issues affecting communications like congestion or failing network hardware or cabling.</p>
<p>To demonstrate this and see how much data I could send before seeing an error, I wrote a test client that connects to a test server and repeatedly calls <code>socket.send()</code>. The test server never calls <code>socket.recv()</code>. It just accepts the connection. This causes the network buffers on the server to fill, which eventually raises an error on the client.</p>
<p>First, I started the server:</p>
<div class="highlight sh"><pre><span></span><code><span class="gp">$ </span>./app-server-test.py <span class="m">127</span>.0.0.1 <span class="m">65432</span>
<span class="go">listening on ('127.0.0.1', 65432)</span>
</code></pre></div>
<p>Then I ran the client. Let’s see what the error is:</p>
<div class="highlight sh"><pre><span></span><code><span class="gp">$ </span>./app-client-test.py <span class="m">127</span>.0.0.1 <span class="m">65432</span> binary <span class="nb">test</span>
<span class="go">error: socket.send() blocking io exception for ('127.0.0.1', 65432):</span>
<span class="go">BlockingIOError(35, 'Resource temporarily unavailable')</span>
</code></pre></div>
<p>Here’s the <code>netstat</code> output while the client and server were still running, with the client printing out the error message above multiple times:</p>
<div class="highlight sh"><pre><span></span><code><span class="gp">$ </span>netstat -an <span class="p">|</span> grep <span class="m">65432</span>
<span class="go">Proto Recv-Q Send-Q  Local Address          Foreign Address        (state)</span>
<span class="go">tcp4  408300      0  127.0.0.1.65432        127.0.0.1.53225        ESTABLISHED</span>
<span class="go">tcp4       0 269868  127.0.0.1.53225        127.0.0.1.65432        ESTABLISHED</span>
<span class="go">tcp4       0      0  127.0.0.1.65432        *.*                    LISTEN</span>
</code></pre></div>
<p>The first entry is the server (<code>Local Address</code> has port 65432):</p>
<div class="highlight sh"><pre><span></span><code><span class="go">Proto Recv-Q Send-Q  Local Address          Foreign Address        (state)</span>
<span class="go">tcp4  408300      0  127.0.0.1.65432        127.0.0.1.53225        ESTABLISHED</span>
</code></pre></div>
<p>Notice the <code>Recv-Q</code>: <code>408300</code>.</p>
<p>The second entry is the client (<code>Foreign Address</code> has port 65432):</p>
<div class="highlight sh"><pre><span></span><code><span class="go">Proto Recv-Q Send-Q  Local Address          Foreign Address        (state)</span>
<span class="go">tcp4       0 269868  127.0.0.1.53225        127.0.0.1.65432        ESTABLISHED</span>
</code></pre></div>
<p>Notice the <code>Send-Q</code>: <code>269868</code>.</p>
<p>The client sure was trying to write bytes, but the server wasn’t reading them. This caused the server’s network buffer queue to fill on the receive side and the client’s network buffer queue to fill on the send side.</p>
</section><section class="section3" id="windows"><h3>Windows<a class="headerlink" href="https://realpython.com/python-sockets/#windows" title="Permanent link"></a></h3>
<p>If you work with Windows, there’s a suite of utilities that you should definitely check out if you haven’t already: <a href="https://docs.microsoft.com/en-us/sysinternals/">Windows Sysinternals</a>.</p>
<p>One of them is <code>TCPView.exe</code>. TCPView is a graphical <code>netstat</code> for Windows. In addition to addresses, port numbers, and socket state, it will show you running totals for the number of packets and bytes, sent and received. Like the Unix utility <code>lsof</code>, you also get the process name and ID. Check the menus for other display options.</p>
<figure><a href="./Socket Programming in Python (Guide) – Real Python_files/tcpview.webp" target="_blank"><img loading="lazy" class="img-fluid mx-auto d-block " src="./Socket Programming in Python (Guide) – Real Python_files/tcpview.webp" width="1242" height="588" srcset="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/tcpview.53c115c8b061.png&amp;w=310&amp;sig=76fc3e1c9124cf6763ef521bdb0eb946f055b5dc 310w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/tcpview.53c115c8b061.png&amp;w=621&amp;sig=30ade506fa284f8bb303e3619df977da4d5f7b6a 621w, https://files.realpython.com/media/tcpview.53c115c8b061.png 1242w" sizes="75vw" alt="TCPView screenshot" data-asset="566"></a></figure>
</section><section class="section3" id="wireshark"><h3>Wireshark<a class="headerlink" href="https://realpython.com/python-sockets/#wireshark" title="Permanent link"></a></h3>
<p>Sometimes you need to see what’s happening on the wire. Forget about what the application log says or what the value is that’s being returned from a library call. You want to see what’s actually being sent or received on the network. Just like debuggers, when you need to see it, there’s no substitute.</p>
<p><a href="https://www.wireshark.org/">Wireshark</a> is a network protocol analyzer and traffic capture application that runs on macOS, Linux, and Windows, among others. There’s a GUI version named <code>wireshark</code>, and also a terminal, text-based version named <code>tshark</code>.</p>
<p>Running a traffic capture is a great way to watch how an application behaves on the network and gather evidence about what it sends and receives, and how often and how much. You’ll also be able to see when a client or server closes or aborts a connection or stops responding. This information can be extremely helpful when you’re troubleshooting.</p>
<p>There are many good tutorials and other resources on the web that will walk you through the basics of using Wireshark and TShark.</p>
<p>Here’s an example of a traffic capture using Wireshark on the loopback interface:</p>
<figure><a href="./Socket Programming in Python (Guide) – Real Python_files/wireshark.529c058891dc.png" target="_blank"><img loading="lazy" class="img-fluid mx-auto d-block " src="./Socket Programming in Python (Guide) – Real Python_files/wireshark.529c058891dc.png" width="2524" height="1448" srcset="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/wireshark.529c058891dc.png&amp;w=631&amp;sig=7df24ccc930c696fdd27cd4368ff5848921a945f 631w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/wireshark.529c058891dc.png&amp;w=1262&amp;sig=71fedcff136fa6260358f75f8b8981a867c2d0a8 1262w, https://files.realpython.com/media/wireshark.529c058891dc.png 2524w" sizes="75vw" alt="Wireshark screenshot" data-asset="567"></a></figure>
<p>Here’s the same example shown above using <code>tshark</code>:</p>
<div class="highlight sh"><pre><span></span><code><span class="gp">$ </span>tshark -i lo0 <span class="s1">'tcp port 65432'</span>
<span class="go">Capturing on 'Loopback'</span>
<span class="go">    1   0.000000    127.0.0.1 → 127.0.0.1    TCP 68 53942 → 65432 [SYN] Seq=0 Win=65535 Len=0 MSS=16344 WS=32 TSval=940533635 TSecr=0 SACK_PERM=1</span>
<span class="go">    2   0.000057    127.0.0.1 → 127.0.0.1    TCP 68 65432 → 53942 [SYN, ACK] Seq=0 Ack=1 Win=65535 Len=0 MSS=16344 WS=32 TSval=940533635 TSecr=940533635 SACK_PERM=1</span>
<span class="go">    3   0.000068    127.0.0.1 → 127.0.0.1    TCP 56 53942 → 65432 [ACK] Seq=1 Ack=1 Win=408288 Len=0 TSval=940533635 TSecr=940533635</span>
<span class="go">    4   0.000075    127.0.0.1 → 127.0.0.1    TCP 56 [TCP Window Update] 65432 → 53942 [ACK] Seq=1 Ack=1 Win=408288 Len=0 TSval=940533635 TSecr=940533635</span>
<span class="go">    5   0.000216    127.0.0.1 → 127.0.0.1    TCP 202 53942 → 65432 [PSH, ACK] Seq=1 Ack=1 Win=408288 Len=146 TSval=940533635 TSecr=940533635</span>
<span class="go">    6   0.000234    127.0.0.1 → 127.0.0.1    TCP 56 65432 → 53942 [ACK] Seq=1 Ack=147 Win=408128 Len=0 TSval=940533635 TSecr=940533635</span>
<span class="go">    7   0.000627    127.0.0.1 → 127.0.0.1    TCP 204 65432 → 53942 [PSH, ACK] Seq=1 Ack=147 Win=408128 Len=148 TSval=940533635 TSecr=940533635</span>
<span class="go">    8   0.000649    127.0.0.1 → 127.0.0.1    TCP 56 53942 → 65432 [ACK] Seq=147 Ack=149 Win=408128 Len=0 TSval=940533635 TSecr=940533635</span>
<span class="go">    9   0.000668    127.0.0.1 → 127.0.0.1    TCP 56 65432 → 53942 [FIN, ACK] Seq=149 Ack=147 Win=408128 Len=0 TSval=940533635 TSecr=940533635</span>
<span class="go">   10   0.000682    127.0.0.1 → 127.0.0.1    TCP 56 53942 → 65432 [ACK] Seq=147 Ack=150 Win=408128 Len=0 TSval=940533635 TSecr=940533635</span>
<span class="go">   11   0.000687    127.0.0.1 → 127.0.0.1    TCP 56 [TCP Dup ACK 6#1] 65432 → 53942 [ACK] Seq=150 Ack=147 Win=408128 Len=0 TSval=940533635 TSecr=940533635</span>
<span class="go">   12   0.000848    127.0.0.1 → 127.0.0.1    TCP 56 53942 → 65432 [FIN, ACK] Seq=147 Ack=150 Win=408128 Len=0 TSval=940533635 TSecr=940533635</span>
<span class="go">   13   0.001004    127.0.0.1 → 127.0.0.1    TCP 56 65432 → 53942 [ACK] Seq=150 Ack=148 Win=408128 Len=0 TSval=940533635 TSecr=940533635</span>
<span class="go">^C13 packets captured</span>
</code></pre></div>
</section></section><section class="section2" id="reference"><h2>Reference<a class="headerlink" href="https://realpython.com/python-sockets/#reference" title="Permanent link"></a></h2>
<p>This section serves as a general reference with additional information and links to external resources.</p>
<section class="section3" id="python-documentation"><h3>Python Documentation<a class="headerlink" href="https://realpython.com/python-sockets/#python-documentation" title="Permanent link"></a></h3>
<ul>
<li>Python’s <a href="https://docs.python.org/3/library/socket.html">socket module</a></li>
<li>Python’s <a href="https://docs.python.org/3/howto/sockets.html#socket-howto">Socket Programming HOWTO</a></li>
</ul>
</section><section class="section3" id="errors"><h3>Errors<a class="headerlink" href="https://realpython.com/python-sockets/#errors" title="Permanent link"></a></h3>
<p>The following is from Python’s <code>socket</code> module documentation:</p>
<blockquote>
<p>“All errors raise exceptions. The normal exceptions for invalid argument types and out-of-memory conditions can be raised; starting from Python 3.3, errors related to socket or address semantics raise <code>OSError</code> or one of its subclasses.” <a href="https://docs.python.org/3/library/socket.html">(Source)</a></p>
</blockquote>
<p>Here are some common errors you’ll probably encounter when working with sockets:</p>
<div class="table-responsive">
<table class="table table-hover">
<thead>
<tr>
<th>Exception</th>
<th><code>errno</code> Constant</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>BlockingIOError</td>
<td>EWOULDBLOCK</td>
<td>Resource temporarily unavailable. For example, in non-blocking mode, when calling <code>send()</code> and the peer is busy and not reading, the send queue (network buffer) is full. Or there are issues with the network. Hopefully this is a temporary condition.</td>
</tr>
<tr>
<td>OSError</td>
<td>EADDRINUSE</td>
<td>Address already in use. Make sure there’s not another process running that’s using the same port number and your server is setting the socket option <code>SO_REUSEADDR</code>: <code>socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)</code>.</td>
</tr>
<tr>
<td>ConnectionResetError</td>
<td>ECONNRESET</td>
<td>Connection reset by peer. The remote process crashed or did not close its socket properly (unclean shutdown). Or there’s a firewall or other device in the network path that’s missing rules or misbehaving.</td>
</tr>
<tr>
<td>TimeoutError</td>
<td>ETIMEDOUT</td>
<td>Operation timed out. No response from peer.</td>
</tr>
<tr>
<td>ConnectionRefusedError</td>
<td>ECONNREFUSED</td>
<td>Connection refused. No application listening on specified port.</td>
</tr>
</tbody>
</table>
</div>
</section><section class="section3" id="socket-address-families"><h3>Socket Address Families<a class="headerlink" href="https://realpython.com/python-sockets/#socket-address-families" title="Permanent link"></a></h3>
<p><code>socket.AF_INET</code> and <code>socket.AF_INET6</code> represent the address and protocol families used for the first argument to <code>socket.socket()</code>. APIs that use an address expect it to be in a certain format, depending on whether the socket was created with <code>socket.AF_INET</code> or <code>socket.AF_INET6</code>.</p>
<div class="table-responsive">
<table class="table table-hover">
<thead>
<tr>
<th>Address Family</th>
<th>Protocol</th>
<th>Address Tuple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>socket.AF_INET</code></td>
<td>IPv4</td>
<td><code>(host, port)</code></td>
<td><code>host</code> is a string with a hostname like <code>'www.example.com'</code> or an IPv4 address like <code>'10.1.2.3'</code>. <code>port</code> is an integer.</td>
</tr>
<tr>
<td><code>socket.AF_INET6</code></td>
<td>IPv6</td>
<td><code>(host, port, flowinfo, scopeid)</code></td>
<td><code>host</code> is a string with a hostname like <code>'www.example.com'</code> or an IPv6 address like <code>'fe80::6203:7ab:fe88:9c23'</code>. <code>port</code> is an integer. <code>flowinfo</code> and <code>scopeid</code> represent the <code>sin6_flowinfo</code> and <code>sin6_scope_id</code> members in the C struct <code>sockaddr_in6</code>.</td>
</tr>
</tbody>
</table>
</div>
<p>Note the excerpt below from Python’s socket module documentation regarding the <code>host</code> value of the address tuple:</p>
<blockquote>
<p>“For IPv4 addresses, two special forms are accepted instead of a host address: the empty string represents <code>INADDR_ANY</code>, and the string <code>'&lt;broadcast&gt;'</code> represents <code>INADDR_BROADCAST</code>. This behavior is not compatible with IPv6, therefore, you may want to avoid these if you intend to support IPv6 with your Python programs.” <a href="https://docs.python.org/3/library/socket.html">(Source)</a></p>
</blockquote>
<p>See Python’s <a href="https://docs.python.org/3/library/socket.html#socket-families">Socket families documentation</a> for more information.</p>
<p>I’ve used IPv4 sockets in this tutorial, but if your network supports it, try testing and using IPv6 if possible. One way to support this easily is by using the function <a href="https://docs.python.org/3/library/socket.html#socket.getaddrinfo">socket.getaddrinfo()</a>. It translates the <code>host</code> and <code>port</code> arguments into a sequence of 5-tuples that contains all of the necessary arguments for creating a socket connected to that service. <code>socket.getaddrinfo()</code> will understand and interpret passed-in IPv6 addresses and hostnames that resolve to IPv6 addresses, in addition to IPv4.</p>
<p>The following example returns address information for a TCP connection to <code>example.org</code> on port <code>80</code>:</p>
<div class="highlight python repl"><span class="repl-toggle" title="Toggle REPL prompts and output">&gt;&gt;&gt;</span><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">socket</span><span class="o">.</span><span class="n">getaddrinfo</span><span class="p">(</span><span class="s2">"example.org"</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="n">proto</span><span class="o">=</span><span class="n">socket</span><span class="o">.</span><span class="n">IPPROTO_TCP</span><span class="p">)</span>
<span class="go">[(&lt;AddressFamily.AF_INET6: 10&gt;, &lt;SocketType.SOCK_STREAM: 1&gt;,</span>
<span class="go"> 6, '', ('2606:2800:220:1:248:1893:25c8:1946', 80, 0, 0)),</span>
<span class="go"> (&lt;AddressFamily.AF_INET: 2&gt;, &lt;SocketType.SOCK_STREAM: 1&gt;,</span>
<span class="go"> 6, '', ('93.184.216.34', 80))]</span>
</code></pre></div>
<p>Results may differ on your system if IPv6 isn’t enabled. The values returned above can be used by passing them to <code>socket.socket()</code> and <code>socket.connect()</code>. There’s a client and server example in the <a href="https://docs.python.org/3/library/socket.html#example">Example section</a> of Python’s socket module documentation.</p>
</section><section class="section3" id="using-hostnames"><h3>Using Hostnames<a class="headerlink" href="https://realpython.com/python-sockets/#using-hostnames" title="Permanent link"></a></h3>
<p>For context, this section applies mostly to using hostnames with <code>bind()</code> and <code>connect()</code>, or <code>connect_ex()</code>, when you intend to use the loopback interface, “localhost.” However, it applies any time you’re using a hostname and there’s an expectation of it resolving to a certain address and having a special meaning to your application that affects its behavior or assumptions. This is in contrast to the typical scenario of a client using a hostname to connect to a server that’s resolved by DNS, like www.example.com.</p>
<p>The following is from Python’s <code>socket</code> module documentation:</p>
<blockquote>
<p>“If you use a hostname in the host portion of IPv4/v6 socket address, the program may show a non-deterministic behavior, as Python uses the first address returned from the DNS resolution. The socket address will be resolved differently into an actual IPv4/v6 address, depending on the results from DNS resolution and/or the host configuration. For deterministic behavior use a numeric address in host portion.” <a href="https://docs.python.org/3/library/socket.html">(Source)</a></p>
</blockquote>
<p>The standard convention for the name “<a href="https://en.wikipedia.org/wiki/Localhost">localhost</a>” is for it to resolve to <code>127.0.0.1</code> or <code>::1</code>, the loopback interface. This will more than likely be the case for you on your system, but maybe not. It depends on how your system is configured for name resolution. As with all things IT, there are always exceptions, and there are no guarantees that using the name “localhost” will connect to the loopback interface.</p>
<p>For example, on Linux, see <code>man nsswitch.conf</code>, the Name Service Switch configuration file. Another place to check on macOS and Linux is the file <code>/etc/hosts</code>. On Windows, see <code>C:\Windows\System32\drivers\etc\hosts</code>. The <code>hosts</code> file contains a static table of name to address mappings in a simple text format. <a href="https://en.wikipedia.org/wiki/Domain_Name_System">DNS</a> is another piece of the puzzle altogether.</p>
<p>Interestingly enough, as of this writing (June 2018), there’s an RFC draft <a href="https://tools.ietf.org/html/draft-ietf-dnsop-let-localhost-be-localhost-02">Let ‘localhost’ be localhost</a> that discusses the conventions, assumptions and security around using the name “localhost.”</p>
<p>What’s important to understand is that when you use hostnames in your application, the returned address(es) could literally be anything. Don’t make assumptions regarding a name if you have a security-sensitive application. Depending on your application and environment, this may or may not be a concern for you.</p>
<div class="alert alert-primary" role="alert">
<p><strong>Note:</strong> Security precautions and best practices still apply, even if your application isn’t “security-sensitive.” If your application accesses the network, it should be secured and maintained. This means, at a minimum:</p>
<ul>
<li>
<p>System software updates and security patches are applied regularly, including Python. Are you using any third party libraries? If so, make sure those are checked and updated too.</p>
</li>
<li>
<p>If possible, use a dedicated or host-based firewall to restrict connections to trusted systems only.</p>
</li>
<li>
<p>What DNS servers are configured? Do you trust them and their administrators?</p>
</li>
<li>
<p>Make sure that request data is sanitized and validated as much as possible prior to calling other code that processes it. Use (fuzz) tests for this and run them regularly.</p>
</li>
</ul>
</div>
<p>Regardless of whether or not you’re using hostnames, if your application needs to support secure connections (encryption and authentication), you’ll probably want to look into using <a href="https://en.wikipedia.org/wiki/Transport_Layer_Security">TLS</a>. This is its own separate topic and beyond the scope of this tutorial. See Python’s <a href="https://docs.python.org/3/library/ssl.html">ssl module documentation</a> to get started. This is the same protocol that your web browser uses to connect securely to web sites.</p>
<p>With interfaces, IP addresses, and name resolution to consider, there are many variables. What should you do? Here are some recommendations that you can use if you don’t have a network application review process:</p>
<div class="table-responsive">
<table class="table table-hover">
<thead>
<tr>
<th>Application</th>
<th>Usage</th>
<th>Recommendation</th>
</tr>
</thead>
<tbody>
<tr>
<td>Server</td>
<td>loopback interface</td>
<td>Use an IP address, for example, <code>127.0.0.1</code> or <code>::1</code>.</td>
</tr>
<tr>
<td>Server</td>
<td>ethernet interface</td>
<td>Use an IP address, for example, <code>10.1.2.3</code>. To support more than one interface, use an empty string for all interfaces/addresses. See the security note above.</td>
</tr>
<tr>
<td>Client</td>
<td>loopback interface</td>
<td>Use an IP address, for example, <code>127.0.0.1</code> or <code>::1</code>.</td>
</tr>
<tr>
<td>Client</td>
<td>ethernet interface</td>
<td>Use an IP address for consistency and non-reliance on name resolution. For the typical case, use a hostname. See the security note above.</td>
</tr>
</tbody>
</table>
</div>
<p>For clients or servers, if you need to authenticate the host you’re connecting to, look into using TLS.</p>
</section><section class="section3" id="blocking-calls"><h3>Blocking Calls<a class="headerlink" href="https://realpython.com/python-sockets/#blocking-calls" title="Permanent link"></a></h3>
<p>A socket function or method that temporarily suspends your application is a blocking call. For example, <code>accept()</code>, <code>connect()</code>, <code>send()</code>, and <code>recv()</code> “block.” They don’t return immediately. Blocking calls have to wait on system calls (I/O) to complete before they can return a value. So you, the caller, are blocked until they’re done or a timeout or other error occurs.</p>
<p>Blocking socket calls can be set to non-blocking mode so they return immediately. If you do this, you’ll need to at least refactor or redesign your application to handle the socket operation when it’s ready.</p>
<p>Since the call returns immediately, data may not be ready. The callee is waiting on the network and hasn’t had time to complete its work. If this is the case, the current status is the <code>errno</code> value <code>socket.EWOULDBLOCK</code>. Non-blocking mode is supported with <a href="https://docs.python.org/3/library/socket.html#socket.socket.setblocking">setblocking()</a>.</p>
<p>By default, sockets are always created in blocking mode. See <a href="https://docs.python.org/3/library/socket.html#notes-on-socket-timeouts">Notes on socket timeouts</a> for a description of the three modes.</p>
</section><section class="section3" id="closing-connections"><h3>Closing Connections<a class="headerlink" href="https://realpython.com/python-sockets/#closing-connections" title="Permanent link"></a></h3>
<p>An interesting thing to note with TCP is it’s completely legal for the client or server to close their side of the connection while the other side remains open. This is referred to as a “half-open” connection. It’s the application’s decision whether or not this is desirable. In general, it’s not. In this state, the side that’s closed their end of the connection can no longer send data. They can only receive it.</p>
<p>I’m not advocating that you take this approach, but as an example, HTTP uses a header named “Connection” that’s used to standardize how applications should close or persist open connections. For details, see <a href="https://tools.ietf.org/html/rfc7230#section-6.3">section 6.3 in RFC 7230, Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing</a>.</p>
<p>When designing and writing your application and its application-layer protocol, it’s a good idea to go ahead and work out how you expect connections to be closed. Sometimes this is obvious and simple, or it’s something that can take some initial prototyping and testing. It depends on the application and how the message loop is processed with its expected data. Just make sure that sockets are always closed in a timely manner after they complete their work.</p>
</section><section class="section3" id="byte-endianness"><h3>Byte Endianness<a class="headerlink" href="https://realpython.com/python-sockets/#byte-endianness" title="Permanent link"></a></h3>
<p>See <a href="https://en.wikipedia.org/wiki/Endianness">Wikipedia’s article on endianness</a> for details on how different CPUs store byte orderings in memory. When interpreting individual bytes, this isn’t a problem. However, when handling multiple bytes that are read and processed as a single value, for example a 4-byte integer, the byte order needs to be reversed if you’re communicating with a machine that uses a different endianness.</p>
<p>Byte order is also important for text strings that are represented as multi-byte sequences, like Unicode. Unless you’re always using “true,” strict <a href="https://en.wikipedia.org/wiki/ASCII">ASCII</a> and control the client and server implementations, you’re probably better off using Unicode with an encoding like UTF-8 or one that supports a <a href="https://en.wikipedia.org/wiki/Byte_order_mark">byte order mark (BOM)</a>.</p>
<p>It’s important to explicitly define the encoding used in your application-layer protocol. You can do this by mandating that all text is UTF-8 or using a “content-encoding” header that specifies the encoding. This prevents your application from having to detect the encoding, which you should avoid if possible.</p>
<p>This becomes problematic when there is data involved that’s stored in files or a database and there’s no metadata available that specifies its encoding. When the data is transferred to another endpoint, it will have to try to detect the encoding. For a discussion, see <a href="https://en.wikipedia.org/wiki/Unicode">Wikipedia’s Unicode article</a> that references <a href="https://tools.ietf.org/html/rfc3629#page-6">RFC 3629: UTF-8, a transformation format of ISO 10646</a>:</p>
<blockquote>
<p>“However RFC 3629, the UTF-8 standard, recommends that byte order marks be forbidden in protocols using UTF-8, but discusses the cases where this may not be possible. In addition, the large restriction on possible patterns in UTF-8 (for instance there cannot be any lone bytes with the high bit set) means that it should be possible to distinguish UTF-8 from other character encodings without relying on the BOM.” <a href="https://en.wikipedia.org/wiki/Unicode">(Source)</a></p>
</blockquote>
<p>The takeaway from this is to always store the encoding used for data that’s handled by your application if it can vary. In other words, try to somehow store the encoding as metadata if it’s not always UTF-8 or some other encoding with a BOM. Then you can send that encoding in a header along with the data to tell the receiver what it is.</p>
<p>The byte ordering used in TCP/IP is <a href="https://en.wikipedia.org/wiki/Endianness#Big">big-endian</a> and is referred to as network order. Network order is used to represent integers in lower layers of the protocol stack, like IP addresses and port numbers. Python’s socket module includes functions that convert integers to and from network and host byte order:</p>
<div class="table-responsive">
<table class="table table-hover">
<thead>
<tr>
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>socket.ntohl(x)</code></td>
<td>Convert 32-bit positive integers from network to host byte order. On machines where the host byte order is the same as network byte order, this is a no-op; otherwise, it performs a 4-byte swap operation.</td>
</tr>
<tr>
<td><code>socket.ntohs(x)</code></td>
<td>Convert 16-bit positive integers from network to host byte order. On machines where the host byte order is the same as network byte order, this is a no-op; otherwise, it performs a 2-byte swap operation.</td>
</tr>
<tr>
<td><code>socket.htonl(x)</code></td>
<td>Convert 32-bit positive integers from host to network byte order. On machines where the host byte order is the same as network byte order, this is a no-op; otherwise, it performs a 4-byte swap operation.</td>
</tr>
<tr>
<td><code>socket.htons(x)</code></td>
<td>Convert 16-bit positive integers from host to network byte order. On machines where the host byte order is the same as network byte order, this is a no-op; otherwise, it performs a 2-byte swap operation.</td>
</tr>
</tbody>
</table>
</div>
<p>You can also use the <a href="https://docs.python.org/3/library/struct.html">struct module</a> to pack and unpack binary data using format strings:</p>
<div class="highlight python"><pre><span></span><code><span class="kn">import</span> <span class="nn">struct</span>
<span class="n">network_byteorder_int</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s1">'&gt;H'</span><span class="p">,</span> <span class="mi">256</span><span class="p">)</span>
<span class="n">python_int</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s1">'&gt;H'</span><span class="p">,</span> <span class="n">network_byteorder_int</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div>
</section></section><section class="section2" id="conclusion"><h2>Conclusion<a class="headerlink" href="https://realpython.com/python-sockets/#conclusion" title="Permanent link"></a></h2>
<p>We covered a lot of ground in this tutorial. Networking and sockets are large subjects. If you’re new to networking or sockets, don’t be discouraged by all of the terms and acronyms.</p>
<p>There are a lot of pieces to become familiar with in order to understand how everything works together. However, just like Python, it will start to make more sense as you get to know the individual pieces and spend more time with them.</p>
<p>We looked at the low-level socket API in Python’s <code>socket</code> module and saw how it can be used to create client-server applications. We also created our own custom class and used it as an application-layer protocol to exchange messages and data between endpoints. You can use this class and build upon it to learn and help make creating your own socket applications easier and faster.</p>
<p>You can find the <a href="https://github.com/realpython/materials/tree/master/python-sockets-tutorial">source code on GitHub</a>.</p>
<p>Congratulations on making it to the end! You are now well on your way to using sockets in your own applications.</p>
<p>I hope this tutorial has given you the information, examples, and inspiration needed to start you on your sockets development journey.</p>
</section>
<div class="text-center my-3">
<div class="jsCompletionStatusWidget btn-group mb-0">
<button title="Click to mark as completed" class="jsBtnCompletion btn btn-secondary border-right" style="border-top-right-radius: 0; border-bottom-right-radius: 0;">Mark as Completed</button>
<button title="Add bookmark" class="jsBtnBookmark btn btn-secondary border-left"><i class="fa fa-fw fa-bookmark-o"></i></button>
</div>
</div>
</div>
<div class="card mt-4 mb-4 bg-secondary">
<p class="card-header h3 text-center bg-light">🐍 Python Tricks 💌</p>
<div class="card-body">
<div class="container">
<div class="row">
<div class="col-xs-12 col-sm-7">
<p>Get a short &amp; sweet <strong>Python Trick</strong> delivered to your inbox every couple of days. No spam ever. Unsubscribe any time. Curated by the Real Python team.</p>
</div>
<div class="col-xs-12 col-sm-5">
<img class="img-fluid rounded mb-3" src="./Socket Programming in Python (Guide) – Real Python_files/pytrick-dict-merge.4201a0125a5e.png" width="738" height="490" alt="Python Tricks Dictionary Merge">
</div>
</div>
<div class="row mb-3">
<form class="col-12" action="https://realpython.com/optins/process/" method="post">
<input type="hidden" name="csrfmiddlewaretoken" value="tmdx10AUaWajsBVzIJLQTOg7o449MJLIA0eqapEnZ6EH2dSiR1Z5WspsC0z8sBGs">
<input type="hidden" name="slug" value="static-python-tricks-footer">
<div class="form-group">
<input name="email" type="email" class="form-control form-control-lg" placeholder="Email Address" required="">
</div>
<button name="submit" type="submit" class="btn btn-primary btn-lg btn-block">Send Me Python Tricks »</button>
</form>
</div>
</div>
</div>
</div>
<div class="card mt-3" id="author">
<p class="card-header h3">About <strong>Nathan Jennings</strong></p>
<div class="card-body">
<div class="container p-0">
<div class="row">
<div class="col-12 col-md-3 align-self-center">
<a href="https://realpython.com/team/njennings/"><img loading="lazy" src="./Socket Programming in Python (Guide) – Real Python_files/saved_resource" srcset="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/real-python-logo-square.28474fda9228.png&amp;w=375&amp;h=375&amp;mode=crop&amp;sig=a4fe7835d3add4020f4719e30686c2f93c955307 375w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/real-python-logo-square.28474fda9228.png&amp;w=750&amp;h=750&amp;mode=crop&amp;sig=e9d5bf35942de842b9f3a5a53719a4b946754655 750w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/real-python-logo-square.28474fda9228.png&amp;w=1500&amp;h=1500&amp;mode=crop&amp;sig=cde57ea954c4fba2999456a2cbffa297fbc0f31d 1500w" sizes="25vw" width="1500" height="1500" class="d-block d-md-none rounded-circle img-fluid w-33 mb-0 mx-auto" alt="Nathan Jennings"></a>
<a href="https://realpython.com/team/njennings/"><img loading="lazy" src="./Socket Programming in Python (Guide) – Real Python_files/saved_resource" srcset="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/real-python-logo-square.28474fda9228.png&amp;w=375&amp;h=375&amp;mode=crop&amp;sig=a4fe7835d3add4020f4719e30686c2f93c955307 375w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/real-python-logo-square.28474fda9228.png&amp;w=750&amp;h=750&amp;mode=crop&amp;sig=e9d5bf35942de842b9f3a5a53719a4b946754655 750w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/real-python-logo-square.28474fda9228.png&amp;w=1500&amp;h=1500&amp;mode=crop&amp;sig=cde57ea954c4fba2999456a2cbffa297fbc0f31d 1500w" sizes="25vw" width="1500" height="1500" class="d-none d-md-block rounded-circle img-fluid w-100 mb-0" alt="Nathan Jennings"></a>
</div>
<div class="col mt-3">
<p>Nathan is a member of the Real Python tutorial team who started his programmer career with C a long time ago, but eventually found Python. From web applications and data collection to networking and network security, he enjoys all things Pythonic.</p>
<a href="https://realpython.com/team/njennings/" class="card-link">» More about Nathan</a>
</div>
</div>
</div>
</div>
<hr class="my-0">
<div class="card-body pb-0">
<div class="container">
<div class="row">
<p><em>Each tutorial at Real Python is created by a team of developers so that it meets our high quality standards. The team members who worked on this tutorial are:</em></p>
</div>
<div class="row align-items-center w-100 mx-auto">
<div class="col-4 col-sm-2 align-self-center">
<a href="https://realpython.com/team/asantos/"><img loading="lazy" src="./Socket Programming in Python (Guide) – Real Python_files/saved_resource(1)" srcset="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/asantos-avatar.888c78fffab3.jpg&amp;w=175&amp;h=175&amp;mode=crop&amp;sig=30253487c673fd67bb45ea6bef95b3c57e115e46 175w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/asantos-avatar.888c78fffab3.jpg&amp;w=350&amp;h=350&amp;mode=crop&amp;sig=a43bd9ea30a6f61a4fc2451ab9abfc6faec8a2c0 350w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/asantos-avatar.888c78fffab3.jpg&amp;w=700&amp;h=700&amp;mode=crop&amp;sig=be17609cd7f6a4cd249ff61e186b3ad1aece949c 700w" sizes="10vw" width="1500" height="1500" class="rounded-circle img-fluid w-100" alt="Aldren Santos"></a>
</div>
<div class="col pl-0 d-none d-sm-block">
<a href="https://realpython.com/team/asantos/" class="card-link small"><p>Aldren</p></a>
</div>
<div class="col-4 col-sm-2 align-self-center">
<a href="https://realpython.com/team/bsolomon/"><img loading="lazy" src="./Socket Programming in Python (Guide) – Real Python_files/saved_resource(2)" srcset="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/IMG_3963.e371ae77a419.jpeg&amp;w=912&amp;h=912&amp;mode=crop&amp;sig=684b2da775b7c5b84cb50c8b5bde68bf5d0f190d 912w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/IMG_3963.e371ae77a419.jpeg&amp;w=1824&amp;h=1824&amp;mode=crop&amp;sig=7f1bafd4ea94421b8c0541e93b0e2c9f542ae67b 1824w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/IMG_3963.e371ae77a419.jpeg&amp;w=3648&amp;h=3648&amp;mode=crop&amp;sig=0b17436f3b11beb54530fd39d095b53d3887237d 3648w" sizes="10vw" width="1500" height="1500" class="rounded-circle img-fluid w-100" alt="Brad Solomon"></a>
</div>
<div class="col pl-0 d-none d-sm-block">
<a href="https://realpython.com/team/bsolomon/" class="card-link small"><p>Brad</p></a>
</div>
<div class="col-4 col-sm-2 align-self-center">
<a href="https://realpython.com/team/janderson/"><img loading="lazy" src="./Socket Programming in Python (Guide) – Real Python_files/saved_resource(3)" srcset="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/jima.0b8f990b951a.jpg&amp;w=175&amp;h=175&amp;mode=crop&amp;sig=7a31f392cdb36bdba441a07f51cb4ee9e05b6278 175w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/jima.0b8f990b951a.jpg&amp;w=350&amp;h=350&amp;mode=crop&amp;sig=930eb646d5099a859b2324ee0a092fda6cb9c4c5 350w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/jima.0b8f990b951a.jpg&amp;w=700&amp;h=700&amp;mode=crop&amp;sig=56f5f2e95c106f905736b62a165ec40540bbd5f3 700w" sizes="10vw" width="1500" height="1500" class="rounded-circle img-fluid w-100" alt="Jim Anderson"></a>
</div>
<div class="col pl-0 d-none d-sm-block">
<a href="https://realpython.com/team/janderson/" class="card-link small"><p>Jim</p></a>
</div>
</div>
<div class="row align-items-center w-100 mx-auto">
<div class="col-4 col-sm-2 align-self-center">
<a href="https://realpython.com/team/jjablonski/"><img loading="lazy" src="./Socket Programming in Python (Guide) – Real Python_files/saved_resource(4)" srcset="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/jjablonksi-avatar.e37c4f83308e.jpg&amp;w=200&amp;h=200&amp;mode=crop&amp;sig=706b16de3cb88a8f353f4a98d7c7bc7234229bd0 200w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/jjablonksi-avatar.e37c4f83308e.jpg&amp;w=400&amp;h=400&amp;mode=crop&amp;sig=6d7aa672ca3f1ac5f7cd62ed1641b60f98d04d8b 400w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/jjablonksi-avatar.e37c4f83308e.jpg&amp;w=800&amp;h=800&amp;mode=crop&amp;sig=c363b704eeccb35f2247db13baff3d4383459858 800w" sizes="10vw" width="1500" height="1500" class="rounded-circle img-fluid w-100" alt="Joanna Jablonski"></a>
</div>
<div class="col pl-0 d-none d-sm-block">
<a href="https://realpython.com/team/jjablonski/" class="card-link small"><p>Joanna</p></a>
</div>
<div class="col-4 col-sm-2 align-self-center"></div>
<div class="col pl-0 d-none d-sm-block"></div>
<div class="col-4 col-sm-2 align-self-center"></div>
<div class="col pl-0 d-none d-sm-block"></div>
</div>
</div>
</div>
</div>
<div class="bg-light rounded py-4 my-4 shadow shadow-sm mx-n2">
<div class="col-12 text-center d-block d-md-none">
<p class="h2 mb-3">Master <u><span class="marker-highlight">Real-World Python Skills</span></u> With Unlimited Access to Real&nbsp;Python</p>
<p class="mb-1"><img class="w-75" src="./Socket Programming in Python (Guide) – Real Python_files/lesson-locked.f5105cfd26db.svg"></p>
<p class="mx-auto w-75 mb-3 small"><strong>Join us and get access to hundreds of tutorials, hands-on video courses, and a community of expert&nbsp;Pythonistas:</strong></p>
<p class="mb-0"><a href="https://realpython.com/account/join/?utm_source=rp_article_footer&amp;utm_content=python-sockets" class="btn btn-primary btn-sm px-4 mb-0">Level Up Your Python Skills »</a>
</p></div>
<div class="col-12 text-center d-none d-md-block">
<p class="h2 mb-2">Master <u><span class="marker-highlight">Real-World Python Skills</span></u><br>With Unlimited Access to Real&nbsp;Python</p>
<p class="mb-2"><img class="w-50 mb-2" src="./Socket Programming in Python (Guide) – Real Python_files/lesson-locked.f5105cfd26db.svg"></p>
<p class="mx-auto w-50 mb-3"><strong>Join us and get access to hundreds of tutorials, hands-on video courses, and a community of expert Pythonistas:</strong></p>
<p><a href="https://realpython.com/account/join/?utm_source=rp_article_footer&amp;utm_content=python-sockets" class="btn btn-primary btn-lg px-4">Level Up Your Python Skills »</a>
</p></div>
</div>
<div class="card mt-4" id="reader-comments">
<p class="card-header h3">What Do You Think?</p>
<div class="text-center mt-3 mb-0 p-0">
<span>
<a target="_blank" rel="nofollow" href="https://twitter.com/intent/tweet/?text=Check%20out%20this%20%23Python%20tutorial:%20Socket%20Programming%20in%20Python%20%28Guide%29%20by%20@realpython&amp;url=https%3A//realpython.com/python-sockets/" class="mr-1 badge badge-twitter text-light mb-1"><i class="mr-1 fa fa-twitter text-light"></i>Tweet</a>
<a target="_blank" rel="nofollow" href="https://facebook.com/sharer/sharer.php?u=https%3A//realpython.com/python-sockets/" class="mr-1 badge badge-facebook text-light mb-1"><i class="mr-1 fa fa-facebook text-light"></i>Share</a>
<a target="_blank" rel="nofollow" href="mailto:?subject=Python%20article%20for%20you&amp;body=Check%20out%20this%20Python%20tutorial:%0A%0ASocket%20Programming%20in%20Python%20%28Guide%29%0A%0Ahttps%3A//realpython.com/python-sockets/" class="mr-1 badge badge-red text-light mb-1"><i class="mr-1 fa fa-envelope text-light"></i>Email</a>
</span>
</div>
<div class="card-body">
<div class="alert alert-dark">
<p class="mb-0"><strong>Real Python Comment Policy:</strong> The most useful comments are those written with the goal of learning from or helping out other readers—after reading the whole article and all the earlier comments. Complaints and insults generally won’t make the cut here.</p>
</div>
<p>What’s your #1 takeaway or favorite thing you learned? How are you going to put your newfound skills to use? Leave a comment below and let us know.</p>
<div class="mb-4" id="disqus_thread">
</div>
</div>
</div>
<div class="card mt-4 mb-4">
<p class="card-header h3">Keep Learning</p>
<div class="card-body">
<p class="mb-0">Related Tutorial Categories:
<a href="https://realpython.com/tutorials/advanced/" class="badge badge-light text-muted">advanced</a>
<a href="https://realpython.com/tutorials/python/" class="badge badge-light text-muted">python</a>
<a href="https://realpython.com/tutorials/web-dev/" class="badge badge-light text-muted">web-dev</a>
</p>
</div>
</div>
<div class="modal fade" tabindex="-1" role="dialog" id="rpvc">
<div class="modal-dialog modal-lg modal-dialog-centered" role="document">
<div class="modal-content">
<div class="modal-header border-0 mt-3">
<div class="col-12 modal-title text-center">
<h2 class="my-0 mx-5">Master <u>Real-World Python Skills</u> With Unlimited Access to Real Python</h2>
<p class="text-center text-muted mt-2 mb-1">Already a member? <a href="https://realpython.com/account/login/">Sign-In</a></p>
</div>
</div>
<div class="modal-body bg-light">
<div class="col-12 text-center">
<p class="mb-2 mt-3"><a href="https://realpython.com/account/join/?utm_source=rp&amp;utm_medium=web&amp;utm_campaign=pwn&amp;utm_content=v2"><img class="w-50 mb-2" src="./Socket Programming in Python (Guide) – Real Python_files/lesson-locked.f5105cfd26db.svg"></a></p>
<p class="mx-auto w-66 mb-3"><strong>Join us and get access to hundreds of tutorials, hands-on video courses, and a community of expert Pythonistas:</strong></p>
<p><a href="https://realpython.com/account/join/?utm_source=rp&amp;utm_medium=web&amp;utm_campaign=pwn&amp;utm_content=v2" class="btn btn-primary btn-lg px-4"><i class="fa fa-unlock mr-2"></i>Unlock All Content »</a>
</p></div>
</div>
<div class="modal-footer border-0">
<button class="text-muted btn" data-dismiss="modal">Close</button>
</div>
</div>
</div>
</div>
</div>
<aside class="col-md-7 col-lg-4">
<div class="card mb-3 bg-secondary">
<form class="card-body" action="https://realpython.com/optins/process/" method="post">
<div class="form-group">
<p class="h5 text-muted text-center">— FREE Email Series —</p>
<p class="h3 text-center">🐍 Python Tricks 💌</p>
<p><img class="img-fluid rounded" src="./Socket Programming in Python (Guide) – Real Python_files/pytrick-dict-merge.4201a0125a5e.png" width="738" height="490" alt="Python Tricks Dictionary Merge"></p>
</div>
<div class="form-group">
<input type="hidden" name="csrfmiddlewaretoken" value="tmdx10AUaWajsBVzIJLQTOg7o449MJLIA0eqapEnZ6EH2dSiR1Z5WspsC0z8sBGs">
<input type="hidden" name="slug" value="static-python-tricks-sidebar">
<input type="email" class="form-control form-control-md" name="email" placeholder="Email…" required="">
</div>
<button type="submit" name="submit" class="btn btn-primary btn-md btn-block">Get Python Tricks »</button>
<p class="mb-0 mt-2 text-muted text-center">🔒 No spam. Unsubscribe any time.</p>
</form>
</div>
<div class="sidebar-module sidebar-module-inset border">
<p class="h4"><a class="link-unstyled" href="https://realpython.com/tutorials/all/">All Tutorial Topics</a></p>
<a href="https://realpython.com/tutorials/advanced/" class="badge badge-light text-muted">advanced</a>
<a href="https://realpython.com/tutorials/api/" class="badge badge-light text-muted">api</a>
<a href="https://realpython.com/tutorials/basics/" class="badge badge-light text-muted">basics</a>
<a href="https://realpython.com/tutorials/best-practices/" class="badge badge-light text-muted">best-practices</a>
<a href="https://realpython.com/tutorials/community/" class="badge badge-light text-muted">community</a>
<a href="https://realpython.com/tutorials/databases/" class="badge badge-light text-muted">databases</a>
<a href="https://realpython.com/tutorials/data-science/" class="badge badge-light text-muted">data-science</a>
<a href="https://realpython.com/tutorials/devops/" class="badge badge-light text-muted">devops</a>
<a href="https://realpython.com/tutorials/django/" class="badge badge-light text-muted">django</a>
<a href="https://realpython.com/tutorials/docker/" class="badge badge-light text-muted">docker</a>
<a href="https://realpython.com/tutorials/flask/" class="badge badge-light text-muted">flask</a>
<a href="https://realpython.com/tutorials/front-end/" class="badge badge-light text-muted">front-end</a>
<a href="https://realpython.com/tutorials/gui/" class="badge badge-light text-muted">gui</a>
<a href="https://realpython.com/tutorials/intermediate/" class="badge badge-light text-muted">intermediate</a>
<a href="https://realpython.com/tutorials/machine-learning/" class="badge badge-light text-muted">machine-learning</a>
<a href="https://realpython.com/tutorials/projects/" class="badge badge-light text-muted">projects</a>
<a href="https://realpython.com/tutorials/python/" class="badge badge-light text-muted">python</a>
<a href="https://realpython.com/tutorials/testing/" class="badge badge-light text-muted">testing</a>
<a href="https://realpython.com/tutorials/tools/" class="badge badge-light text-muted">tools</a>
<a href="https://realpython.com/tutorials/web-dev/" class="badge badge-light text-muted">web-dev</a>
<a href="https://realpython.com/tutorials/web-scraping/" class="badge badge-light text-muted">web-scraping</a>
</div>
<div class="sidebar-module sidebar-module-inset p-0" style="overflow:hidden;">
<div style="display:block;position:relative;">
<div style="display:block;width:100%;padding-top:100%;"></div>
<div class="rpad" data-unit="1x1" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;"><a href="https://srv.realpython.net/click/36200094533/?c=50610331919&amp;p=58946116052&amp;r=36408" rel="nofollow" target="_blank"><img src="./Socket Programming in Python (Guide) – Real Python_files/60aaf6dcb9b8446688e95baca5f2cad5" style="max-width: 100%; max-height: 100%; width: 100%;"></a></div>
</div>
</div>
<div class="sidebar-sticky sidebar-nav-message">
<div class="bg-light sidebar-module sidebar-module-inset" id="sidebar-toc">
<p class="h4 text-muted"><a class="link-unstyled" href="https://realpython.com/python-sockets/#toc">Table of Contents</a></p>
<div class="toc">
<ul>
<li class=""><a href="https://realpython.com/python-sockets/#background">Background</a></li>
<li class=""><a href="https://realpython.com/python-sockets/#socket-api-overview">Socket API Overview</a></li>
<li class=""><a href="https://realpython.com/python-sockets/#tcp-sockets">TCP Sockets</a></li>
<li class="active"><a href="https://realpython.com/python-sockets/#echo-client-and-server">Echo Client and Server</a><ul>
<li><a href="https://realpython.com/python-sockets/#echo-server">Echo Server</a></li>
<li><a href="https://realpython.com/python-sockets/#echo-client">Echo Client</a></li>
<li><a href="https://realpython.com/python-sockets/#running-the-echo-client-and-server">Running the Echo Client and Server</a></li>
<li><a href="https://realpython.com/python-sockets/#viewing-socket-state">Viewing Socket State</a></li>
</ul>
</li>
<li><a href="https://realpython.com/python-sockets/#communication-breakdown">Communication Breakdown</a></li>
<li><a href="https://realpython.com/python-sockets/#handling-multiple-connections">Handling Multiple Connections</a></li>
<li><a href="https://realpython.com/python-sockets/#multi-connection-client-and-server">Multi-Connection Client and Server</a><ul>
<li><a href="https://realpython.com/python-sockets/#multi-connection-server">Multi-Connection Server</a></li>
<li><a href="https://realpython.com/python-sockets/#multi-connection-client">Multi-Connection Client</a></li>
<li><a href="https://realpython.com/python-sockets/#running-the-multi-connection-client-and-server">Running the Multi-Connection Client and Server</a></li>
</ul>
</li>
<li><a href="https://realpython.com/python-sockets/#application-client-and-server">Application Client and Server</a><ul>
<li><a href="https://realpython.com/python-sockets/#application-protocol-header">Application Protocol Header</a></li>
<li><a href="https://realpython.com/python-sockets/#sending-an-application-message">Sending an Application Message</a></li>
<li><a href="https://realpython.com/python-sockets/#application-message-class">Application Message Class</a></li>
<li><a href="https://realpython.com/python-sockets/#running-the-application-client-and-server">Running the Application Client and Server</a></li>
</ul>
</li>
<li><a href="https://realpython.com/python-sockets/#troubleshooting">Troubleshooting</a><ul>
<li><a href="https://realpython.com/python-sockets/#ping">ping</a></li>
<li><a href="https://realpython.com/python-sockets/#netstat">netstat</a></li>
<li><a href="https://realpython.com/python-sockets/#windows">Windows</a></li>
<li><a href="https://realpython.com/python-sockets/#wireshark">Wireshark</a></li>
</ul>
</li>
<li><a href="https://realpython.com/python-sockets/#reference">Reference</a><ul>
<li><a href="https://realpython.com/python-sockets/#python-documentation">Python Documentation</a></li>
<li><a href="https://realpython.com/python-sockets/#errors">Errors</a></li>
<li><a href="https://realpython.com/python-sockets/#socket-address-families">Socket Address Families</a></li>
<li><a href="https://realpython.com/python-sockets/#using-hostnames">Using Hostnames</a></li>
<li><a href="https://realpython.com/python-sockets/#blocking-calls">Blocking Calls</a></li>
<li><a href="https://realpython.com/python-sockets/#closing-connections">Closing Connections</a></li>
<li><a href="https://realpython.com/python-sockets/#byte-endianness">Byte Endianness</a></li>
</ul>
</li>
<li><a href="https://realpython.com/python-sockets/#conclusion">Conclusion</a></li>
</ul>
</div>
</div>
<div class="sidebar-module sidebar-module-inset text-center my-3 py-0">
<div class="jsCompletionStatusWidget btn-group mb-0">
<button title="Click to mark as completed" class="jsBtnCompletion btn btn-secondary border-right" style="border-top-right-radius: 0; border-bottom-right-radius: 0;">Mark as Completed</button>
<button title="Add bookmark" class="jsBtnBookmark btn btn-secondary border-left"><i class="fa fa-fw fa-bookmark-o"></i></button>
</div>
</div>
<div class="sidebar-module sidebar-module-inset text-center my-3 py-0">
<span>
<a target="_blank" rel="nofollow" href="https://twitter.com/intent/tweet/?text=Check%20out%20this%20%23Python%20tutorial:%20Socket%20Programming%20in%20Python%20%28Guide%29%20by%20@realpython&amp;url=https%3A//realpython.com/python-sockets/" class="mr-1 badge badge-twitter text-light mb-1"><i class="mr-1 fa fa-twitter text-light"></i>Tweet</a>
<a target="_blank" rel="nofollow" href="https://facebook.com/sharer/sharer.php?u=https%3A//realpython.com/python-sockets/" class="mr-1 badge badge-facebook text-light mb-1"><i class="mr-1 fa fa-facebook text-light"></i>Share</a>
<a target="_blank" rel="nofollow" href="mailto:?subject=Python%20article%20for%20you&amp;body=Check%20out%20this%20Python%20tutorial:%0A%0ASocket%20Programming%20in%20Python%20%28Guide%29%0A%0Ahttps%3A//realpython.com/python-sockets/" class="mr-1 badge badge-red text-light mb-1"><i class="mr-1 fa fa-envelope text-light"></i>Email</a>
</span>
</div>
<div class="sidebar-module sidebar-module-inset p-0" style="overflow:hidden;">
<div style="display:block;position:relative;">
<div style="display:block;width:100%;padding-top:25%;"></div>
<div class="rpad" data-unit="4x1" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;"><a href="https://srv.realpython.net/click/63154477675/?c=48874902176&amp;p=58946116052&amp;r=37712" rel="nofollow" target="_blank"><img src="./Socket Programming in Python (Guide) – Real Python_files/2715fa5362672de6ffb80b688c08675b" style="max-width: 100%; max-height: 100%; width: 100%;"></a></div>
</div>
</div>
</div>
</aside>
</div>
</div>
<footer class="footer">
<div class="container">
<p class="text-center text-muted w-75 mx-auto">© 2012–2021 Real Python&nbsp;⋅ <a href="https://realpython.com/newsletter/">Newsletter</a>&nbsp;⋅ <a href="https://realpython.com/podcasts/rpp/">Podcast</a>&nbsp;⋅ <a href="https://www.youtube.com/realpython">YouTube</a>&nbsp;⋅ <a href="https://twitter.com/realpython">Twitter</a>&nbsp;⋅ <a href="https://facebook.com/LearnRealPython">Facebook</a>&nbsp;⋅ <a href="https://www.instagram.com/realpython/">Instagram</a>&nbsp;⋅ <a href="https://realpython.com/">Python&nbsp;Tutorials</a>&nbsp;⋅ <a href="https://realpython.com/search">Search</a>&nbsp;⋅ <a href="https://realpython.com/privacy-policy/">Privacy Policy</a>&nbsp;⋅ <a href="https://realpython.com/energy-policy/" class="text-success active">Energy Policy</a>&nbsp;⋅ <a href="https://realpython.com/sponsorships/">Advertise</a>&nbsp;⋅ <a href="https://realpython.com/contact/">Contact</a><br>❤️ Happy Pythoning!</p>
</div>
</footer>
<script>
      (function(document, history, location) {
        var HISTORY_SUPPORT = !!(history && history.pushState);

        var anchorScrolls = {
          ANCHOR_REGEX: /^#[^ ]+$/,
          OFFSET_HEIGHT_PX: 120,

          /**
           * Establish events, and fix initial scroll position if a hash is provided.
           */
          init: function() {
            this.scrollToCurrent();
            window.addEventListener('hashchange', this.scrollToCurrent.bind(this));
            document.body.addEventListener('click', this.delegateAnchors.bind(this));
          },

          /**
           * Return the offset amount to deduct from the normal scroll position.
           * Modify as appropriate to allow for dynamic calculations
           */
          getFixedOffset: function() {
            return this.OFFSET_HEIGHT_PX;
          },

          /**
           * If the provided href is an anchor which resolves to an element on the
           * page, scroll to it.
           * @param  {String} href
           * @return {Boolean} - Was the href an anchor.
           */
          scrollIfAnchor: function(href, pushToHistory) {
            var match, rect, anchorOffset;

            if(!this.ANCHOR_REGEX.test(href)) {
              return false;
            }

            match = document.getElementById(href.slice(1));

            if(match) {
              rect = match.getBoundingClientRect();
              anchorOffset = window.pageYOffset + rect.top - this.getFixedOffset();
              window.scrollTo(window.pageXOffset, anchorOffset);

              // Add the state to history as-per normal anchor links
              if(HISTORY_SUPPORT && pushToHistory) {
                history.pushState({}, document.title, location.pathname + href);
              }
            }

            return !!match;
          },

          /**
           * Attempt to scroll to the current location's hash.
           */
          scrollToCurrent: function() {
            this.scrollIfAnchor(window.location.hash);
          },

          /**
           * If the click event's target was an anchor, fix the scroll position.
           */
          delegateAnchors: function(e) {
            var elem = e.target;

            if(
              elem.nodeName === 'A' &&
              this.scrollIfAnchor(elem.getAttribute('href'), true)
            ) {
              e.preventDefault();
            }
          }
        };

        window.addEventListener(
          'DOMContentLoaded', anchorScrolls.init.bind(anchorScrolls)
        );
      })(window.document, window.history, window.location);
    </script>
<script src="./Socket Programming in Python (Guide) – Real Python_files/jquery.min.dc5e7f18c8d3.js.download"></script>
<script src="./Socket Programming in Python (Guide) – Real Python_files/popper.min.1022eaf388cc.js.download"></script>
<script src="./Socket Programming in Python (Guide) – Real Python_files/bootstrap.min.f0c2bcf5ef0c.js.download"></script>
<script>
    (function() {
      document.querySelectorAll(".js-search-form-submit").forEach(function(el) {
        el.addEventListener("click", function(e) {
          e.preventDefault();
          e.currentTarget.parentElement.submit();
        })
      });
    })();
    </script>
<script src="./Socket Programming in Python (Guide) – Real Python_files/repl-toggle.71b73a938a7f.js.download"></script>
<script>window.rp_prop_id = '58946116052';</script>
<script src="./Socket Programming in Python (Guide) – Real Python_files/tag.js.download" async=""></script>
<script src="./Socket Programming in Python (Guide) – Real Python_files/toc-refresh.76a102c7d921.js.download" async=""></script>
<script id="js-context" type="application/json">{"is_completed": false, "is_bookmarked": false, "api_article_bookmark_url": "/api/v1/articles/python-sockets/bookmark/", "api_article_completion_status_url": "/api/v1/articles/python-sockets/completion_status/"}</script>
<script src="./Socket Programming in Python (Guide) – Real Python_files/completion-status.87b7c1b631d9.js.download" async=""></script>
<script id="dsq-count-scr" src="./Socket Programming in Python (Guide) – Real Python_files/count.js.download" async=""></script>
<script>
      var disqus_config = function () {
        this.page.url = 'https://realpython.com/python-sockets/';
        this.page.identifier = 'https://realpython.com/python-sockets/';
        this.callbacks.onReady = [function() {
          if (window.onDisqusReady) {
            window.onDisqusReady();
          }
        }];
      };
      var disqus_script_url = 'https://realpython.disqus.com/embed.js';
    </script>
<script src="./Socket Programming in Python (Guide) – Real Python_files/lazy-disqus.07ee9079f4a3.js.download" defer=""></script>
<script src="./Socket Programming in Python (Guide) – Real Python_files/OneSignalSDK.js.download" async=""></script>
<script>
    var OneSignal = window.OneSignal || [];
    OneSignal.push(function() {
      OneSignal.init({
        appId: "c0081e20-a523-42bb-b0ac-04c5a9e8bf40"
      });
    });
  </script>
<script src="./Socket Programming in Python (Guide) – Real Python_files/articlevc.2fbd5158a355.js.download" defer=""></script>
<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Article",
    "headline": "Socket Programming in Python (Guide)",
    
    "image": {
      "@type": "ImageObject",
      "url": "https://files.realpython.com/media/Python-Sockets-Tutorial_Watermarked.815ce6c85789.jpg",
      "width": 1920,
      "height": 1080
    },
    
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://realpython.com/python-sockets/"
    },
    "datePublished": "2018-08-01T14:00:00+00:00",
    "dateModified": "2020-12-12T01:51:44.189644+00:00",
     "publisher": {
      "@type": "Organization",
      "name": "Real Python",
      "logo": {
        "@type": "ImageObject",
        "url": "https://realpython.com/static/real-python-logo-square-tiny.b2452b6d3823.png",
        "width": 60,
        "height": 60
      }
    },
    "author": {
      "@type": "Organization",
      "name": "Real Python",
      "url": "https://realpython.com",
      "logo": "https://realpython.com/static/real-python-logo-square.146e987bf77c.png"
    },
    "description": "In this in\u002Ddepth tutorial you\u0027ll learn how to build a socket server and client with Python. By the end of this tutorial, you\u0027ll understand how to use the main functions and methods in Python\u0027s socket module to write your own networked client\u002Dserver applications."
  }
  </script>
<script>
  var _dcq = _dcq || [];
  var _dcs = _dcs || {};
  _dcs.account = '6214500';

  (function() {
    var dc = document.createElement('script');
    dc.type = 'text/javascript'; dc.async = true;
    dc.src = '//tag.getdrip.com/6214500.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(dc, s);
  })();
</script>
<script>
  !function(f,b,e,v,n,t,s)
  {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
  n.callMethod.apply(n,arguments):n.queue.push(arguments)};
  if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
  n.queue=[];t=b.createElement(e);t.async=!0;
  t.src=v;s=b.getElementsByTagName(e)[0];
  s.parentNode.insertBefore(t,s)}(window, document,'script',
  'https://connect.facebook.net/en_US/fbevents.js');
  fbq('init', '2220911568135371');
  fbq('track', 'PageView');
</script>
<noscript><img height="1" width="1" style="display:none"
  src="https://www.facebook.com/tr?id=2220911568135371&ev=PageView&noscript=1"
/></noscript>
<script type="text/javascript">(function(){window['__CF$cv$params']={r:'62e162891c3973a1',m:'82b17b4c4ad883a21819157bcfef3a19115d02f3-1615430079-1800-ASmcouNw8g2uRqOtCuuF2ZLFLQ7m5wG4TPuZpQaulRKZ9b9OVO4+L4yY2/zwa+cf7gKwW58KD4bAPzT27g8iXD6rLQMd4bg0Q9bhk4n0Ob7qK2TvQ13fS1Ve3bTD4Sv7qA==',s:[0x7c0d71591b,0xabfd2c23c3],}})();</script>

<div class="drip-lightbox-wrapper">
  <div id="drip-108599" class="drip-lightbox drip-hidden side-image image-right">
    <div id="drip-content-108599" class="drip-content" style="height: auto;">
      <a id="drip-close-108599" class="drip-close">
        <svg width="12px" height="12px" viewBox="630 19 12 12" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <polygon id="x" stroke="none" fill="#A8ACB9" fill-rule="evenodd" points="641.376687 30.1740899 636.49366 24.436669 641.095466 19 639.510399 19 635.701126 23.6038176 631.866288 19 630.281221 19 634.883028 24.436669 630 30.1740899 631.585067 30.1740899 635.701126 25.2463857 639.791621 30.1740899"></polygon>
        </svg>
      </a>

      <div id="drip-form-panel-108599" class="drip-panel" style="display: block;">
          <div class="drip-form-aside">
            <span class="drip-image-helper"></span>
            <img src="./Socket Programming in Python (Guide) – Real Python_files/side_c058822f7c534cad01d5dea43398e2fd.png" class="drip-image">
          </div>

        <div class="drip-form-main">
          <h3 id="drip-content-header-108599">Get a Sample Chapter From the First Course</h3>
          <div id="drip-scroll-108599" class="drip-scroll">
            <div class="drip-description">Enter your email address below and we'll send you the sample chapter right away:</div>
            <form id="drip-form-108599">
              <div style="display: none">
                <input type="hidden" name="form_id" value="108599">
                
              </div>
              <dl class="no-labels">
                    <dt class="label-for-type-email">
    Email Address
      <span title="Required"> *</span>
  </dt>
  <dd>
    <input type="email" name="fields[email]" value="" placeholder="Email Address" class="drip-text-field" id="drip-email-field-108599" tabindex="0">
<div id="drip-errors-for-email-108599" class="drip-errors"></div>

  </dd>

                    <dt class="label-for-type-eu_consent">
    
  </dt>
  <dd>
      <div class="zenput zenput--checkbox hidden" data-container="eu-checkbox">
    <input type="hidden" name="fields[eu_consent]" id="drip-field-eu_consent-108599-denied" value="denied" disabled="disabled">
    <input type="checkbox" name="fields[eu_consent]" id="drip-field-eu_consent-108599" value="granted" disabled="disabled">
    <label class="zenput__checkbox-label" for="drip-field-eu_consent-108599">Receive the Real Python newsletter and get notified about new tutorials we publish on the site, as well as occasional special offers.
      <div class="zenput__checkbox-label__icon"><svg class="octicon octicon-check" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5z"></path></svg></div>
    </label>
  </div>

  </dd>

                  <input type="hidden" name="fields[eu_consent_message]" value="Receive the Real Python newsletter and get notified about new tutorials we publish on the site, as well as occasional special offers." tabindex="-1">

                <div style="display: none;" aria-hidden="true">
  <dt for="website">Website</dt>
  <dd>
    <input type="text" id="website" name="website" placeholder="Website" class="drip-text-field" tabindex="-1" autocomplete="false" value="">
  </dd>
</div>

              </dl>
              <div class="form-controls">
                <input type="submit" name="submit" value="Get Sample Chapter »" id="drip-submit-108599" class="drip-submit-button">
              </div>
              <div id="drip-errors-for-base-108599" class="drip-errors dfwid-error"></div>

            </form>
          </div>
        </div>
      </div>

      <div id="drip-success-panel-108599" class="drip-success drip-panel drip-form-success-message" style="display: none">
        <h3>Almost there...</h3>
        <p class="drip-description drip-post-submission">We emailed you the sample chapter. Please check your inbox in a few minutes.</p>
      </div>
    </div>
  </div>
  <div id="drip-backdrop-108599" class="drip-backdrop drip-fade drip-hidden"></div>
</div><div class="drip-lightbox-wrapper">
  <div id="drip-108609" class="drip-lightbox drip-hidden side-image image-right">
    <div id="drip-content-108609" class="drip-content" style="height: auto;">
      <a id="drip-close-108609" class="drip-close">
        <svg width="12px" height="12px" viewBox="630 19 12 12" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <polygon id="x" stroke="none" fill="#A8ACB9" fill-rule="evenodd" points="641.376687 30.1740899 636.49366 24.436669 641.095466 19 639.510399 19 635.701126 23.6038176 631.866288 19 630.281221 19 634.883028 24.436669 630 30.1740899 631.585067 30.1740899 635.701126 25.2463857 639.791621 30.1740899"></polygon>
        </svg>
      </a>

      <div id="drip-form-panel-108609" class="drip-panel" style="display: block;">
          <div class="drip-form-aside">
            <span class="drip-image-helper"></span>
            <img src="./Socket Programming in Python (Guide) – Real Python_files/side_0743418fd26dda9240db39b8bc3744e1.png" class="drip-image">
          </div>

        <div class="drip-form-main">
          <h3 id="drip-content-header-108609">Get the Python Cheat Sheet</h3>
          <div id="drip-scroll-108609" class="drip-scroll">
            <div class="drip-description">Enter your email address below and we'll send you the Python cheat sheet right away:</div>
            <form id="drip-form-108609">
              <div style="display: none">
                <input type="hidden" name="form_id" value="108609">
                
              </div>
              <dl class="no-labels">
                    <dt class="label-for-type-email">
    Email Address
      <span title="Required"> *</span>
  </dt>
  <dd>
    <input type="email" name="fields[email]" value="" placeholder="Email Address" class="drip-text-field" id="drip-email-field-108609" tabindex="0">
<div id="drip-errors-for-email-108609" class="drip-errors"></div>

  </dd>

                    <dt class="label-for-type-eu_consent">
    
  </dt>
  <dd>
      <div class="zenput zenput--checkbox hidden" data-container="eu-checkbox">
    <input type="hidden" name="fields[eu_consent]" id="drip-field-eu_consent-108609-denied" value="denied" disabled="disabled">
    <input type="checkbox" name="fields[eu_consent]" id="drip-field-eu_consent-108609" value="granted" disabled="disabled">
    <label class="zenput__checkbox-label" for="drip-field-eu_consent-108609">Receive the Real Python newsletter and get notified about new tutorials we publish on the site, as well as occasional special offers.
      <div class="zenput__checkbox-label__icon"><svg class="octicon octicon-check" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5z"></path></svg></div>
    </label>
  </div>

  </dd>

                  <input type="hidden" name="fields[eu_consent_message]" value="Receive the Real Python newsletter and get notified about new tutorials we publish on the site, as well as occasional special offers." tabindex="-1">

                <div style="display: none;" aria-hidden="true">
  <dt for="website">Website</dt>
  <dd>
    <input type="text" id="website" name="website" placeholder="Website" class="drip-text-field" tabindex="-1" autocomplete="false" value="">
  </dd>
</div>

              </dl>
              <div class="form-controls">
                <input type="submit" name="submit" value="Send My Python Cheat Sheet »" id="drip-submit-108609" class="drip-submit-button">
              </div>
              <div id="drip-errors-for-base-108609" class="drip-errors dfwid-error"></div>

            </form>
          </div>
        </div>
      </div>

      <div id="drip-success-panel-108609" class="drip-success drip-panel drip-form-success-message" style="display: none">
        <h3>Almost there...</h3>
        <p class="drip-description drip-post-submission">We emailed you the cheat sheet. Please check your inbox in a few minutes.</p>
      </div>
    </div>
  </div>
  <div id="drip-backdrop-108609" class="drip-backdrop drip-fade drip-hidden"></div>
</div><div class="drip-tab-container">
  <div id="drip-106703" class="drip-tab bottom right side-image image-left">
    <div id="drip-header-106703" class="drip-header">
      <a href="https://realpython.com/python-sockets/#" id="drip-toggle-106703" class="drip-toggle">
        <h2 id="drip-teaser-106703">Improve Your Python</h2>
        <span id="drip-tab-up-106703" class="drip-arrow up">
          <svg width="12px" height="8px" viewBox="1362 659 12 8" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <polygon id="right_angle" stroke="none" fill="#FFFFFF" fill-rule="evenodd" transform="translate(1368.000000, 662.703125) rotate(-90.000000) translate(-1368.000000, -662.703125) " points="1364.29688 667.296875 1368.89062 662.703125 1364.29688 658.109375 1365.70312 656.703125 1371.70312 662.703125 1365.70312 668.703125"></polygon>
          </svg>
        </span>
        <span id="drip-tab-down-106703" class="drip-arrow down" style="display: none"></span>
      </a>
    </div>
    <div id="drip-content-106703" class="drip-content drip-clearfix" style="height: auto; bottom: -532px;">
      <a id="drip-close-106703" class="drip-close">
        <svg width="12px" height="12px" viewBox="630 19 12 12" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <polygon id="x" stroke="none" fill="#A8ACB9" fill-rule="evenodd" points="641.376687 30.1740899 636.49366 24.436669 641.095466 19 639.510399 19 635.701126 23.6038176 631.866288 19 630.281221 19 634.883028 24.436669 630 30.1740899 631.585067 30.1740899 635.701126 25.2463857 639.791621 30.1740899"></polygon>
        </svg>
      </a>

      <div id="drip-form-panel-106703" class="drip-panel drip-clearfix" style="display: block;">
          <div class="drip-form-aside">
            <span class="drip-image-helper"></span>
            <img src="./Socket Programming in Python (Guide) – Real Python_files/side_ded3082af3893736e51b0d2da53701b6.png" class="drip-image">
          </div>

        <div class="drip-form-main">
          <h3 id="drip-content-header-106703">Improve Your Python</h3>
          <div id="drip-scroll-106703" class="drip-scroll">
            <div class="drip-description">...with a fresh 🐍&nbsp;<strong>Python&nbsp;Trick</strong>&nbsp;💌 &nbsp;<br>
code snippet every couple of days:</div>
            <form id="drip-form-106703">
              <div style="display: none">
                <input type="hidden" name="form_id" value="106703">
                
              </div>
              <dl class="no-labels">
                    <dt class="label-for-type-email">
    Email Address
      <span title="Required"> *</span>
  </dt>
  <dd>
    <input type="email" name="fields[email]" value="" placeholder="Email Address" class="drip-text-field" id="drip-email-field-106703" tabindex="0">
<div id="drip-errors-for-email-106703" class="drip-errors"></div>

  </dd>

                    <dt class="label-for-type-eu_consent">
    
  </dt>
  <dd>
      <div class="zenput zenput--checkbox hidden" data-container="eu-checkbox">
    <input type="hidden" name="fields[eu_consent]" id="drip-field-eu_consent-106703-denied" value="denied" disabled="disabled">
    <input type="checkbox" name="fields[eu_consent]" id="drip-field-eu_consent-106703" value="granted" disabled="disabled">
    <label class="zenput__checkbox-label" for="drip-field-eu_consent-106703">Receive the Real Python newsletter and get notified about new tutorials we publish on the site, as well as occasional special offers.
      <div class="zenput__checkbox-label__icon"><svg class="octicon octicon-check" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5z"></path></svg></div>
    </label>
  </div>

  </dd>

                  <input type="hidden" name="fields[eu_consent_message]" value="Receive the Real Python newsletter and get notified about new tutorials we publish on the site, as well as occasional special offers." tabindex="-1">

                <div style="display: none;" aria-hidden="true">
  <dt for="website">Website</dt>
  <dd>
    <input type="text" id="website" name="website" placeholder="Website" class="drip-text-field" tabindex="-1" autocomplete="false" value="">
  </dd>
</div>

              </dl>
              <div class="form-controls">
                <input type="submit" name="submit" value="Send Python Tricks »" id="drip-submit-106703" class="drip-submit-button">
              </div>
              <div id="drip-errors-for-base-106703" class="drip-errors dfwid-error"></div>

            </form>
          </div>
        </div>
      </div>

      <div id="drip-success-panel-106703" class="drip-success drip-panel drip-clearfix drip-form-success-message" style="display: none">
        <h3>Almost there...</h3>
        <p class="drip-description drip-post-submission">Check your inbox. I'm sending you the first Python Trick right now.</p>
      </div>
    </div>
  </div>
</div><div id="fatkun-drop-panel">
        <a id="fatkun-drop-panel-close-btn">×</a>
            <div id="fatkun-drop-panel-inner">
                <div class="fatkun-content">
                    <svg class="fatkun-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5892"><path d="M494.933333 782.933333c2.133333 2.133333 4.266667 4.266667 8.533334 6.4h8.533333c6.4 0 10.666667-2.133333 14.933333-6.4l2.133334-2.133333 275.2-275.2c8.533333-8.533333 8.533333-21.333333 0-29.866667-8.533333-8.533333-21.333333-8.533333-29.866667 0L533.333333 716.8V128c0-12.8-8.533333-21.333333-21.333333-21.333333s-21.333333 8.533333-21.333333 21.333333v588.8L249.6 475.733333c-8.533333-8.533333-21.333333-8.533333-29.866667 0-8.533333 8.533333-8.533333 21.333333 0 29.866667l275.2 277.333333zM853.333333 874.666667H172.8c-12.8 0-21.333333 8.533333-21.333333 21.333333s8.533333 21.333333 21.333333 21.333333H853.333333c12.8 0 21.333333-8.533333 21.333334-21.333333s-10.666667-21.333333-21.333334-21.333333z" p-id="5893"></path></svg>
                    <div class="fatkun-title">Drag and Drop</div>
                    <div class="fatkun-desc">The image will be downloaded</div>
                </div>
            </div>
    </div><div id="onesignal-bell-container" class="onesignal-bell-container onesignal-reset onesignal-bell-container-bottom-left"><div id="onesignal-bell-launcher" class="onesignal-bell-launcher onesignal-bell-launcher-md onesignal-bell-launcher-bottom-left onesignal-bell-launcher-theme-default onesignal-bell-launcher-active" style="bottom: 15px; left: 15px;"><div class="onesignal-bell-launcher-button"><svg class="onesignal-bell-svg" xmlns="http://www.w3.org/2000/svg" width="99.7" height="99.7" viewBox="0 0 99.7 99.7" style="filter: drop-shadow(0 2px 4px rgba(34,36,38,0.35));; -webkit-filter: drop-shadow(0 2px 4px rgba(34,36,38,0.35));;"><circle class="background" cx="49.9" cy="49.9" r="49.9" style="fill: rgb(208, 2, 27);"></circle><path class="foreground" d="M50.1 66.2H27.7s-2-.2-2-2.1c0-1.9 1.7-2 1.7-2s6.7-3.2 6.7-5.5S33 52.7 33 43.3s6-16.6 13.2-16.6c0 0 1-2.4 3.9-2.4 2.8 0 3.8 2.4 3.8 2.4 7.2 0 13.2 7.2 13.2 16.6s-1 11-1 13.3c0 2.3 6.7 5.5 6.7 5.5s1.7.1 1.7 2c0 1.8-2.1 2.1-2.1 2.1H50.1zm-7.2 2.3h14.5s-1 6.3-7.2 6.3-7.3-6.3-7.3-6.3z" style="fill: rgb(255, 255, 255);"></path><ellipse class="stroke" cx="49.9" cy="49.9" rx="37.4" ry="36.9" style="stroke: rgb(255, 255, 255);"></ellipse></svg></div><div class="onesignal-bell-launcher-badge" style="filter: drop-shadow(0 2px 4px rgba(34,36,38,0));; -webkit-filter: drop-shadow(0 2px 4px rgba(34,36,38,0));;"></div><div class="onesignal-bell-launcher-message"><div class="onesignal-bell-launcher-message-body">Receive a notification when we post a new tutorial</div></div><div class="onesignal-bell-launcher-dialog" style="filter: drop-shadow(0px 2px 2px rgba(34,36,38,.15));; -webkit-filter: drop-shadow(0px 2px 2px rgba(34,36,38,.15));;"><div class="onesignal-bell-launcher-dialog-body"></div></div></div></div></body></html>